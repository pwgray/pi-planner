(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function UI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var t_={exports:{}},yu={},n_={exports:{}},ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zs=Symbol.for("react.element"),FI=Symbol.for("react.portal"),bI=Symbol.for("react.fragment"),OI=Symbol.for("react.strict_mode"),BI=Symbol.for("react.profiler"),qI=Symbol.for("react.provider"),$I=Symbol.for("react.context"),GI=Symbol.for("react.forward_ref"),HI=Symbol.for("react.suspense"),zI=Symbol.for("react.memo"),WI=Symbol.for("react.lazy"),hm=Symbol.iterator;function KI(t){return t===null||typeof t!="object"?null:(t=hm&&t[hm]||t["@@iterator"],typeof t=="function"?t:null)}var r_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},i_=Object.assign,o_={};function yo(t,e,n){this.props=t,this.context=e,this.refs=o_,this.updater=n||r_}yo.prototype.isReactComponent={};yo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};yo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function s_(){}s_.prototype=yo.prototype;function Uf(t,e,n){this.props=t,this.context=e,this.refs=o_,this.updater=n||r_}var Ff=Uf.prototype=new s_;Ff.constructor=Uf;i_(Ff,yo.prototype);Ff.isPureReactComponent=!0;var pm=Array.isArray,l_=Object.prototype.hasOwnProperty,bf={current:null},a_={key:!0,ref:!0,__self:!0,__source:!0};function u_(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)l_.call(e,r)&&!a_.hasOwnProperty(r)&&(i[r]=e[r]);var u=arguments.length-2;if(u===1)i.children=n;else if(1<u){for(var c=Array(u),d=0;d<u;d++)c[d]=arguments[d+2];i.children=c}if(t&&t.defaultProps)for(r in u=t.defaultProps,u)i[r]===void 0&&(i[r]=u[r]);return{$$typeof:Zs,type:t,key:o,ref:s,props:i,_owner:bf.current}}function JI(t,e){return{$$typeof:Zs,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Of(t){return typeof t=="object"&&t!==null&&t.$$typeof===Zs}function QI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var mm=/\/+/g;function Cc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?QI(""+t.key):e.toString(36)}function na(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case Zs:case FI:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+Cc(s,0):r,pm(i)?(n="",t!=null&&(n=t.replace(mm,"$&/")+"/"),na(i,e,n,"",function(d){return d})):i!=null&&(Of(i)&&(i=JI(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(mm,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",pm(t))for(var u=0;u<t.length;u++){o=t[u];var c=r+Cc(o,u);s+=na(o,e,n,c,i)}else if(c=KI(t),typeof c=="function")for(t=c.call(t),u=0;!(o=t.next()).done;)o=o.value,c=r+Cc(o,u++),s+=na(o,e,n,c,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function Ml(t,e,n){if(t==null)return t;var r=[],i=0;return na(t,r,"","",function(o){return e.call(n,o,i++)}),r}function YI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Tt={current:null},ra={transition:null},XI={ReactCurrentDispatcher:Tt,ReactCurrentBatchConfig:ra,ReactCurrentOwner:bf};function c_(){throw Error("act(...) is not supported in production builds of React.")}ce.Children={map:Ml,forEach:function(t,e,n){Ml(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ml(t,function(){e++}),e},toArray:function(t){return Ml(t,function(e){return e})||[]},only:function(t){if(!Of(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ce.Component=yo;ce.Fragment=bI;ce.Profiler=BI;ce.PureComponent=Uf;ce.StrictMode=OI;ce.Suspense=HI;ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XI;ce.act=c_;ce.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=i_({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=bf.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)l_.call(e,c)&&!a_.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&u!==void 0?u[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){u=Array(c);for(var d=0;d<c;d++)u[d]=arguments[d+2];r.children=u}return{$$typeof:Zs,type:t.type,key:i,ref:o,props:r,_owner:s}};ce.createContext=function(t){return t={$$typeof:$I,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:qI,_context:t},t.Consumer=t};ce.createElement=u_;ce.createFactory=function(t){var e=u_.bind(null,t);return e.type=t,e};ce.createRef=function(){return{current:null}};ce.forwardRef=function(t){return{$$typeof:GI,render:t}};ce.isValidElement=Of;ce.lazy=function(t){return{$$typeof:WI,_payload:{_status:-1,_result:t},_init:YI}};ce.memo=function(t,e){return{$$typeof:zI,type:t,compare:e===void 0?null:e}};ce.startTransition=function(t){var e=ra.transition;ra.transition={};try{t()}finally{ra.transition=e}};ce.unstable_act=c_;ce.useCallback=function(t,e){return Tt.current.useCallback(t,e)};ce.useContext=function(t){return Tt.current.useContext(t)};ce.useDebugValue=function(){};ce.useDeferredValue=function(t){return Tt.current.useDeferredValue(t)};ce.useEffect=function(t,e){return Tt.current.useEffect(t,e)};ce.useId=function(){return Tt.current.useId()};ce.useImperativeHandle=function(t,e,n){return Tt.current.useImperativeHandle(t,e,n)};ce.useInsertionEffect=function(t,e){return Tt.current.useInsertionEffect(t,e)};ce.useLayoutEffect=function(t,e){return Tt.current.useLayoutEffect(t,e)};ce.useMemo=function(t,e){return Tt.current.useMemo(t,e)};ce.useReducer=function(t,e,n){return Tt.current.useReducer(t,e,n)};ce.useRef=function(t){return Tt.current.useRef(t)};ce.useState=function(t){return Tt.current.useState(t)};ce.useSyncExternalStore=function(t,e,n){return Tt.current.useSyncExternalStore(t,e,n)};ce.useTransition=function(){return Tt.current.useTransition()};ce.version="18.3.1";n_.exports=ce;var le=n_.exports;const ZI=UI(le);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jI=le,eS=Symbol.for("react.element"),tS=Symbol.for("react.fragment"),nS=Object.prototype.hasOwnProperty,rS=jI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,iS={key:!0,ref:!0,__self:!0,__source:!0};function d_(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)nS.call(e,r)&&!iS.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:eS,type:t,key:o,ref:s,props:i,_owner:rS.current}}yu.Fragment=tS;yu.jsx=d_;yu.jsxs=d_;t_.exports=yu;var C=t_.exports,ld={},f_={exports:{}},Ot={},h_={exports:{}},p_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(J,ne){var H=J.length;J.push(ne);e:for(;0<H;){var fe=H-1>>>1,Ee=J[fe];if(0<i(Ee,ne))J[fe]=ne,J[H]=Ee,H=fe;else break e}}function n(J){return J.length===0?null:J[0]}function r(J){if(J.length===0)return null;var ne=J[0],H=J.pop();if(H!==ne){J[0]=H;e:for(var fe=0,Ee=J.length,Ne=Ee>>>1;fe<Ne;){var Zt=2*(fe+1)-1,qt=J[Zt],jt=Zt+1,en=J[jt];if(0>i(qt,H))jt<Ee&&0>i(en,qt)?(J[fe]=en,J[jt]=H,fe=jt):(J[fe]=qt,J[Zt]=H,fe=Zt);else if(jt<Ee&&0>i(en,H))J[fe]=en,J[jt]=H,fe=jt;else break e}}return ne}function i(J,ne){var H=J.sortIndex-ne.sortIndex;return H!==0?H:J.id-ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var c=[],d=[],h=1,p=null,g=3,v=!1,R=!1,P=!1,D=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(J){for(var ne=n(d);ne!==null;){if(ne.callback===null)r(d);else if(ne.startTime<=J)r(d),ne.sortIndex=ne.expirationTime,e(c,ne);else break;ne=n(d)}}function V(J){if(P=!1,S(J),!R)if(n(c)!==null)R=!0,Nt(F);else{var ne=n(d);ne!==null&&Mt(V,ne.startTime-J)}}function F(J,ne){R=!1,P&&(P=!1,w(E),E=-1),v=!0;var H=g;try{for(S(ne),p=n(c);p!==null&&(!(p.expirationTime>ne)||J&&!N());){var fe=p.callback;if(typeof fe=="function"){p.callback=null,g=p.priorityLevel;var Ee=fe(p.expirationTime<=ne);ne=t.unstable_now(),typeof Ee=="function"?p.callback=Ee:p===n(c)&&r(c),S(ne)}else r(c);p=n(c)}if(p!==null)var Ne=!0;else{var Zt=n(d);Zt!==null&&Mt(V,Zt.startTime-ne),Ne=!1}return Ne}finally{p=null,g=H,v=!1}}var b=!1,A=null,E=-1,I=5,x=-1;function N(){return!(t.unstable_now()-x<I)}function M(){if(A!==null){var J=t.unstable_now();x=J;var ne=!0;try{ne=A(!0,J)}finally{ne?k():(b=!1,A=null)}}else b=!1}var k;if(typeof _=="function")k=function(){_(M)};else if(typeof MessageChannel<"u"){var He=new MessageChannel,Oe=He.port2;He.port1.onmessage=M,k=function(){Oe.postMessage(null)}}else k=function(){D(M,0)};function Nt(J){A=J,b||(b=!0,k())}function Mt(J,ne){E=D(function(){J(t.unstable_now())},ne)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(J){J.callback=null},t.unstable_continueExecution=function(){R||v||(R=!0,Nt(F))},t.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<J?Math.floor(1e3/J):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(J){switch(g){case 1:case 2:case 3:var ne=3;break;default:ne=g}var H=g;g=ne;try{return J()}finally{g=H}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(J,ne){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var H=g;g=J;try{return ne()}finally{g=H}},t.unstable_scheduleCallback=function(J,ne,H){var fe=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?fe+H:fe):H=fe,J){case 1:var Ee=-1;break;case 2:Ee=250;break;case 5:Ee=1073741823;break;case 4:Ee=1e4;break;default:Ee=5e3}return Ee=H+Ee,J={id:h++,callback:ne,priorityLevel:J,startTime:H,expirationTime:Ee,sortIndex:-1},H>fe?(J.sortIndex=H,e(d,J),n(c)===null&&J===n(d)&&(P?(w(E),E=-1):P=!0,Mt(V,H-fe))):(J.sortIndex=Ee,e(c,J),R||v||(R=!0,Nt(F))),J},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(J){var ne=g;return function(){var H=g;g=ne;try{return J.apply(this,arguments)}finally{g=H}}}})(p_);h_.exports=p_;var oS=h_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sS=le,bt=oS;function G(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var m_=new Set,As={};function fi(t,e){eo(t,e),eo(t+"Capture",e)}function eo(t,e){for(As[t]=e,t=0;t<e.length;t++)m_.add(e[t])}var bn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ad=Object.prototype.hasOwnProperty,lS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,gm={},ym={};function aS(t){return ad.call(ym,t)?!0:ad.call(gm,t)?!1:lS.test(t)?ym[t]=!0:(gm[t]=!0,!1)}function uS(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function cS(t,e,n,r){if(e===null||typeof e>"u"||uS(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Et(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var it={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){it[t]=new Et(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];it[e]=new Et(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){it[t]=new Et(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){it[t]=new Et(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){it[t]=new Et(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){it[t]=new Et(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){it[t]=new Et(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){it[t]=new Et(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){it[t]=new Et(t,5,!1,t.toLowerCase(),null,!1,!1)});var Bf=/[\-:]([a-z])/g;function qf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Bf,qf);it[e]=new Et(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Bf,qf);it[e]=new Et(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Bf,qf);it[e]=new Et(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){it[t]=new Et(t,1,!1,t.toLowerCase(),null,!1,!1)});it.xlinkHref=new Et("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){it[t]=new Et(t,1,!1,t.toLowerCase(),null,!0,!0)});function $f(t,e,n,r){var i=it.hasOwnProperty(e)?it[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(cS(e,n,i,r)&&(n=null),r||i===null?aS(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Kn=sS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Dl=Symbol.for("react.element"),Ri=Symbol.for("react.portal"),xi=Symbol.for("react.fragment"),Gf=Symbol.for("react.strict_mode"),ud=Symbol.for("react.profiler"),g_=Symbol.for("react.provider"),y_=Symbol.for("react.context"),Hf=Symbol.for("react.forward_ref"),cd=Symbol.for("react.suspense"),dd=Symbol.for("react.suspense_list"),zf=Symbol.for("react.memo"),tr=Symbol.for("react.lazy"),v_=Symbol.for("react.offscreen"),vm=Symbol.iterator;function Wo(t){return t===null||typeof t!="object"?null:(t=vm&&t[vm]||t["@@iterator"],typeof t=="function"?t:null)}var Ve=Object.assign,Ic;function ns(t){if(Ic===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ic=e&&e[1]||""}return`
`+Ic+t}var Sc=!1;function wc(t,e){if(!t||Sc)return"";Sc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,u=o.length-1;1<=s&&0<=u&&i[s]!==o[u];)u--;for(;1<=s&&0<=u;s--,u--)if(i[s]!==o[u]){if(s!==1||u!==1)do if(s--,u--,0>u||i[s]!==o[u]){var c=`
`+i[s].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=s&&0<=u);break}}}finally{Sc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ns(t):""}function dS(t){switch(t.tag){case 5:return ns(t.type);case 16:return ns("Lazy");case 13:return ns("Suspense");case 19:return ns("SuspenseList");case 0:case 2:case 15:return t=wc(t.type,!1),t;case 11:return t=wc(t.type.render,!1),t;case 1:return t=wc(t.type,!0),t;default:return""}}function fd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case xi:return"Fragment";case Ri:return"Portal";case ud:return"Profiler";case Gf:return"StrictMode";case cd:return"Suspense";case dd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case y_:return(t.displayName||"Context")+".Consumer";case g_:return(t._context.displayName||"Context")+".Provider";case Hf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case zf:return e=t.displayName||null,e!==null?e:fd(t.type)||"Memo";case tr:e=t._payload,t=t._init;try{return fd(t(e))}catch{}}return null}function fS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fd(e);case 8:return e===Gf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ar(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function __(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function hS(t){var e=__(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Vl(t){t._valueTracker||(t._valueTracker=hS(t))}function T_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=__(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Aa(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function hd(t,e){var n=e.checked;return Ve({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function _m(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ar(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function E_(t,e){e=e.checked,e!=null&&$f(t,"checked",e,!1)}function pd(t,e){E_(t,e);var n=Ar(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?md(t,e.type,n):e.hasOwnProperty("defaultValue")&&md(t,e.type,Ar(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Tm(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function md(t,e,n){(e!=="number"||Aa(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var rs=Array.isArray;function qi(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ar(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function gd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(G(91));return Ve({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Em(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(G(92));if(rs(n)){if(1<n.length)throw Error(G(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ar(n)}}function C_(t,e){var n=Ar(e.value),r=Ar(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Cm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function I_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?I_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ll,S_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ll=Ll||document.createElement("div"),Ll.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ll.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Rs(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var cs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pS=["Webkit","ms","Moz","O"];Object.keys(cs).forEach(function(t){pS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),cs[e]=cs[t]})});function w_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||cs.hasOwnProperty(t)&&cs[t]?(""+e).trim():e+"px"}function A_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=w_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var mS=Ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vd(t,e){if(e){if(mS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(G(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(G(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(G(61))}if(e.style!=null&&typeof e.style!="object")throw Error(G(62))}}function _d(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Td=null;function Wf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ed=null,$i=null,Gi=null;function Im(t){if(t=tl(t)){if(typeof Ed!="function")throw Error(G(280));var e=t.stateNode;e&&(e=Cu(e),Ed(t.stateNode,t.type,e))}}function R_(t){$i?Gi?Gi.push(t):Gi=[t]:$i=t}function x_(){if($i){var t=$i,e=Gi;if(Gi=$i=null,Im(t),e)for(t=0;t<e.length;t++)Im(e[t])}}function P_(t,e){return t(e)}function k_(){}var Ac=!1;function N_(t,e,n){if(Ac)return t(e,n);Ac=!0;try{return P_(t,e,n)}finally{Ac=!1,($i!==null||Gi!==null)&&(k_(),x_())}}function xs(t,e){var n=t.stateNode;if(n===null)return null;var r=Cu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(G(231,e,typeof n));return n}var Cd=!1;if(bn)try{var Ko={};Object.defineProperty(Ko,"passive",{get:function(){Cd=!0}}),window.addEventListener("test",Ko,Ko),window.removeEventListener("test",Ko,Ko)}catch{Cd=!1}function gS(t,e,n,r,i,o,s,u,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(h){this.onError(h)}}var ds=!1,Ra=null,xa=!1,Id=null,yS={onError:function(t){ds=!0,Ra=t}};function vS(t,e,n,r,i,o,s,u,c){ds=!1,Ra=null,gS.apply(yS,arguments)}function _S(t,e,n,r,i,o,s,u,c){if(vS.apply(this,arguments),ds){if(ds){var d=Ra;ds=!1,Ra=null}else throw Error(G(198));xa||(xa=!0,Id=d)}}function hi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function M_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Sm(t){if(hi(t)!==t)throw Error(G(188))}function TS(t){var e=t.alternate;if(!e){if(e=hi(t),e===null)throw Error(G(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Sm(i),t;if(o===r)return Sm(i),e;o=o.sibling}throw Error(G(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(G(189))}}if(n.alternate!==r)throw Error(G(190))}if(n.tag!==3)throw Error(G(188));return n.stateNode.current===n?t:e}function D_(t){return t=TS(t),t!==null?V_(t):null}function V_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=V_(t);if(e!==null)return e;t=t.sibling}return null}var L_=bt.unstable_scheduleCallback,wm=bt.unstable_cancelCallback,ES=bt.unstable_shouldYield,CS=bt.unstable_requestPaint,qe=bt.unstable_now,IS=bt.unstable_getCurrentPriorityLevel,Kf=bt.unstable_ImmediatePriority,U_=bt.unstable_UserBlockingPriority,Pa=bt.unstable_NormalPriority,SS=bt.unstable_LowPriority,F_=bt.unstable_IdlePriority,vu=null,mn=null;function wS(t){if(mn&&typeof mn.onCommitFiberRoot=="function")try{mn.onCommitFiberRoot(vu,t,void 0,(t.current.flags&128)===128)}catch{}}var an=Math.clz32?Math.clz32:xS,AS=Math.log,RS=Math.LN2;function xS(t){return t>>>=0,t===0?32:31-(AS(t)/RS|0)|0}var Ul=64,Fl=4194304;function is(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ka(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var u=s&~i;u!==0?r=is(u):(o&=s,o!==0&&(r=is(o)))}else s=n&~i,s!==0?r=is(s):o!==0&&(r=is(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-an(e),i=1<<n,r|=t[n],e&=~i;return r}function PS(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kS(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-an(o),u=1<<s,c=i[s];c===-1?(!(u&n)||u&r)&&(i[s]=PS(u,e)):c<=e&&(t.expiredLanes|=u),o&=~u}}function Sd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function b_(){var t=Ul;return Ul<<=1,!(Ul&4194240)&&(Ul=64),t}function Rc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function js(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-an(e),t[e]=n}function NS(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-an(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function Jf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-an(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ce=0;function O_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var B_,Qf,q_,$_,G_,wd=!1,bl=[],hr=null,pr=null,mr=null,Ps=new Map,ks=new Map,rr=[],MS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Am(t,e){switch(t){case"focusin":case"focusout":hr=null;break;case"dragenter":case"dragleave":pr=null;break;case"mouseover":case"mouseout":mr=null;break;case"pointerover":case"pointerout":Ps.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ks.delete(e.pointerId)}}function Jo(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=tl(e),e!==null&&Qf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function DS(t,e,n,r,i){switch(e){case"focusin":return hr=Jo(hr,t,e,n,r,i),!0;case"dragenter":return pr=Jo(pr,t,e,n,r,i),!0;case"mouseover":return mr=Jo(mr,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Ps.set(o,Jo(Ps.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,ks.set(o,Jo(ks.get(o)||null,t,e,n,r,i)),!0}return!1}function H_(t){var e=Jr(t.target);if(e!==null){var n=hi(e);if(n!==null){if(e=n.tag,e===13){if(e=M_(n),e!==null){t.blockedOn=e,G_(t.priority,function(){q_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ia(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ad(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Td=r,n.target.dispatchEvent(r),Td=null}else return e=tl(n),e!==null&&Qf(e),t.blockedOn=n,!1;e.shift()}return!0}function Rm(t,e,n){ia(t)&&n.delete(e)}function VS(){wd=!1,hr!==null&&ia(hr)&&(hr=null),pr!==null&&ia(pr)&&(pr=null),mr!==null&&ia(mr)&&(mr=null),Ps.forEach(Rm),ks.forEach(Rm)}function Qo(t,e){t.blockedOn===e&&(t.blockedOn=null,wd||(wd=!0,bt.unstable_scheduleCallback(bt.unstable_NormalPriority,VS)))}function Ns(t){function e(i){return Qo(i,t)}if(0<bl.length){Qo(bl[0],t);for(var n=1;n<bl.length;n++){var r=bl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(hr!==null&&Qo(hr,t),pr!==null&&Qo(pr,t),mr!==null&&Qo(mr,t),Ps.forEach(e),ks.forEach(e),n=0;n<rr.length;n++)r=rr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<rr.length&&(n=rr[0],n.blockedOn===null);)H_(n),n.blockedOn===null&&rr.shift()}var Hi=Kn.ReactCurrentBatchConfig,Na=!0;function LS(t,e,n,r){var i=Ce,o=Hi.transition;Hi.transition=null;try{Ce=1,Yf(t,e,n,r)}finally{Ce=i,Hi.transition=o}}function US(t,e,n,r){var i=Ce,o=Hi.transition;Hi.transition=null;try{Ce=4,Yf(t,e,n,r)}finally{Ce=i,Hi.transition=o}}function Yf(t,e,n,r){if(Na){var i=Ad(t,e,n,r);if(i===null)Fc(t,e,r,Ma,n),Am(t,r);else if(DS(i,t,e,n,r))r.stopPropagation();else if(Am(t,r),e&4&&-1<MS.indexOf(t)){for(;i!==null;){var o=tl(i);if(o!==null&&B_(o),o=Ad(t,e,n,r),o===null&&Fc(t,e,r,Ma,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else Fc(t,e,r,null,n)}}var Ma=null;function Ad(t,e,n,r){if(Ma=null,t=Wf(r),t=Jr(t),t!==null)if(e=hi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=M_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ma=t,null}function z_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(IS()){case Kf:return 1;case U_:return 4;case Pa:case SS:return 16;case F_:return 536870912;default:return 16}default:return 16}}var ur=null,Xf=null,oa=null;function W_(){if(oa)return oa;var t,e=Xf,n=e.length,r,i="value"in ur?ur.value:ur.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return oa=i.slice(t,1<r?1-r:void 0)}function sa(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ol(){return!0}function xm(){return!1}function Bt(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Ol:xm,this.isPropagationStopped=xm,this}return Ve(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ol)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ol)},persist:function(){},isPersistent:Ol}),e}var vo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zf=Bt(vo),el=Ve({},vo,{view:0,detail:0}),FS=Bt(el),xc,Pc,Yo,_u=Ve({},el,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Yo&&(Yo&&t.type==="mousemove"?(xc=t.screenX-Yo.screenX,Pc=t.screenY-Yo.screenY):Pc=xc=0,Yo=t),xc)},movementY:function(t){return"movementY"in t?t.movementY:Pc}}),Pm=Bt(_u),bS=Ve({},_u,{dataTransfer:0}),OS=Bt(bS),BS=Ve({},el,{relatedTarget:0}),kc=Bt(BS),qS=Ve({},vo,{animationName:0,elapsedTime:0,pseudoElement:0}),$S=Bt(qS),GS=Ve({},vo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),HS=Bt(GS),zS=Ve({},vo,{data:0}),km=Bt(zS),WS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},KS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},JS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function QS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=JS[t])?!!e[t]:!1}function jf(){return QS}var YS=Ve({},el,{key:function(t){if(t.key){var e=WS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=sa(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?KS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jf,charCode:function(t){return t.type==="keypress"?sa(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?sa(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),XS=Bt(YS),ZS=Ve({},_u,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nm=Bt(ZS),jS=Ve({},el,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jf}),ew=Bt(jS),tw=Ve({},vo,{propertyName:0,elapsedTime:0,pseudoElement:0}),nw=Bt(tw),rw=Ve({},_u,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),iw=Bt(rw),ow=[9,13,27,32],eh=bn&&"CompositionEvent"in window,fs=null;bn&&"documentMode"in document&&(fs=document.documentMode);var sw=bn&&"TextEvent"in window&&!fs,K_=bn&&(!eh||fs&&8<fs&&11>=fs),Mm=" ",Dm=!1;function J_(t,e){switch(t){case"keyup":return ow.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Q_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Pi=!1;function lw(t,e){switch(t){case"compositionend":return Q_(e);case"keypress":return e.which!==32?null:(Dm=!0,Mm);case"textInput":return t=e.data,t===Mm&&Dm?null:t;default:return null}}function aw(t,e){if(Pi)return t==="compositionend"||!eh&&J_(t,e)?(t=W_(),oa=Xf=ur=null,Pi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return K_&&e.locale!=="ko"?null:e.data;default:return null}}var uw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!uw[t.type]:e==="textarea"}function Y_(t,e,n,r){R_(r),e=Da(e,"onChange"),0<e.length&&(n=new Zf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var hs=null,Ms=null;function cw(t){lT(t,0)}function Tu(t){var e=Mi(t);if(T_(e))return t}function dw(t,e){if(t==="change")return e}var X_=!1;if(bn){var Nc;if(bn){var Mc="oninput"in document;if(!Mc){var Lm=document.createElement("div");Lm.setAttribute("oninput","return;"),Mc=typeof Lm.oninput=="function"}Nc=Mc}else Nc=!1;X_=Nc&&(!document.documentMode||9<document.documentMode)}function Um(){hs&&(hs.detachEvent("onpropertychange",Z_),Ms=hs=null)}function Z_(t){if(t.propertyName==="value"&&Tu(Ms)){var e=[];Y_(e,Ms,t,Wf(t)),N_(cw,e)}}function fw(t,e,n){t==="focusin"?(Um(),hs=e,Ms=n,hs.attachEvent("onpropertychange",Z_)):t==="focusout"&&Um()}function hw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Tu(Ms)}function pw(t,e){if(t==="click")return Tu(e)}function mw(t,e){if(t==="input"||t==="change")return Tu(e)}function gw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var cn=typeof Object.is=="function"?Object.is:gw;function Ds(t,e){if(cn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!ad.call(e,i)||!cn(t[i],e[i]))return!1}return!0}function Fm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function bm(t,e){var n=Fm(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Fm(n)}}function j_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?j_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function eT(){for(var t=window,e=Aa();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Aa(t.document)}return e}function th(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function yw(t){var e=eT(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&j_(n.ownerDocument.documentElement,n)){if(r!==null&&th(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=bm(n,o);var s=bm(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var vw=bn&&"documentMode"in document&&11>=document.documentMode,ki=null,Rd=null,ps=null,xd=!1;function Om(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;xd||ki==null||ki!==Aa(r)||(r=ki,"selectionStart"in r&&th(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ps&&Ds(ps,r)||(ps=r,r=Da(Rd,"onSelect"),0<r.length&&(e=new Zf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ki)))}function Bl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ni={animationend:Bl("Animation","AnimationEnd"),animationiteration:Bl("Animation","AnimationIteration"),animationstart:Bl("Animation","AnimationStart"),transitionend:Bl("Transition","TransitionEnd")},Dc={},tT={};bn&&(tT=document.createElement("div").style,"AnimationEvent"in window||(delete Ni.animationend.animation,delete Ni.animationiteration.animation,delete Ni.animationstart.animation),"TransitionEvent"in window||delete Ni.transitionend.transition);function Eu(t){if(Dc[t])return Dc[t];if(!Ni[t])return t;var e=Ni[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in tT)return Dc[t]=e[n];return t}var nT=Eu("animationend"),rT=Eu("animationiteration"),iT=Eu("animationstart"),oT=Eu("transitionend"),sT=new Map,Bm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mr(t,e){sT.set(t,e),fi(e,[t])}for(var Vc=0;Vc<Bm.length;Vc++){var Lc=Bm[Vc],_w=Lc.toLowerCase(),Tw=Lc[0].toUpperCase()+Lc.slice(1);Mr(_w,"on"+Tw)}Mr(nT,"onAnimationEnd");Mr(rT,"onAnimationIteration");Mr(iT,"onAnimationStart");Mr("dblclick","onDoubleClick");Mr("focusin","onFocus");Mr("focusout","onBlur");Mr(oT,"onTransitionEnd");eo("onMouseEnter",["mouseout","mouseover"]);eo("onMouseLeave",["mouseout","mouseover"]);eo("onPointerEnter",["pointerout","pointerover"]);eo("onPointerLeave",["pointerout","pointerover"]);fi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fi("onBeforeInput",["compositionend","keypress","textInput","paste"]);fi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var os="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ew=new Set("cancel close invalid load scroll toggle".split(" ").concat(os));function qm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,_S(r,e,void 0,t),t.currentTarget=null}function lT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var u=r[s],c=u.instance,d=u.currentTarget;if(u=u.listener,c!==o&&i.isPropagationStopped())break e;qm(i,u,d),o=c}else for(s=0;s<r.length;s++){if(u=r[s],c=u.instance,d=u.currentTarget,u=u.listener,c!==o&&i.isPropagationStopped())break e;qm(i,u,d),o=c}}}if(xa)throw t=Id,xa=!1,Id=null,t}function Re(t,e){var n=e[Dd];n===void 0&&(n=e[Dd]=new Set);var r=t+"__bubble";n.has(r)||(aT(e,t,2,!1),n.add(r))}function Uc(t,e,n){var r=0;e&&(r|=4),aT(n,t,r,e)}var ql="_reactListening"+Math.random().toString(36).slice(2);function Vs(t){if(!t[ql]){t[ql]=!0,m_.forEach(function(n){n!=="selectionchange"&&(Ew.has(n)||Uc(n,!1,t),Uc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ql]||(e[ql]=!0,Uc("selectionchange",!1,e))}}function aT(t,e,n,r){switch(z_(e)){case 1:var i=LS;break;case 4:i=US;break;default:i=Yf}n=i.bind(null,e,n,t),i=void 0,!Cd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Fc(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var u=r.stateNode.containerInfo;if(u===i||u.nodeType===8&&u.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var c=s.tag;if((c===3||c===4)&&(c=s.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;s=s.return}for(;u!==null;){if(s=Jr(u),s===null)return;if(c=s.tag,c===5||c===6){r=o=s;continue e}u=u.parentNode}}r=r.return}N_(function(){var d=o,h=Wf(n),p=[];e:{var g=sT.get(t);if(g!==void 0){var v=Zf,R=t;switch(t){case"keypress":if(sa(n)===0)break e;case"keydown":case"keyup":v=XS;break;case"focusin":R="focus",v=kc;break;case"focusout":R="blur",v=kc;break;case"beforeblur":case"afterblur":v=kc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Pm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=OS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=ew;break;case nT:case rT:case iT:v=$S;break;case oT:v=nw;break;case"scroll":v=FS;break;case"wheel":v=iw;break;case"copy":case"cut":case"paste":v=HS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Nm}var P=(e&4)!==0,D=!P&&t==="scroll",w=P?g!==null?g+"Capture":null:g;P=[];for(var _=d,S;_!==null;){S=_;var V=S.stateNode;if(S.tag===5&&V!==null&&(S=V,w!==null&&(V=xs(_,w),V!=null&&P.push(Ls(_,V,S)))),D)break;_=_.return}0<P.length&&(g=new v(g,R,null,n,h),p.push({event:g,listeners:P}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",g&&n!==Td&&(R=n.relatedTarget||n.fromElement)&&(Jr(R)||R[On]))break e;if((v||g)&&(g=h.window===h?h:(g=h.ownerDocument)?g.defaultView||g.parentWindow:window,v?(R=n.relatedTarget||n.toElement,v=d,R=R?Jr(R):null,R!==null&&(D=hi(R),R!==D||R.tag!==5&&R.tag!==6)&&(R=null)):(v=null,R=d),v!==R)){if(P=Pm,V="onMouseLeave",w="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(P=Nm,V="onPointerLeave",w="onPointerEnter",_="pointer"),D=v==null?g:Mi(v),S=R==null?g:Mi(R),g=new P(V,_+"leave",v,n,h),g.target=D,g.relatedTarget=S,V=null,Jr(h)===d&&(P=new P(w,_+"enter",R,n,h),P.target=S,P.relatedTarget=D,V=P),D=V,v&&R)t:{for(P=v,w=R,_=0,S=P;S;S=Ii(S))_++;for(S=0,V=w;V;V=Ii(V))S++;for(;0<_-S;)P=Ii(P),_--;for(;0<S-_;)w=Ii(w),S--;for(;_--;){if(P===w||w!==null&&P===w.alternate)break t;P=Ii(P),w=Ii(w)}P=null}else P=null;v!==null&&$m(p,g,v,P,!1),R!==null&&D!==null&&$m(p,D,R,P,!0)}}e:{if(g=d?Mi(d):window,v=g.nodeName&&g.nodeName.toLowerCase(),v==="select"||v==="input"&&g.type==="file")var F=dw;else if(Vm(g))if(X_)F=mw;else{F=hw;var b=fw}else(v=g.nodeName)&&v.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(F=pw);if(F&&(F=F(t,d))){Y_(p,F,n,h);break e}b&&b(t,g,d),t==="focusout"&&(b=g._wrapperState)&&b.controlled&&g.type==="number"&&md(g,"number",g.value)}switch(b=d?Mi(d):window,t){case"focusin":(Vm(b)||b.contentEditable==="true")&&(ki=b,Rd=d,ps=null);break;case"focusout":ps=Rd=ki=null;break;case"mousedown":xd=!0;break;case"contextmenu":case"mouseup":case"dragend":xd=!1,Om(p,n,h);break;case"selectionchange":if(vw)break;case"keydown":case"keyup":Om(p,n,h)}var A;if(eh)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Pi?J_(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(K_&&n.locale!=="ko"&&(Pi||E!=="onCompositionStart"?E==="onCompositionEnd"&&Pi&&(A=W_()):(ur=h,Xf="value"in ur?ur.value:ur.textContent,Pi=!0)),b=Da(d,E),0<b.length&&(E=new km(E,t,null,n,h),p.push({event:E,listeners:b}),A?E.data=A:(A=Q_(n),A!==null&&(E.data=A)))),(A=sw?lw(t,n):aw(t,n))&&(d=Da(d,"onBeforeInput"),0<d.length&&(h=new km("onBeforeInput","beforeinput",null,n,h),p.push({event:h,listeners:d}),h.data=A))}lT(p,e)})}function Ls(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Da(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=xs(t,n),o!=null&&r.unshift(Ls(t,o,i)),o=xs(t,e),o!=null&&r.push(Ls(t,o,i))),t=t.return}return r}function Ii(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function $m(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var u=n,c=u.alternate,d=u.stateNode;if(c!==null&&c===r)break;u.tag===5&&d!==null&&(u=d,i?(c=xs(n,o),c!=null&&s.unshift(Ls(n,c,u))):i||(c=xs(n,o),c!=null&&s.push(Ls(n,c,u)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var Cw=/\r\n?/g,Iw=/\u0000|\uFFFD/g;function Gm(t){return(typeof t=="string"?t:""+t).replace(Cw,`
`).replace(Iw,"")}function $l(t,e,n){if(e=Gm(e),Gm(t)!==e&&n)throw Error(G(425))}function Va(){}var Pd=null,kd=null;function Nd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Md=typeof setTimeout=="function"?setTimeout:void 0,Sw=typeof clearTimeout=="function"?clearTimeout:void 0,Hm=typeof Promise=="function"?Promise:void 0,ww=typeof queueMicrotask=="function"?queueMicrotask:typeof Hm<"u"?function(t){return Hm.resolve(null).then(t).catch(Aw)}:Md;function Aw(t){setTimeout(function(){throw t})}function bc(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ns(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ns(e)}function gr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function zm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var _o=Math.random().toString(36).slice(2),pn="__reactFiber$"+_o,Us="__reactProps$"+_o,On="__reactContainer$"+_o,Dd="__reactEvents$"+_o,Rw="__reactListeners$"+_o,xw="__reactHandles$"+_o;function Jr(t){var e=t[pn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[On]||n[pn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=zm(t);t!==null;){if(n=t[pn])return n;t=zm(t)}return e}t=n,n=t.parentNode}return null}function tl(t){return t=t[pn]||t[On],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Mi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(G(33))}function Cu(t){return t[Us]||null}var Vd=[],Di=-1;function Dr(t){return{current:t}}function Pe(t){0>Di||(t.current=Vd[Di],Vd[Di]=null,Di--)}function we(t,e){Di++,Vd[Di]=t.current,t.current=e}var Rr={},mt=Dr(Rr),At=Dr(!1),ti=Rr;function to(t,e){var n=t.type.contextTypes;if(!n)return Rr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Rt(t){return t=t.childContextTypes,t!=null}function La(){Pe(At),Pe(mt)}function Wm(t,e,n){if(mt.current!==Rr)throw Error(G(168));we(mt,e),we(At,n)}function uT(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(G(108,fS(t)||"Unknown",i));return Ve({},n,r)}function Ua(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Rr,ti=mt.current,we(mt,t),we(At,At.current),!0}function Km(t,e,n){var r=t.stateNode;if(!r)throw Error(G(169));n?(t=uT(t,e,ti),r.__reactInternalMemoizedMergedChildContext=t,Pe(At),Pe(mt),we(mt,t)):Pe(At),we(At,n)}var kn=null,Iu=!1,Oc=!1;function cT(t){kn===null?kn=[t]:kn.push(t)}function Pw(t){Iu=!0,cT(t)}function Vr(){if(!Oc&&kn!==null){Oc=!0;var t=0,e=Ce;try{var n=kn;for(Ce=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}kn=null,Iu=!1}catch(i){throw kn!==null&&(kn=kn.slice(t+1)),L_(Kf,Vr),i}finally{Ce=e,Oc=!1}}return null}var Vi=[],Li=0,Fa=null,ba=0,Gt=[],Ht=0,ni=null,Nn=1,Mn="";function Gr(t,e){Vi[Li++]=ba,Vi[Li++]=Fa,Fa=t,ba=e}function dT(t,e,n){Gt[Ht++]=Nn,Gt[Ht++]=Mn,Gt[Ht++]=ni,ni=t;var r=Nn;t=Mn;var i=32-an(r)-1;r&=~(1<<i),n+=1;var o=32-an(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Nn=1<<32-an(e)+i|n<<i|r,Mn=o+t}else Nn=1<<o|n<<i|r,Mn=t}function nh(t){t.return!==null&&(Gr(t,1),dT(t,1,0))}function rh(t){for(;t===Fa;)Fa=Vi[--Li],Vi[Li]=null,ba=Vi[--Li],Vi[Li]=null;for(;t===ni;)ni=Gt[--Ht],Gt[Ht]=null,Mn=Gt[--Ht],Gt[Ht]=null,Nn=Gt[--Ht],Gt[Ht]=null}var Ft=null,Lt=null,ke=!1,ln=null;function fT(t,e){var n=Wt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Jm(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ft=t,Lt=gr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ft=t,Lt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ni!==null?{id:Nn,overflow:Mn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Wt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ft=t,Lt=null,!0):!1;default:return!1}}function Ld(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ud(t){if(ke){var e=Lt;if(e){var n=e;if(!Jm(t,e)){if(Ld(t))throw Error(G(418));e=gr(n.nextSibling);var r=Ft;e&&Jm(t,e)?fT(r,n):(t.flags=t.flags&-4097|2,ke=!1,Ft=t)}}else{if(Ld(t))throw Error(G(418));t.flags=t.flags&-4097|2,ke=!1,Ft=t}}}function Qm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ft=t}function Gl(t){if(t!==Ft)return!1;if(!ke)return Qm(t),ke=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Nd(t.type,t.memoizedProps)),e&&(e=Lt)){if(Ld(t))throw hT(),Error(G(418));for(;e;)fT(t,e),e=gr(e.nextSibling)}if(Qm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(G(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Lt=gr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Lt=null}}else Lt=Ft?gr(t.stateNode.nextSibling):null;return!0}function hT(){for(var t=Lt;t;)t=gr(t.nextSibling)}function no(){Lt=Ft=null,ke=!1}function ih(t){ln===null?ln=[t]:ln.push(t)}var kw=Kn.ReactCurrentBatchConfig;function Xo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(G(309));var r=n.stateNode}if(!r)throw Error(G(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var u=i.refs;s===null?delete u[o]:u[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(G(284));if(!n._owner)throw Error(G(290,t))}return t}function Hl(t,e){throw t=Object.prototype.toString.call(e),Error(G(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ym(t){var e=t._init;return e(t._payload)}function pT(t){function e(w,_){if(t){var S=w.deletions;S===null?(w.deletions=[_],w.flags|=16):S.push(_)}}function n(w,_){if(!t)return null;for(;_!==null;)e(w,_),_=_.sibling;return null}function r(w,_){for(w=new Map;_!==null;)_.key!==null?w.set(_.key,_):w.set(_.index,_),_=_.sibling;return w}function i(w,_){return w=Tr(w,_),w.index=0,w.sibling=null,w}function o(w,_,S){return w.index=S,t?(S=w.alternate,S!==null?(S=S.index,S<_?(w.flags|=2,_):S):(w.flags|=2,_)):(w.flags|=1048576,_)}function s(w){return t&&w.alternate===null&&(w.flags|=2),w}function u(w,_,S,V){return _===null||_.tag!==6?(_=Wc(S,w.mode,V),_.return=w,_):(_=i(_,S),_.return=w,_)}function c(w,_,S,V){var F=S.type;return F===xi?h(w,_,S.props.children,V,S.key):_!==null&&(_.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===tr&&Ym(F)===_.type)?(V=i(_,S.props),V.ref=Xo(w,_,S),V.return=w,V):(V=ha(S.type,S.key,S.props,null,w.mode,V),V.ref=Xo(w,_,S),V.return=w,V)}function d(w,_,S,V){return _===null||_.tag!==4||_.stateNode.containerInfo!==S.containerInfo||_.stateNode.implementation!==S.implementation?(_=Kc(S,w.mode,V),_.return=w,_):(_=i(_,S.children||[]),_.return=w,_)}function h(w,_,S,V,F){return _===null||_.tag!==7?(_=jr(S,w.mode,V,F),_.return=w,_):(_=i(_,S),_.return=w,_)}function p(w,_,S){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Wc(""+_,w.mode,S),_.return=w,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Dl:return S=ha(_.type,_.key,_.props,null,w.mode,S),S.ref=Xo(w,null,_),S.return=w,S;case Ri:return _=Kc(_,w.mode,S),_.return=w,_;case tr:var V=_._init;return p(w,V(_._payload),S)}if(rs(_)||Wo(_))return _=jr(_,w.mode,S,null),_.return=w,_;Hl(w,_)}return null}function g(w,_,S,V){var F=_!==null?_.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return F!==null?null:u(w,_,""+S,V);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Dl:return S.key===F?c(w,_,S,V):null;case Ri:return S.key===F?d(w,_,S,V):null;case tr:return F=S._init,g(w,_,F(S._payload),V)}if(rs(S)||Wo(S))return F!==null?null:h(w,_,S,V,null);Hl(w,S)}return null}function v(w,_,S,V,F){if(typeof V=="string"&&V!==""||typeof V=="number")return w=w.get(S)||null,u(_,w,""+V,F);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Dl:return w=w.get(V.key===null?S:V.key)||null,c(_,w,V,F);case Ri:return w=w.get(V.key===null?S:V.key)||null,d(_,w,V,F);case tr:var b=V._init;return v(w,_,S,b(V._payload),F)}if(rs(V)||Wo(V))return w=w.get(S)||null,h(_,w,V,F,null);Hl(_,V)}return null}function R(w,_,S,V){for(var F=null,b=null,A=_,E=_=0,I=null;A!==null&&E<S.length;E++){A.index>E?(I=A,A=null):I=A.sibling;var x=g(w,A,S[E],V);if(x===null){A===null&&(A=I);break}t&&A&&x.alternate===null&&e(w,A),_=o(x,_,E),b===null?F=x:b.sibling=x,b=x,A=I}if(E===S.length)return n(w,A),ke&&Gr(w,E),F;if(A===null){for(;E<S.length;E++)A=p(w,S[E],V),A!==null&&(_=o(A,_,E),b===null?F=A:b.sibling=A,b=A);return ke&&Gr(w,E),F}for(A=r(w,A);E<S.length;E++)I=v(A,w,E,S[E],V),I!==null&&(t&&I.alternate!==null&&A.delete(I.key===null?E:I.key),_=o(I,_,E),b===null?F=I:b.sibling=I,b=I);return t&&A.forEach(function(N){return e(w,N)}),ke&&Gr(w,E),F}function P(w,_,S,V){var F=Wo(S);if(typeof F!="function")throw Error(G(150));if(S=F.call(S),S==null)throw Error(G(151));for(var b=F=null,A=_,E=_=0,I=null,x=S.next();A!==null&&!x.done;E++,x=S.next()){A.index>E?(I=A,A=null):I=A.sibling;var N=g(w,A,x.value,V);if(N===null){A===null&&(A=I);break}t&&A&&N.alternate===null&&e(w,A),_=o(N,_,E),b===null?F=N:b.sibling=N,b=N,A=I}if(x.done)return n(w,A),ke&&Gr(w,E),F;if(A===null){for(;!x.done;E++,x=S.next())x=p(w,x.value,V),x!==null&&(_=o(x,_,E),b===null?F=x:b.sibling=x,b=x);return ke&&Gr(w,E),F}for(A=r(w,A);!x.done;E++,x=S.next())x=v(A,w,E,x.value,V),x!==null&&(t&&x.alternate!==null&&A.delete(x.key===null?E:x.key),_=o(x,_,E),b===null?F=x:b.sibling=x,b=x);return t&&A.forEach(function(M){return e(w,M)}),ke&&Gr(w,E),F}function D(w,_,S,V){if(typeof S=="object"&&S!==null&&S.type===xi&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Dl:e:{for(var F=S.key,b=_;b!==null;){if(b.key===F){if(F=S.type,F===xi){if(b.tag===7){n(w,b.sibling),_=i(b,S.props.children),_.return=w,w=_;break e}}else if(b.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===tr&&Ym(F)===b.type){n(w,b.sibling),_=i(b,S.props),_.ref=Xo(w,b,S),_.return=w,w=_;break e}n(w,b);break}else e(w,b);b=b.sibling}S.type===xi?(_=jr(S.props.children,w.mode,V,S.key),_.return=w,w=_):(V=ha(S.type,S.key,S.props,null,w.mode,V),V.ref=Xo(w,_,S),V.return=w,w=V)}return s(w);case Ri:e:{for(b=S.key;_!==null;){if(_.key===b)if(_.tag===4&&_.stateNode.containerInfo===S.containerInfo&&_.stateNode.implementation===S.implementation){n(w,_.sibling),_=i(_,S.children||[]),_.return=w,w=_;break e}else{n(w,_);break}else e(w,_);_=_.sibling}_=Kc(S,w.mode,V),_.return=w,w=_}return s(w);case tr:return b=S._init,D(w,_,b(S._payload),V)}if(rs(S))return R(w,_,S,V);if(Wo(S))return P(w,_,S,V);Hl(w,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,_!==null&&_.tag===6?(n(w,_.sibling),_=i(_,S),_.return=w,w=_):(n(w,_),_=Wc(S,w.mode,V),_.return=w,w=_),s(w)):n(w,_)}return D}var ro=pT(!0),mT=pT(!1),Oa=Dr(null),Ba=null,Ui=null,oh=null;function sh(){oh=Ui=Ba=null}function lh(t){var e=Oa.current;Pe(Oa),t._currentValue=e}function Fd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function zi(t,e){Ba=t,oh=Ui=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(wt=!0),t.firstContext=null)}function Qt(t){var e=t._currentValue;if(oh!==t)if(t={context:t,memoizedValue:e,next:null},Ui===null){if(Ba===null)throw Error(G(308));Ui=t,Ba.dependencies={lanes:0,firstContext:t}}else Ui=Ui.next=t;return e}var Qr=null;function ah(t){Qr===null?Qr=[t]:Qr.push(t)}function gT(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,ah(e)):(n.next=i.next,i.next=n),e.interleaved=n,Bn(t,r)}function Bn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var nr=!1;function uh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Fn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function yr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ge&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Bn(t,n)}return i=r.interleaved,i===null?(e.next=e,ah(r)):(e.next=i.next,i.next=e),r.interleaved=e,Bn(t,n)}function la(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Jf(t,n)}}function Xm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function qa(t,e,n,r){var i=t.updateQueue;nr=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,u=i.shared.pending;if(u!==null){i.shared.pending=null;var c=u,d=c.next;c.next=null,s===null?o=d:s.next=d,s=c;var h=t.alternate;h!==null&&(h=h.updateQueue,u=h.lastBaseUpdate,u!==s&&(u===null?h.firstBaseUpdate=d:u.next=d,h.lastBaseUpdate=c))}if(o!==null){var p=i.baseState;s=0,h=d=c=null,u=o;do{var g=u.lane,v=u.eventTime;if((r&g)===g){h!==null&&(h=h.next={eventTime:v,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var R=t,P=u;switch(g=e,v=n,P.tag){case 1:if(R=P.payload,typeof R=="function"){p=R.call(v,p,g);break e}p=R;break e;case 3:R.flags=R.flags&-65537|128;case 0:if(R=P.payload,g=typeof R=="function"?R.call(v,p,g):R,g==null)break e;p=Ve({},p,g);break e;case 2:nr=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,g=i.effects,g===null?i.effects=[u]:g.push(u))}else v={eventTime:v,lane:g,tag:u.tag,payload:u.payload,callback:u.callback,next:null},h===null?(d=h=v,c=p):h=h.next=v,s|=g;if(u=u.next,u===null){if(u=i.shared.pending,u===null)break;g=u,u=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);if(h===null&&(c=p),i.baseState=c,i.firstBaseUpdate=d,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);ii|=s,t.lanes=s,t.memoizedState=p}}function Zm(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(G(191,i));i.call(r)}}}var nl={},gn=Dr(nl),Fs=Dr(nl),bs=Dr(nl);function Yr(t){if(t===nl)throw Error(G(174));return t}function ch(t,e){switch(we(bs,e),we(Fs,t),we(gn,nl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:yd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=yd(e,t)}Pe(gn),we(gn,e)}function io(){Pe(gn),Pe(Fs),Pe(bs)}function vT(t){Yr(bs.current);var e=Yr(gn.current),n=yd(e,t.type);e!==n&&(we(Fs,t),we(gn,n))}function dh(t){Fs.current===t&&(Pe(gn),Pe(Fs))}var Me=Dr(0);function $a(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Bc=[];function fh(){for(var t=0;t<Bc.length;t++)Bc[t]._workInProgressVersionPrimary=null;Bc.length=0}var aa=Kn.ReactCurrentDispatcher,qc=Kn.ReactCurrentBatchConfig,ri=0,De=null,ze=null,Ye=null,Ga=!1,ms=!1,Os=0,Nw=0;function at(){throw Error(G(321))}function hh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!cn(t[n],e[n]))return!1;return!0}function ph(t,e,n,r,i,o){if(ri=o,De=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,aa.current=t===null||t.memoizedState===null?Lw:Uw,t=n(r,i),ms){o=0;do{if(ms=!1,Os=0,25<=o)throw Error(G(301));o+=1,Ye=ze=null,e.updateQueue=null,aa.current=Fw,t=n(r,i)}while(ms)}if(aa.current=Ha,e=ze!==null&&ze.next!==null,ri=0,Ye=ze=De=null,Ga=!1,e)throw Error(G(300));return t}function mh(){var t=Os!==0;return Os=0,t}function hn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ye===null?De.memoizedState=Ye=t:Ye=Ye.next=t,Ye}function Yt(){if(ze===null){var t=De.alternate;t=t!==null?t.memoizedState:null}else t=ze.next;var e=Ye===null?De.memoizedState:Ye.next;if(e!==null)Ye=e,ze=t;else{if(t===null)throw Error(G(310));ze=t,t={memoizedState:ze.memoizedState,baseState:ze.baseState,baseQueue:ze.baseQueue,queue:ze.queue,next:null},Ye===null?De.memoizedState=Ye=t:Ye=Ye.next=t}return Ye}function Bs(t,e){return typeof e=="function"?e(t):e}function $c(t){var e=Yt(),n=e.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var r=ze,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var u=s=null,c=null,d=o;do{var h=d.lane;if((ri&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(u=c=p,s=r):c=c.next=p,De.lanes|=h,ii|=h}d=d.next}while(d!==null&&d!==o);c===null?s=r:c.next=u,cn(r,e.memoizedState)||(wt=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,De.lanes|=o,ii|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Gc(t){var e=Yt(),n=e.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);cn(o,e.memoizedState)||(wt=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function _T(){}function TT(t,e){var n=De,r=Yt(),i=e(),o=!cn(r.memoizedState,i);if(o&&(r.memoizedState=i,wt=!0),r=r.queue,gh(IT.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||Ye!==null&&Ye.memoizedState.tag&1){if(n.flags|=2048,qs(9,CT.bind(null,n,r,i,e),void 0,null),Xe===null)throw Error(G(349));ri&30||ET(n,e,i)}return i}function ET(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function CT(t,e,n,r){e.value=n,e.getSnapshot=r,ST(e)&&wT(t)}function IT(t,e,n){return n(function(){ST(e)&&wT(t)})}function ST(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!cn(t,n)}catch{return!0}}function wT(t){var e=Bn(t,1);e!==null&&un(e,t,1,-1)}function jm(t){var e=hn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bs,lastRenderedState:t},e.queue=t,t=t.dispatch=Vw.bind(null,De,t),[e.memoizedState,t]}function qs(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function AT(){return Yt().memoizedState}function ua(t,e,n,r){var i=hn();De.flags|=t,i.memoizedState=qs(1|e,n,void 0,r===void 0?null:r)}function Su(t,e,n,r){var i=Yt();r=r===void 0?null:r;var o=void 0;if(ze!==null){var s=ze.memoizedState;if(o=s.destroy,r!==null&&hh(r,s.deps)){i.memoizedState=qs(e,n,o,r);return}}De.flags|=t,i.memoizedState=qs(1|e,n,o,r)}function eg(t,e){return ua(8390656,8,t,e)}function gh(t,e){return Su(2048,8,t,e)}function RT(t,e){return Su(4,2,t,e)}function xT(t,e){return Su(4,4,t,e)}function PT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function kT(t,e,n){return n=n!=null?n.concat([t]):null,Su(4,4,PT.bind(null,e,t),n)}function yh(){}function NT(t,e){var n=Yt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&hh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function MT(t,e){var n=Yt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&hh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function DT(t,e,n){return ri&21?(cn(n,e)||(n=b_(),De.lanes|=n,ii|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,wt=!0),t.memoizedState=n)}function Mw(t,e){var n=Ce;Ce=n!==0&&4>n?n:4,t(!0);var r=qc.transition;qc.transition={};try{t(!1),e()}finally{Ce=n,qc.transition=r}}function VT(){return Yt().memoizedState}function Dw(t,e,n){var r=_r(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},LT(t))UT(e,n);else if(n=gT(t,e,n,r),n!==null){var i=_t();un(n,t,r,i),FT(n,e,r)}}function Vw(t,e,n){var r=_r(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(LT(t))UT(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,u=o(s,n);if(i.hasEagerState=!0,i.eagerState=u,cn(u,s)){var c=e.interleaved;c===null?(i.next=i,ah(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=gT(t,e,i,r),n!==null&&(i=_t(),un(n,t,r,i),FT(n,e,r))}}function LT(t){var e=t.alternate;return t===De||e!==null&&e===De}function UT(t,e){ms=Ga=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function FT(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Jf(t,n)}}var Ha={readContext:Qt,useCallback:at,useContext:at,useEffect:at,useImperativeHandle:at,useInsertionEffect:at,useLayoutEffect:at,useMemo:at,useReducer:at,useRef:at,useState:at,useDebugValue:at,useDeferredValue:at,useTransition:at,useMutableSource:at,useSyncExternalStore:at,useId:at,unstable_isNewReconciler:!1},Lw={readContext:Qt,useCallback:function(t,e){return hn().memoizedState=[t,e===void 0?null:e],t},useContext:Qt,useEffect:eg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ua(4194308,4,PT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ua(4194308,4,t,e)},useInsertionEffect:function(t,e){return ua(4,2,t,e)},useMemo:function(t,e){var n=hn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=hn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Dw.bind(null,De,t),[r.memoizedState,t]},useRef:function(t){var e=hn();return t={current:t},e.memoizedState=t},useState:jm,useDebugValue:yh,useDeferredValue:function(t){return hn().memoizedState=t},useTransition:function(){var t=jm(!1),e=t[0];return t=Mw.bind(null,t[1]),hn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=De,i=hn();if(ke){if(n===void 0)throw Error(G(407));n=n()}else{if(n=e(),Xe===null)throw Error(G(349));ri&30||ET(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,eg(IT.bind(null,r,o,t),[t]),r.flags|=2048,qs(9,CT.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=hn(),e=Xe.identifierPrefix;if(ke){var n=Mn,r=Nn;n=(r&~(1<<32-an(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Os++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Nw++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Uw={readContext:Qt,useCallback:NT,useContext:Qt,useEffect:gh,useImperativeHandle:kT,useInsertionEffect:RT,useLayoutEffect:xT,useMemo:MT,useReducer:$c,useRef:AT,useState:function(){return $c(Bs)},useDebugValue:yh,useDeferredValue:function(t){var e=Yt();return DT(e,ze.memoizedState,t)},useTransition:function(){var t=$c(Bs)[0],e=Yt().memoizedState;return[t,e]},useMutableSource:_T,useSyncExternalStore:TT,useId:VT,unstable_isNewReconciler:!1},Fw={readContext:Qt,useCallback:NT,useContext:Qt,useEffect:gh,useImperativeHandle:kT,useInsertionEffect:RT,useLayoutEffect:xT,useMemo:MT,useReducer:Gc,useRef:AT,useState:function(){return Gc(Bs)},useDebugValue:yh,useDeferredValue:function(t){var e=Yt();return ze===null?e.memoizedState=t:DT(e,ze.memoizedState,t)},useTransition:function(){var t=Gc(Bs)[0],e=Yt().memoizedState;return[t,e]},useMutableSource:_T,useSyncExternalStore:TT,useId:VT,unstable_isNewReconciler:!1};function on(t,e){if(t&&t.defaultProps){e=Ve({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function bd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ve({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var wu={isMounted:function(t){return(t=t._reactInternals)?hi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=_t(),i=_r(t),o=Fn(r,i);o.payload=e,n!=null&&(o.callback=n),e=yr(t,o,i),e!==null&&(un(e,t,i,r),la(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=_t(),i=_r(t),o=Fn(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=yr(t,o,i),e!==null&&(un(e,t,i,r),la(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=_t(),r=_r(t),i=Fn(n,r);i.tag=2,e!=null&&(i.callback=e),e=yr(t,i,r),e!==null&&(un(e,t,r,n),la(e,t,r))}};function tg(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!Ds(n,r)||!Ds(i,o):!0}function bT(t,e,n){var r=!1,i=Rr,o=e.contextType;return typeof o=="object"&&o!==null?o=Qt(o):(i=Rt(e)?ti:mt.current,r=e.contextTypes,o=(r=r!=null)?to(t,i):Rr),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=wu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function ng(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&wu.enqueueReplaceState(e,e.state,null)}function Od(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},uh(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Qt(o):(o=Rt(e)?ti:mt.current,i.context=to(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(bd(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&wu.enqueueReplaceState(i,i.state,null),qa(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function oo(t,e){try{var n="",r=e;do n+=dS(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function Hc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Bd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var bw=typeof WeakMap=="function"?WeakMap:Map;function OT(t,e,n){n=Fn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Wa||(Wa=!0,Yd=r),Bd(t,e)},n}function BT(t,e,n){n=Fn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Bd(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Bd(t,e),typeof r!="function"&&(vr===null?vr=new Set([this]):vr.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function rg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new bw;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Zw.bind(null,t,e,n),e.then(t,t))}function ig(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function og(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Fn(-1,1),e.tag=2,yr(n,e,1))),n.lanes|=1),t)}var Ow=Kn.ReactCurrentOwner,wt=!1;function vt(t,e,n,r){e.child=t===null?mT(e,null,n,r):ro(e,t.child,n,r)}function sg(t,e,n,r,i){n=n.render;var o=e.ref;return zi(e,i),r=ph(t,e,n,r,o,i),n=mh(),t!==null&&!wt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,qn(t,e,i)):(ke&&n&&nh(e),e.flags|=1,vt(t,e,r,i),e.child)}function lg(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!wh(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,qT(t,e,o,r,i)):(t=ha(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:Ds,n(s,r)&&t.ref===e.ref)return qn(t,e,i)}return e.flags|=1,t=Tr(o,r),t.ref=e.ref,t.return=e,e.child=t}function qT(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(Ds(o,r)&&t.ref===e.ref)if(wt=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(wt=!0);else return e.lanes=t.lanes,qn(t,e,i)}return qd(t,e,n,r,i)}function $T(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},we(bi,Vt),Vt|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,we(bi,Vt),Vt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,we(bi,Vt),Vt|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,we(bi,Vt),Vt|=r;return vt(t,e,i,n),e.child}function GT(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function qd(t,e,n,r,i){var o=Rt(n)?ti:mt.current;return o=to(e,o),zi(e,i),n=ph(t,e,n,r,o,i),r=mh(),t!==null&&!wt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,qn(t,e,i)):(ke&&r&&nh(e),e.flags|=1,vt(t,e,n,i),e.child)}function ag(t,e,n,r,i){if(Rt(n)){var o=!0;Ua(e)}else o=!1;if(zi(e,i),e.stateNode===null)ca(t,e),bT(e,n,r),Od(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,u=e.memoizedProps;s.props=u;var c=s.context,d=n.contextType;typeof d=="object"&&d!==null?d=Qt(d):(d=Rt(n)?ti:mt.current,d=to(e,d));var h=n.getDerivedStateFromProps,p=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function";p||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(u!==r||c!==d)&&ng(e,s,r,d),nr=!1;var g=e.memoizedState;s.state=g,qa(e,r,s,i),c=e.memoizedState,u!==r||g!==c||At.current||nr?(typeof h=="function"&&(bd(e,n,h,r),c=e.memoizedState),(u=nr||tg(e,n,u,r,g,c,d))?(p||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),s.props=r,s.state=c,s.context=d,r=u):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,yT(t,e),u=e.memoizedProps,d=e.type===e.elementType?u:on(e.type,u),s.props=d,p=e.pendingProps,g=s.context,c=n.contextType,typeof c=="object"&&c!==null?c=Qt(c):(c=Rt(n)?ti:mt.current,c=to(e,c));var v=n.getDerivedStateFromProps;(h=typeof v=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(u!==p||g!==c)&&ng(e,s,r,c),nr=!1,g=e.memoizedState,s.state=g,qa(e,r,s,i);var R=e.memoizedState;u!==p||g!==R||At.current||nr?(typeof v=="function"&&(bd(e,n,v,r),R=e.memoizedState),(d=nr||tg(e,n,d,r,g,R,c)||!1)?(h||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,R,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,R,c)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||u===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=R),s.props=r,s.state=R,s.context=c,r=d):(typeof s.componentDidUpdate!="function"||u===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return $d(t,e,n,r,o,i)}function $d(t,e,n,r,i,o){GT(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&Km(e,n,!1),qn(t,e,o);r=e.stateNode,Ow.current=e;var u=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=ro(e,t.child,null,o),e.child=ro(e,null,u,o)):vt(t,e,u,o),e.memoizedState=r.state,i&&Km(e,n,!0),e.child}function HT(t){var e=t.stateNode;e.pendingContext?Wm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Wm(t,e.context,!1),ch(t,e.containerInfo)}function ug(t,e,n,r,i){return no(),ih(i),e.flags|=256,vt(t,e,n,r),e.child}var Gd={dehydrated:null,treeContext:null,retryLane:0};function Hd(t){return{baseLanes:t,cachePool:null,transitions:null}}function zT(t,e,n){var r=e.pendingProps,i=Me.current,o=!1,s=(e.flags&128)!==0,u;if((u=s)||(u=t!==null&&t.memoizedState===null?!1:(i&2)!==0),u?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),we(Me,i&1),t===null)return Ud(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=xu(s,r,0,null),t=jr(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Hd(n),e.memoizedState=Gd,t):vh(e,s));if(i=t.memoizedState,i!==null&&(u=i.dehydrated,u!==null))return Bw(t,e,s,r,u,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,u=i.sibling;var c={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Tr(i,c),r.subtreeFlags=i.subtreeFlags&14680064),u!==null?o=Tr(u,o):(o=jr(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?Hd(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=Gd,r}return o=t.child,t=o.sibling,r=Tr(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function vh(t,e){return e=xu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function zl(t,e,n,r){return r!==null&&ih(r),ro(e,t.child,null,n),t=vh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Bw(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=Hc(Error(G(422))),zl(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=xu({mode:"visible",children:r.children},i,0,null),o=jr(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&ro(e,t.child,null,s),e.child.memoizedState=Hd(s),e.memoizedState=Gd,o);if(!(e.mode&1))return zl(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var u=r.dgst;return r=u,o=Error(G(419)),r=Hc(o,r,void 0),zl(t,e,s,r)}if(u=(s&t.childLanes)!==0,wt||u){if(r=Xe,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Bn(t,i),un(r,t,i,-1))}return Sh(),r=Hc(Error(G(421))),zl(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=jw.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,Lt=gr(i.nextSibling),Ft=e,ke=!0,ln=null,t!==null&&(Gt[Ht++]=Nn,Gt[Ht++]=Mn,Gt[Ht++]=ni,Nn=t.id,Mn=t.overflow,ni=e),e=vh(e,r.children),e.flags|=4096,e)}function cg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Fd(t.return,e,n)}function zc(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function WT(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(vt(t,e,r.children,n),r=Me.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&cg(t,n,e);else if(t.tag===19)cg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(we(Me,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&$a(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),zc(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&$a(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}zc(e,!0,n,null,o);break;case"together":zc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ca(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function qn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ii|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(G(153));if(e.child!==null){for(t=e.child,n=Tr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Tr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function qw(t,e,n){switch(e.tag){case 3:HT(e),no();break;case 5:vT(e);break;case 1:Rt(e.type)&&Ua(e);break;case 4:ch(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;we(Oa,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(we(Me,Me.current&1),e.flags|=128,null):n&e.child.childLanes?zT(t,e,n):(we(Me,Me.current&1),t=qn(t,e,n),t!==null?t.sibling:null);we(Me,Me.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return WT(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),we(Me,Me.current),r)break;return null;case 22:case 23:return e.lanes=0,$T(t,e,n)}return qn(t,e,n)}var KT,zd,JT,QT;KT=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};zd=function(){};JT=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Yr(gn.current);var o=null;switch(n){case"input":i=hd(t,i),r=hd(t,r),o=[];break;case"select":i=Ve({},i,{value:void 0}),r=Ve({},r,{value:void 0}),o=[];break;case"textarea":i=gd(t,i),r=gd(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Va)}vd(n,r);var s;n=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var u=i[d];for(s in u)u.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(As.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in r){var c=r[d];if(u=i!=null?i[d]:void 0,r.hasOwnProperty(d)&&c!==u&&(c!=null||u!=null))if(d==="style")if(u){for(s in u)!u.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&u[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(o=o||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(As.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Re("scroll",t),o||u===c||(o=[])):(o=o||[]).push(d,c))}n&&(o=o||[]).push("style",n);var d=o;(e.updateQueue=d)&&(e.flags|=4)}};QT=function(t,e,n,r){n!==r&&(e.flags|=4)};function Zo(t,e){if(!ke)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ut(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function $w(t,e,n){var r=e.pendingProps;switch(rh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(e),null;case 1:return Rt(e.type)&&La(),ut(e),null;case 3:return r=e.stateNode,io(),Pe(At),Pe(mt),fh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Gl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ln!==null&&(jd(ln),ln=null))),zd(t,e),ut(e),null;case 5:dh(e);var i=Yr(bs.current);if(n=e.type,t!==null&&e.stateNode!=null)JT(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(G(166));return ut(e),null}if(t=Yr(gn.current),Gl(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[pn]=e,r[Us]=o,t=(e.mode&1)!==0,n){case"dialog":Re("cancel",r),Re("close",r);break;case"iframe":case"object":case"embed":Re("load",r);break;case"video":case"audio":for(i=0;i<os.length;i++)Re(os[i],r);break;case"source":Re("error",r);break;case"img":case"image":case"link":Re("error",r),Re("load",r);break;case"details":Re("toggle",r);break;case"input":_m(r,o),Re("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Re("invalid",r);break;case"textarea":Em(r,o),Re("invalid",r)}vd(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var u=o[s];s==="children"?typeof u=="string"?r.textContent!==u&&(o.suppressHydrationWarning!==!0&&$l(r.textContent,u,t),i=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&$l(r.textContent,u,t),i=["children",""+u]):As.hasOwnProperty(s)&&u!=null&&s==="onScroll"&&Re("scroll",r)}switch(n){case"input":Vl(r),Tm(r,o,!0);break;case"textarea":Vl(r),Cm(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Va)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=I_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[pn]=e,t[Us]=r,KT(t,e,!1,!1),e.stateNode=t;e:{switch(s=_d(n,r),n){case"dialog":Re("cancel",t),Re("close",t),i=r;break;case"iframe":case"object":case"embed":Re("load",t),i=r;break;case"video":case"audio":for(i=0;i<os.length;i++)Re(os[i],t);i=r;break;case"source":Re("error",t),i=r;break;case"img":case"image":case"link":Re("error",t),Re("load",t),i=r;break;case"details":Re("toggle",t),i=r;break;case"input":_m(t,r),i=hd(t,r),Re("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ve({},r,{value:void 0}),Re("invalid",t);break;case"textarea":Em(t,r),i=gd(t,r),Re("invalid",t);break;default:i=r}vd(n,i),u=i;for(o in u)if(u.hasOwnProperty(o)){var c=u[o];o==="style"?A_(t,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&S_(t,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Rs(t,c):typeof c=="number"&&Rs(t,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(As.hasOwnProperty(o)?c!=null&&o==="onScroll"&&Re("scroll",t):c!=null&&$f(t,o,c,s))}switch(n){case"input":Vl(t),Tm(t,r,!1);break;case"textarea":Vl(t),Cm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ar(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?qi(t,!!r.multiple,o,!1):r.defaultValue!=null&&qi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Va)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ut(e),null;case 6:if(t&&e.stateNode!=null)QT(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(G(166));if(n=Yr(bs.current),Yr(gn.current),Gl(e)){if(r=e.stateNode,n=e.memoizedProps,r[pn]=e,(o=r.nodeValue!==n)&&(t=Ft,t!==null))switch(t.tag){case 3:$l(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&$l(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[pn]=e,e.stateNode=r}return ut(e),null;case 13:if(Pe(Me),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ke&&Lt!==null&&e.mode&1&&!(e.flags&128))hT(),no(),e.flags|=98560,o=!1;else if(o=Gl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(G(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(G(317));o[pn]=e}else no(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ut(e),o=!1}else ln!==null&&(jd(ln),ln=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Me.current&1?Ke===0&&(Ke=3):Sh())),e.updateQueue!==null&&(e.flags|=4),ut(e),null);case 4:return io(),zd(t,e),t===null&&Vs(e.stateNode.containerInfo),ut(e),null;case 10:return lh(e.type._context),ut(e),null;case 17:return Rt(e.type)&&La(),ut(e),null;case 19:if(Pe(Me),o=e.memoizedState,o===null)return ut(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)Zo(o,!1);else{if(Ke!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=$a(t),s!==null){for(e.flags|=128,Zo(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return we(Me,Me.current&1|2),e.child}t=t.sibling}o.tail!==null&&qe()>so&&(e.flags|=128,r=!0,Zo(o,!1),e.lanes=4194304)}else{if(!r)if(t=$a(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Zo(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!ke)return ut(e),null}else 2*qe()-o.renderingStartTime>so&&n!==1073741824&&(e.flags|=128,r=!0,Zo(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=qe(),e.sibling=null,n=Me.current,we(Me,r?n&1|2:n&1),e):(ut(e),null);case 22:case 23:return Ih(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Vt&1073741824&&(ut(e),e.subtreeFlags&6&&(e.flags|=8192)):ut(e),null;case 24:return null;case 25:return null}throw Error(G(156,e.tag))}function Gw(t,e){switch(rh(e),e.tag){case 1:return Rt(e.type)&&La(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return io(),Pe(At),Pe(mt),fh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return dh(e),null;case 13:if(Pe(Me),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(G(340));no()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Pe(Me),null;case 4:return io(),null;case 10:return lh(e.type._context),null;case 22:case 23:return Ih(),null;case 24:return null;default:return null}}var Wl=!1,ft=!1,Hw=typeof WeakSet=="function"?WeakSet:Set,Q=null;function Fi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Fe(t,e,r)}else n.current=null}function Wd(t,e,n){try{n()}catch(r){Fe(t,e,r)}}var dg=!1;function zw(t,e){if(Pd=Na,t=eT(),th(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,u=-1,c=-1,d=0,h=0,p=t,g=null;t:for(;;){for(var v;p!==n||i!==0&&p.nodeType!==3||(u=s+i),p!==o||r!==0&&p.nodeType!==3||(c=s+r),p.nodeType===3&&(s+=p.nodeValue.length),(v=p.firstChild)!==null;)g=p,p=v;for(;;){if(p===t)break t;if(g===n&&++d===i&&(u=s),g===o&&++h===r&&(c=s),(v=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=v}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(kd={focusedElem:t,selectionRange:n},Na=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var R=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(R!==null){var P=R.memoizedProps,D=R.memoizedState,w=e.stateNode,_=w.getSnapshotBeforeUpdate(e.elementType===e.type?P:on(e.type,P),D);w.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(G(163))}}catch(V){Fe(e,e.return,V)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return R=dg,dg=!1,R}function gs(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&Wd(e,n,o)}i=i.next}while(i!==r)}}function Au(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Kd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function YT(t){var e=t.alternate;e!==null&&(t.alternate=null,YT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[pn],delete e[Us],delete e[Dd],delete e[Rw],delete e[xw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function XT(t){return t.tag===5||t.tag===3||t.tag===4}function fg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||XT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Jd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Va));else if(r!==4&&(t=t.child,t!==null))for(Jd(t,e,n),t=t.sibling;t!==null;)Jd(t,e,n),t=t.sibling}function Qd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Qd(t,e,n),t=t.sibling;t!==null;)Qd(t,e,n),t=t.sibling}var je=null,sn=!1;function jn(t,e,n){for(n=n.child;n!==null;)ZT(t,e,n),n=n.sibling}function ZT(t,e,n){if(mn&&typeof mn.onCommitFiberUnmount=="function")try{mn.onCommitFiberUnmount(vu,n)}catch{}switch(n.tag){case 5:ft||Fi(n,e);case 6:var r=je,i=sn;je=null,jn(t,e,n),je=r,sn=i,je!==null&&(sn?(t=je,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):je.removeChild(n.stateNode));break;case 18:je!==null&&(sn?(t=je,n=n.stateNode,t.nodeType===8?bc(t.parentNode,n):t.nodeType===1&&bc(t,n),Ns(t)):bc(je,n.stateNode));break;case 4:r=je,i=sn,je=n.stateNode.containerInfo,sn=!0,jn(t,e,n),je=r,sn=i;break;case 0:case 11:case 14:case 15:if(!ft&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&Wd(n,e,s),i=i.next}while(i!==r)}jn(t,e,n);break;case 1:if(!ft&&(Fi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Fe(n,e,u)}jn(t,e,n);break;case 21:jn(t,e,n);break;case 22:n.mode&1?(ft=(r=ft)||n.memoizedState!==null,jn(t,e,n),ft=r):jn(t,e,n);break;default:jn(t,e,n)}}function hg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Hw),e.forEach(function(r){var i=eA.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function rn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,u=s;e:for(;u!==null;){switch(u.tag){case 5:je=u.stateNode,sn=!1;break e;case 3:je=u.stateNode.containerInfo,sn=!0;break e;case 4:je=u.stateNode.containerInfo,sn=!0;break e}u=u.return}if(je===null)throw Error(G(160));ZT(o,s,i),je=null,sn=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(d){Fe(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)jT(e,t),e=e.sibling}function jT(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(rn(e,t),fn(t),r&4){try{gs(3,t,t.return),Au(3,t)}catch(P){Fe(t,t.return,P)}try{gs(5,t,t.return)}catch(P){Fe(t,t.return,P)}}break;case 1:rn(e,t),fn(t),r&512&&n!==null&&Fi(n,n.return);break;case 5:if(rn(e,t),fn(t),r&512&&n!==null&&Fi(n,n.return),t.flags&32){var i=t.stateNode;try{Rs(i,"")}catch(P){Fe(t,t.return,P)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,u=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&E_(i,o),_d(u,s);var d=_d(u,o);for(s=0;s<c.length;s+=2){var h=c[s],p=c[s+1];h==="style"?A_(i,p):h==="dangerouslySetInnerHTML"?S_(i,p):h==="children"?Rs(i,p):$f(i,h,p,d)}switch(u){case"input":pd(i,o);break;case"textarea":C_(i,o);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var v=o.value;v!=null?qi(i,!!o.multiple,v,!1):g!==!!o.multiple&&(o.defaultValue!=null?qi(i,!!o.multiple,o.defaultValue,!0):qi(i,!!o.multiple,o.multiple?[]:"",!1))}i[Us]=o}catch(P){Fe(t,t.return,P)}}break;case 6:if(rn(e,t),fn(t),r&4){if(t.stateNode===null)throw Error(G(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(P){Fe(t,t.return,P)}}break;case 3:if(rn(e,t),fn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ns(e.containerInfo)}catch(P){Fe(t,t.return,P)}break;case 4:rn(e,t),fn(t);break;case 13:rn(e,t),fn(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Eh=qe())),r&4&&hg(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(ft=(d=ft)||h,rn(e,t),ft=d):rn(e,t),fn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(Q=t,h=t.child;h!==null;){for(p=Q=h;Q!==null;){switch(g=Q,v=g.child,g.tag){case 0:case 11:case 14:case 15:gs(4,g,g.return);break;case 1:Fi(g,g.return);var R=g.stateNode;if(typeof R.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,R.props=e.memoizedProps,R.state=e.memoizedState,R.componentWillUnmount()}catch(P){Fe(r,n,P)}}break;case 5:Fi(g,g.return);break;case 22:if(g.memoizedState!==null){mg(p);continue}}v!==null?(v.return=g,Q=v):mg(p)}h=h.sibling}e:for(h=null,p=t;;){if(p.tag===5){if(h===null){h=p;try{i=p.stateNode,d?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=p.stateNode,c=p.memoizedProps.style,s=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=w_("display",s))}catch(P){Fe(t,t.return,P)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(P){Fe(t,t.return,P)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:rn(e,t),fn(t),r&4&&hg(t);break;case 21:break;default:rn(e,t),fn(t)}}function fn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(XT(n)){var r=n;break e}n=n.return}throw Error(G(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Rs(i,""),r.flags&=-33);var o=fg(t);Qd(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,u=fg(t);Jd(t,u,s);break;default:throw Error(G(161))}}catch(c){Fe(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Ww(t,e,n){Q=t,eE(t)}function eE(t,e,n){for(var r=(t.mode&1)!==0;Q!==null;){var i=Q,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||Wl;if(!s){var u=i.alternate,c=u!==null&&u.memoizedState!==null||ft;u=Wl;var d=ft;if(Wl=s,(ft=c)&&!d)for(Q=i;Q!==null;)s=Q,c=s.child,s.tag===22&&s.memoizedState!==null?gg(i):c!==null?(c.return=s,Q=c):gg(i);for(;o!==null;)Q=o,eE(o),o=o.sibling;Q=i,Wl=u,ft=d}pg(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,Q=o):pg(t)}}function pg(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ft||Au(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ft)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:on(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Zm(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Zm(e,s,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&Ns(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(G(163))}ft||e.flags&512&&Kd(e)}catch(g){Fe(e,e.return,g)}}if(e===t){Q=null;break}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}}function mg(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Q=n;break}Q=e.return}}function gg(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Au(4,e)}catch(c){Fe(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){Fe(e,i,c)}}var o=e.return;try{Kd(e)}catch(c){Fe(e,o,c)}break;case 5:var s=e.return;try{Kd(e)}catch(c){Fe(e,s,c)}}}catch(c){Fe(e,e.return,c)}if(e===t){Q=null;break}var u=e.sibling;if(u!==null){u.return=e.return,Q=u;break}Q=e.return}}var Kw=Math.ceil,za=Kn.ReactCurrentDispatcher,_h=Kn.ReactCurrentOwner,Kt=Kn.ReactCurrentBatchConfig,ge=0,Xe=null,Ge=null,nt=0,Vt=0,bi=Dr(0),Ke=0,$s=null,ii=0,Ru=0,Th=0,ys=null,It=null,Eh=0,so=1/0,Pn=null,Wa=!1,Yd=null,vr=null,Kl=!1,cr=null,Ka=0,vs=0,Xd=null,da=-1,fa=0;function _t(){return ge&6?qe():da!==-1?da:da=qe()}function _r(t){return t.mode&1?ge&2&&nt!==0?nt&-nt:kw.transition!==null?(fa===0&&(fa=b_()),fa):(t=Ce,t!==0||(t=window.event,t=t===void 0?16:z_(t.type)),t):1}function un(t,e,n,r){if(50<vs)throw vs=0,Xd=null,Error(G(185));js(t,n,r),(!(ge&2)||t!==Xe)&&(t===Xe&&(!(ge&2)&&(Ru|=n),Ke===4&&ir(t,nt)),xt(t,r),n===1&&ge===0&&!(e.mode&1)&&(so=qe()+500,Iu&&Vr()))}function xt(t,e){var n=t.callbackNode;kS(t,e);var r=ka(t,t===Xe?nt:0);if(r===0)n!==null&&wm(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&wm(n),e===1)t.tag===0?Pw(yg.bind(null,t)):cT(yg.bind(null,t)),ww(function(){!(ge&6)&&Vr()}),n=null;else{switch(O_(r)){case 1:n=Kf;break;case 4:n=U_;break;case 16:n=Pa;break;case 536870912:n=F_;break;default:n=Pa}n=aE(n,tE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function tE(t,e){if(da=-1,fa=0,ge&6)throw Error(G(327));var n=t.callbackNode;if(Wi()&&t.callbackNode!==n)return null;var r=ka(t,t===Xe?nt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ja(t,r);else{e=r;var i=ge;ge|=2;var o=rE();(Xe!==t||nt!==e)&&(Pn=null,so=qe()+500,Zr(t,e));do try{Yw();break}catch(u){nE(t,u)}while(!0);sh(),za.current=o,ge=i,Ge!==null?e=0:(Xe=null,nt=0,e=Ke)}if(e!==0){if(e===2&&(i=Sd(t),i!==0&&(r=i,e=Zd(t,i))),e===1)throw n=$s,Zr(t,0),ir(t,r),xt(t,qe()),n;if(e===6)ir(t,r);else{if(i=t.current.alternate,!(r&30)&&!Jw(i)&&(e=Ja(t,r),e===2&&(o=Sd(t),o!==0&&(r=o,e=Zd(t,o))),e===1))throw n=$s,Zr(t,0),ir(t,r),xt(t,qe()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(G(345));case 2:Hr(t,It,Pn);break;case 3:if(ir(t,r),(r&130023424)===r&&(e=Eh+500-qe(),10<e)){if(ka(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){_t(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Md(Hr.bind(null,t,It,Pn),e);break}Hr(t,It,Pn);break;case 4:if(ir(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-an(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=qe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Kw(r/1960))-r,10<r){t.timeoutHandle=Md(Hr.bind(null,t,It,Pn),r);break}Hr(t,It,Pn);break;case 5:Hr(t,It,Pn);break;default:throw Error(G(329))}}}return xt(t,qe()),t.callbackNode===n?tE.bind(null,t):null}function Zd(t,e){var n=ys;return t.current.memoizedState.isDehydrated&&(Zr(t,e).flags|=256),t=Ja(t,e),t!==2&&(e=It,It=n,e!==null&&jd(e)),t}function jd(t){It===null?It=t:It.push.apply(It,t)}function Jw(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!cn(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ir(t,e){for(e&=~Th,e&=~Ru,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-an(e),r=1<<n;t[n]=-1,e&=~r}}function yg(t){if(ge&6)throw Error(G(327));Wi();var e=ka(t,0);if(!(e&1))return xt(t,qe()),null;var n=Ja(t,e);if(t.tag!==0&&n===2){var r=Sd(t);r!==0&&(e=r,n=Zd(t,r))}if(n===1)throw n=$s,Zr(t,0),ir(t,e),xt(t,qe()),n;if(n===6)throw Error(G(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Hr(t,It,Pn),xt(t,qe()),null}function Ch(t,e){var n=ge;ge|=1;try{return t(e)}finally{ge=n,ge===0&&(so=qe()+500,Iu&&Vr())}}function oi(t){cr!==null&&cr.tag===0&&!(ge&6)&&Wi();var e=ge;ge|=1;var n=Kt.transition,r=Ce;try{if(Kt.transition=null,Ce=1,t)return t()}finally{Ce=r,Kt.transition=n,ge=e,!(ge&6)&&Vr()}}function Ih(){Vt=bi.current,Pe(bi)}function Zr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Sw(n)),Ge!==null)for(n=Ge.return;n!==null;){var r=n;switch(rh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&La();break;case 3:io(),Pe(At),Pe(mt),fh();break;case 5:dh(r);break;case 4:io();break;case 13:Pe(Me);break;case 19:Pe(Me);break;case 10:lh(r.type._context);break;case 22:case 23:Ih()}n=n.return}if(Xe=t,Ge=t=Tr(t.current,null),nt=Vt=e,Ke=0,$s=null,Th=Ru=ii=0,It=ys=null,Qr!==null){for(e=0;e<Qr.length;e++)if(n=Qr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}Qr=null}return t}function nE(t,e){do{var n=Ge;try{if(sh(),aa.current=Ha,Ga){for(var r=De.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ga=!1}if(ri=0,Ye=ze=De=null,ms=!1,Os=0,_h.current=null,n===null||n.return===null){Ke=1,$s=e,Ge=null;break}e:{var o=t,s=n.return,u=n,c=e;if(e=nt,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=u,p=h.tag;if(!(h.mode&1)&&(p===0||p===11||p===15)){var g=h.alternate;g?(h.updateQueue=g.updateQueue,h.memoizedState=g.memoizedState,h.lanes=g.lanes):(h.updateQueue=null,h.memoizedState=null)}var v=ig(s);if(v!==null){v.flags&=-257,og(v,s,u,o,e),v.mode&1&&rg(o,d,e),e=v,c=d;var R=e.updateQueue;if(R===null){var P=new Set;P.add(c),e.updateQueue=P}else R.add(c);break e}else{if(!(e&1)){rg(o,d,e),Sh();break e}c=Error(G(426))}}else if(ke&&u.mode&1){var D=ig(s);if(D!==null){!(D.flags&65536)&&(D.flags|=256),og(D,s,u,o,e),ih(oo(c,u));break e}}o=c=oo(c,u),Ke!==4&&(Ke=2),ys===null?ys=[o]:ys.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var w=OT(o,c,e);Xm(o,w);break e;case 1:u=c;var _=o.type,S=o.stateNode;if(!(o.flags&128)&&(typeof _.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(vr===null||!vr.has(S)))){o.flags|=65536,e&=-e,o.lanes|=e;var V=BT(o,u,e);Xm(o,V);break e}}o=o.return}while(o!==null)}oE(n)}catch(F){e=F,Ge===n&&n!==null&&(Ge=n=n.return);continue}break}while(!0)}function rE(){var t=za.current;return za.current=Ha,t===null?Ha:t}function Sh(){(Ke===0||Ke===3||Ke===2)&&(Ke=4),Xe===null||!(ii&268435455)&&!(Ru&268435455)||ir(Xe,nt)}function Ja(t,e){var n=ge;ge|=2;var r=rE();(Xe!==t||nt!==e)&&(Pn=null,Zr(t,e));do try{Qw();break}catch(i){nE(t,i)}while(!0);if(sh(),ge=n,za.current=r,Ge!==null)throw Error(G(261));return Xe=null,nt=0,Ke}function Qw(){for(;Ge!==null;)iE(Ge)}function Yw(){for(;Ge!==null&&!ES();)iE(Ge)}function iE(t){var e=lE(t.alternate,t,Vt);t.memoizedProps=t.pendingProps,e===null?oE(t):Ge=e,_h.current=null}function oE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Gw(n,e),n!==null){n.flags&=32767,Ge=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ke=6,Ge=null;return}}else if(n=$w(n,e,Vt),n!==null){Ge=n;return}if(e=e.sibling,e!==null){Ge=e;return}Ge=e=t}while(e!==null);Ke===0&&(Ke=5)}function Hr(t,e,n){var r=Ce,i=Kt.transition;try{Kt.transition=null,Ce=1,Xw(t,e,n,r)}finally{Kt.transition=i,Ce=r}return null}function Xw(t,e,n,r){do Wi();while(cr!==null);if(ge&6)throw Error(G(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(G(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(NS(t,o),t===Xe&&(Ge=Xe=null,nt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Kl||(Kl=!0,aE(Pa,function(){return Wi(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Kt.transition,Kt.transition=null;var s=Ce;Ce=1;var u=ge;ge|=4,_h.current=null,zw(t,n),jT(n,t),yw(kd),Na=!!Pd,kd=Pd=null,t.current=n,Ww(n),CS(),ge=u,Ce=s,Kt.transition=o}else t.current=n;if(Kl&&(Kl=!1,cr=t,Ka=i),o=t.pendingLanes,o===0&&(vr=null),wS(n.stateNode),xt(t,qe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Wa)throw Wa=!1,t=Yd,Yd=null,t;return Ka&1&&t.tag!==0&&Wi(),o=t.pendingLanes,o&1?t===Xd?vs++:(vs=0,Xd=t):vs=0,Vr(),null}function Wi(){if(cr!==null){var t=O_(Ka),e=Kt.transition,n=Ce;try{if(Kt.transition=null,Ce=16>t?16:t,cr===null)var r=!1;else{if(t=cr,cr=null,Ka=0,ge&6)throw Error(G(331));var i=ge;for(ge|=4,Q=t.current;Q!==null;){var o=Q,s=o.child;if(Q.flags&16){var u=o.deletions;if(u!==null){for(var c=0;c<u.length;c++){var d=u[c];for(Q=d;Q!==null;){var h=Q;switch(h.tag){case 0:case 11:case 15:gs(8,h,o)}var p=h.child;if(p!==null)p.return=h,Q=p;else for(;Q!==null;){h=Q;var g=h.sibling,v=h.return;if(YT(h),h===d){Q=null;break}if(g!==null){g.return=v,Q=g;break}Q=v}}}var R=o.alternate;if(R!==null){var P=R.child;if(P!==null){R.child=null;do{var D=P.sibling;P.sibling=null,P=D}while(P!==null)}}Q=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,Q=s;else e:for(;Q!==null;){if(o=Q,o.flags&2048)switch(o.tag){case 0:case 11:case 15:gs(9,o,o.return)}var w=o.sibling;if(w!==null){w.return=o.return,Q=w;break e}Q=o.return}}var _=t.current;for(Q=_;Q!==null;){s=Q;var S=s.child;if(s.subtreeFlags&2064&&S!==null)S.return=s,Q=S;else e:for(s=_;Q!==null;){if(u=Q,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Au(9,u)}}catch(F){Fe(u,u.return,F)}if(u===s){Q=null;break e}var V=u.sibling;if(V!==null){V.return=u.return,Q=V;break e}Q=u.return}}if(ge=i,Vr(),mn&&typeof mn.onPostCommitFiberRoot=="function")try{mn.onPostCommitFiberRoot(vu,t)}catch{}r=!0}return r}finally{Ce=n,Kt.transition=e}}return!1}function vg(t,e,n){e=oo(n,e),e=OT(t,e,1),t=yr(t,e,1),e=_t(),t!==null&&(js(t,1,e),xt(t,e))}function Fe(t,e,n){if(t.tag===3)vg(t,t,n);else for(;e!==null;){if(e.tag===3){vg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(vr===null||!vr.has(r))){t=oo(n,t),t=BT(e,t,1),e=yr(e,t,1),t=_t(),e!==null&&(js(e,1,t),xt(e,t));break}}e=e.return}}function Zw(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=_t(),t.pingedLanes|=t.suspendedLanes&n,Xe===t&&(nt&n)===n&&(Ke===4||Ke===3&&(nt&130023424)===nt&&500>qe()-Eh?Zr(t,0):Th|=n),xt(t,e)}function sE(t,e){e===0&&(t.mode&1?(e=Fl,Fl<<=1,!(Fl&130023424)&&(Fl=4194304)):e=1);var n=_t();t=Bn(t,e),t!==null&&(js(t,e,n),xt(t,n))}function jw(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),sE(t,n)}function eA(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(G(314))}r!==null&&r.delete(e),sE(t,n)}var lE;lE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||At.current)wt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return wt=!1,qw(t,e,n);wt=!!(t.flags&131072)}else wt=!1,ke&&e.flags&1048576&&dT(e,ba,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ca(t,e),t=e.pendingProps;var i=to(e,mt.current);zi(e,n),i=ph(null,e,r,t,i,n);var o=mh();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Rt(r)?(o=!0,Ua(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,uh(e),i.updater=wu,e.stateNode=i,i._reactInternals=e,Od(e,r,t,n),e=$d(null,e,r,!0,o,n)):(e.tag=0,ke&&o&&nh(e),vt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ca(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=nA(r),t=on(r,t),i){case 0:e=qd(null,e,r,t,n);break e;case 1:e=ag(null,e,r,t,n);break e;case 11:e=sg(null,e,r,t,n);break e;case 14:e=lg(null,e,r,on(r.type,t),n);break e}throw Error(G(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:on(r,i),qd(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:on(r,i),ag(t,e,r,i,n);case 3:e:{if(HT(e),t===null)throw Error(G(387));r=e.pendingProps,o=e.memoizedState,i=o.element,yT(t,e),qa(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=oo(Error(G(423)),e),e=ug(t,e,r,n,i);break e}else if(r!==i){i=oo(Error(G(424)),e),e=ug(t,e,r,n,i);break e}else for(Lt=gr(e.stateNode.containerInfo.firstChild),Ft=e,ke=!0,ln=null,n=mT(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(no(),r===i){e=qn(t,e,n);break e}vt(t,e,r,n)}e=e.child}return e;case 5:return vT(e),t===null&&Ud(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,Nd(r,i)?s=null:o!==null&&Nd(r,o)&&(e.flags|=32),GT(t,e),vt(t,e,s,n),e.child;case 6:return t===null&&Ud(e),null;case 13:return zT(t,e,n);case 4:return ch(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ro(e,null,r,n):vt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:on(r,i),sg(t,e,r,i,n);case 7:return vt(t,e,e.pendingProps,n),e.child;case 8:return vt(t,e,e.pendingProps.children,n),e.child;case 12:return vt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,we(Oa,r._currentValue),r._currentValue=s,o!==null)if(cn(o.value,s)){if(o.children===i.children&&!At.current){e=qn(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){s=o.child;for(var c=u.firstContext;c!==null;){if(c.context===r){if(o.tag===1){c=Fn(-1,n&-n),c.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Fd(o.return,n,e),u.lanes|=n;break}c=c.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(G(341));s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Fd(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}vt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,zi(e,n),i=Qt(i),r=r(i),e.flags|=1,vt(t,e,r,n),e.child;case 14:return r=e.type,i=on(r,e.pendingProps),i=on(r.type,i),lg(t,e,r,i,n);case 15:return qT(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:on(r,i),ca(t,e),e.tag=1,Rt(r)?(t=!0,Ua(e)):t=!1,zi(e,n),bT(e,r,i),Od(e,r,i,n),$d(null,e,r,!0,t,n);case 19:return WT(t,e,n);case 22:return $T(t,e,n)}throw Error(G(156,e.tag))};function aE(t,e){return L_(t,e)}function tA(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wt(t,e,n,r){return new tA(t,e,n,r)}function wh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function nA(t){if(typeof t=="function")return wh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Hf)return 11;if(t===zf)return 14}return 2}function Tr(t,e){var n=t.alternate;return n===null?(n=Wt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ha(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")wh(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case xi:return jr(n.children,i,o,e);case Gf:s=8,i|=8;break;case ud:return t=Wt(12,n,e,i|2),t.elementType=ud,t.lanes=o,t;case cd:return t=Wt(13,n,e,i),t.elementType=cd,t.lanes=o,t;case dd:return t=Wt(19,n,e,i),t.elementType=dd,t.lanes=o,t;case v_:return xu(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case g_:s=10;break e;case y_:s=9;break e;case Hf:s=11;break e;case zf:s=14;break e;case tr:s=16,r=null;break e}throw Error(G(130,t==null?t:typeof t,""))}return e=Wt(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function jr(t,e,n,r){return t=Wt(7,t,r,e),t.lanes=n,t}function xu(t,e,n,r){return t=Wt(22,t,r,e),t.elementType=v_,t.lanes=n,t.stateNode={isHidden:!1},t}function Wc(t,e,n){return t=Wt(6,t,null,e),t.lanes=n,t}function Kc(t,e,n){return e=Wt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function rA(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Rc(0),this.expirationTimes=Rc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rc(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Ah(t,e,n,r,i,o,s,u,c){return t=new rA(t,e,n,u,c),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Wt(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},uh(o),t}function iA(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ri,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function uE(t){if(!t)return Rr;t=t._reactInternals;e:{if(hi(t)!==t||t.tag!==1)throw Error(G(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Rt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(G(171))}if(t.tag===1){var n=t.type;if(Rt(n))return uT(t,n,e)}return e}function cE(t,e,n,r,i,o,s,u,c){return t=Ah(n,r,!0,t,i,o,s,u,c),t.context=uE(null),n=t.current,r=_t(),i=_r(n),o=Fn(r,i),o.callback=e??null,yr(n,o,i),t.current.lanes=i,js(t,i,r),xt(t,r),t}function Pu(t,e,n,r){var i=e.current,o=_t(),s=_r(i);return n=uE(n),e.context===null?e.context=n:e.pendingContext=n,e=Fn(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=yr(i,e,s),t!==null&&(un(t,i,s,o),la(t,i,s)),s}function Qa(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function _g(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Rh(t,e){_g(t,e),(t=t.alternate)&&_g(t,e)}function oA(){return null}var dE=typeof reportError=="function"?reportError:function(t){console.error(t)};function xh(t){this._internalRoot=t}ku.prototype.render=xh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(G(409));Pu(t,e,null,null)};ku.prototype.unmount=xh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;oi(function(){Pu(null,t,null,null)}),e[On]=null}};function ku(t){this._internalRoot=t}ku.prototype.unstable_scheduleHydration=function(t){if(t){var e=$_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<rr.length&&e!==0&&e<rr[n].priority;n++);rr.splice(n,0,t),n===0&&H_(t)}};function Ph(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Nu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Tg(){}function sA(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var d=Qa(s);o.call(d)}}var s=cE(e,r,t,0,null,!1,!1,"",Tg);return t._reactRootContainer=s,t[On]=s.current,Vs(t.nodeType===8?t.parentNode:t),oi(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var u=r;r=function(){var d=Qa(c);u.call(d)}}var c=Ah(t,0,!1,null,null,!1,!1,"",Tg);return t._reactRootContainer=c,t[On]=c.current,Vs(t.nodeType===8?t.parentNode:t),oi(function(){Pu(e,c,n,r)}),c}function Mu(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var u=i;i=function(){var c=Qa(s);u.call(c)}}Pu(e,s,t,i)}else s=sA(n,e,t,i,r);return Qa(s)}B_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=is(e.pendingLanes);n!==0&&(Jf(e,n|1),xt(e,qe()),!(ge&6)&&(so=qe()+500,Vr()))}break;case 13:oi(function(){var r=Bn(t,1);if(r!==null){var i=_t();un(r,t,1,i)}}),Rh(t,1)}};Qf=function(t){if(t.tag===13){var e=Bn(t,134217728);if(e!==null){var n=_t();un(e,t,134217728,n)}Rh(t,134217728)}};q_=function(t){if(t.tag===13){var e=_r(t),n=Bn(t,e);if(n!==null){var r=_t();un(n,t,e,r)}Rh(t,e)}};$_=function(){return Ce};G_=function(t,e){var n=Ce;try{return Ce=t,e()}finally{Ce=n}};Ed=function(t,e,n){switch(e){case"input":if(pd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Cu(r);if(!i)throw Error(G(90));T_(r),pd(r,i)}}}break;case"textarea":C_(t,n);break;case"select":e=n.value,e!=null&&qi(t,!!n.multiple,e,!1)}};P_=Ch;k_=oi;var lA={usingClientEntryPoint:!1,Events:[tl,Mi,Cu,R_,x_,Ch]},jo={findFiberByHostInstance:Jr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},aA={bundleType:jo.bundleType,version:jo.version,rendererPackageName:jo.rendererPackageName,rendererConfig:jo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Kn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=D_(t),t===null?null:t.stateNode},findFiberByHostInstance:jo.findFiberByHostInstance||oA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jl.isDisabled&&Jl.supportsFiber)try{vu=Jl.inject(aA),mn=Jl}catch{}}Ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lA;Ot.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ph(e))throw Error(G(200));return iA(t,e,null,n)};Ot.createRoot=function(t,e){if(!Ph(t))throw Error(G(299));var n=!1,r="",i=dE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Ah(t,1,!1,null,null,n,!1,r,i),t[On]=e.current,Vs(t.nodeType===8?t.parentNode:t),new xh(e)};Ot.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(G(188)):(t=Object.keys(t).join(","),Error(G(268,t)));return t=D_(e),t=t===null?null:t.stateNode,t};Ot.flushSync=function(t){return oi(t)};Ot.hydrate=function(t,e,n){if(!Nu(e))throw Error(G(200));return Mu(null,t,e,!0,n)};Ot.hydrateRoot=function(t,e,n){if(!Ph(t))throw Error(G(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=dE;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=cE(e,null,t,1,n??null,i,!1,o,s),t[On]=e.current,Vs(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new ku(e)};Ot.render=function(t,e,n){if(!Nu(e))throw Error(G(200));return Mu(null,t,e,!1,n)};Ot.unmountComponentAtNode=function(t){if(!Nu(t))throw Error(G(40));return t._reactRootContainer?(oi(function(){Mu(null,null,t,!1,function(){t._reactRootContainer=null,t[On]=null})}),!0):!1};Ot.unstable_batchedUpdates=Ch;Ot.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Nu(n))throw Error(G(200));if(t==null||t._reactInternals===void 0)throw Error(G(38));return Mu(t,e,n,!1,r)};Ot.version="18.3.1-next-f1338f8080-20240426";function fE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(fE)}catch(t){console.error(t)}}fE(),f_.exports=Ot;var uA=f_.exports,Eg=uA;ld.createRoot=Eg.createRoot,ld.hydrateRoot=Eg.hydrateRoot;var Cg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},cA=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],s=t[n++],u=t[n++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},pE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],s=i+1<t.length,u=s?t[i+1]:0,c=i+2<t.length,d=c?t[i+2]:0,h=o>>2,p=(o&3)<<4|u>>4;let g=(u&15)<<2|d>>6,v=d&63;c||(v=64,s||(g=64)),r.push(n[h],n[p],n[g],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(hE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):cA(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],u=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||u==null||d==null||p==null)throw new dA;const g=o<<2|u>>4;if(r.push(g),d!==64){const v=u<<4&240|d>>2;if(r.push(v),p!==64){const R=d<<6&192|p;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class dA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const fA=function(t){const e=hE(t);return pE.encodeByteArray(e,!0)},Ya=function(t){return fA(t).replace(/\./g,"")},mE=function(t){try{return pE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA=()=>hA().__FIREBASE_DEFAULTS__,mA=()=>{if(typeof process>"u"||typeof Cg>"u")return;const t=Cg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},gA=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&mE(t[1]);return e&&JSON.parse(e)},Du=()=>{try{return pA()||mA()||gA()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},gE=t=>{var e,n;return(n=(e=Du())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},yA=t=>{const e=gE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},yE=()=>{var t;return(t=Du())===null||t===void 0?void 0:t.config},vE=t=>{var e;return(e=Du())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _A(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ya(JSON.stringify(n)),Ya(JSON.stringify(s)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function TA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gt())}function EA(){var t;const e=(t=Du())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function CA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function IA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function SA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function wA(){const t=gt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function AA(){return!EA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function RA(){try{return typeof indexedDB=="object"}catch{return!1}}function xA(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA="FirebaseError";class Jn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=PA,Object.setPrototypeOf(this,Jn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rl.prototype.create)}}class rl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?kA(o,r):"Error",u=`${this.serviceName}: ${s} (${i}).`;return new Jn(i,u,r)}}function kA(t,e){return t.replace(NA,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const NA=/\{\$([^}]+)}/g;function MA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Xa(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],s=e[i];if(Ig(o)&&Ig(s)){if(!Xa(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Ig(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function il(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function DA(t,e){const n=new VA(t,e);return n.subscribe.bind(n)}class VA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");LA(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Jc),i.error===void 0&&(i.error=Jc),i.complete===void 0&&(i.complete=Jc);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function LA(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Jc(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(t){return t&&t._delegate?t._delegate:t}class si{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new vA;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(bA(e))try{this.getOrInitializeService({instanceIdentifier:zr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=zr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=zr){return this.instances.has(e)}getOptions(e=zr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,s]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);r===u&&s.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:FA(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=zr){return this.component?this.component.multipleInstances?e:zr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function FA(t){return t===zr?void 0:t}function bA(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new UA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(pe||(pe={}));const BA={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},qA=pe.INFO,$A={[pe.DEBUG]:"log",[pe.VERBOSE]:"log",[pe.INFO]:"info",[pe.WARN]:"warn",[pe.ERROR]:"error"},GA=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=$A[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class kh{constructor(e){this.name=e,this._logLevel=qA,this._logHandler=GA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?BA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pe.DEBUG,...e),this._logHandler(this,pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pe.VERBOSE,...e),this._logHandler(this,pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pe.INFO,...e),this._logHandler(this,pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pe.WARN,...e),this._logHandler(this,pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pe.ERROR,...e),this._logHandler(this,pe.ERROR,...e)}}const HA=(t,e)=>e.some(n=>t instanceof n);let Sg,wg;function zA(){return Sg||(Sg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function WA(){return wg||(wg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _E=new WeakMap,ef=new WeakMap,TE=new WeakMap,Qc=new WeakMap,Nh=new WeakMap;function KA(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Er(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&_E.set(n,t)}).catch(()=>{}),Nh.set(e,t),e}function JA(t){if(ef.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});ef.set(t,e)}let tf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ef.get(t);if(e==="objectStoreNames")return t.objectStoreNames||TE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Er(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function QA(t){tf=t(tf)}function YA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Yc(this),e,...n);return TE.set(r,e.sort?e.sort():[e]),Er(r)}:WA().includes(t)?function(...e){return t.apply(Yc(this),e),Er(_E.get(this))}:function(...e){return Er(t.apply(Yc(this),e))}}function XA(t){return typeof t=="function"?YA(t):(t instanceof IDBTransaction&&JA(t),HA(t,zA())?new Proxy(t,tf):t)}function Er(t){if(t instanceof IDBRequest)return KA(t);if(Qc.has(t))return Qc.get(t);const e=XA(t);return e!==t&&(Qc.set(t,e),Nh.set(e,t)),e}const Yc=t=>Nh.get(t);function ZA(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),u=Er(s);return r&&s.addEventListener("upgradeneeded",c=>{r(Er(s.result),c.oldVersion,c.newVersion,Er(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),u.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),u}const jA=["get","getKey","getAll","getAllKeys","count"],eR=["put","add","delete","clear"],Xc=new Map;function Ag(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Xc.get(e))return Xc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=eR.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||jA.includes(n)))return;const o=async function(s,...u){const c=this.transaction(s,i?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(u.shift())),(await Promise.all([d[n](...u),i&&c.done]))[0]};return Xc.set(e,o),o}QA(t=>({...t,get:(e,n,r)=>Ag(e,n)||t.get(e,n,r),has:(e,n)=>!!Ag(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(nR(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function nR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const nf="@firebase/app",Rg="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $n=new kh("@firebase/app"),rR="@firebase/app-compat",iR="@firebase/analytics-compat",oR="@firebase/analytics",sR="@firebase/app-check-compat",lR="@firebase/app-check",aR="@firebase/auth",uR="@firebase/auth-compat",cR="@firebase/database",dR="@firebase/data-connect",fR="@firebase/database-compat",hR="@firebase/functions",pR="@firebase/functions-compat",mR="@firebase/installations",gR="@firebase/installations-compat",yR="@firebase/messaging",vR="@firebase/messaging-compat",_R="@firebase/performance",TR="@firebase/performance-compat",ER="@firebase/remote-config",CR="@firebase/remote-config-compat",IR="@firebase/storage",SR="@firebase/storage-compat",wR="@firebase/firestore",AR="@firebase/vertexai-preview",RR="@firebase/firestore-compat",xR="firebase",PR="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rf="[DEFAULT]",kR={[nf]:"fire-core",[rR]:"fire-core-compat",[oR]:"fire-analytics",[iR]:"fire-analytics-compat",[lR]:"fire-app-check",[sR]:"fire-app-check-compat",[aR]:"fire-auth",[uR]:"fire-auth-compat",[cR]:"fire-rtdb",[dR]:"fire-data-connect",[fR]:"fire-rtdb-compat",[hR]:"fire-fn",[pR]:"fire-fn-compat",[mR]:"fire-iid",[gR]:"fire-iid-compat",[yR]:"fire-fcm",[vR]:"fire-fcm-compat",[_R]:"fire-perf",[TR]:"fire-perf-compat",[ER]:"fire-rc",[CR]:"fire-rc-compat",[IR]:"fire-gcs",[SR]:"fire-gcs-compat",[wR]:"fire-fst",[RR]:"fire-fst-compat",[AR]:"fire-vertex","fire-js":"fire-js",[xR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Za=new Map,NR=new Map,of=new Map;function xg(t,e){try{t.container.addComponent(e)}catch(n){$n.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function lo(t){const e=t.name;if(of.has(e))return $n.debug(`There were multiple attempts to register component ${e}.`),!1;of.set(e,t);for(const n of Za.values())xg(n,t);for(const n of NR.values())xg(n,t);return!0}function Mh(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Dn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Cr=new rl("app","Firebase",MR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new si("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Cr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const To=PR;function EE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:rf,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Cr.create("bad-app-name",{appName:String(i)});if(n||(n=yE()),!n)throw Cr.create("no-options");const o=Za.get(i);if(o){if(Xa(n,o.options)&&Xa(r,o.config))return o;throw Cr.create("duplicate-app",{appName:i})}const s=new OA(i);for(const c of of.values())s.addComponent(c);const u=new DR(n,r,s);return Za.set(i,u),u}function CE(t=rf){const e=Za.get(t);if(!e&&t===rf&&yE())return EE();if(!e)throw Cr.create("no-app",{appName:t});return e}function Ir(t,e,n){var r;let i=(r=kR[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const u=[`Unable to register library "${i}" with version "${e}":`];o&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&u.push("and"),s&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),$n.warn(u.join(" "));return}lo(new si(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR="firebase-heartbeat-database",LR=1,Gs="firebase-heartbeat-store";let Zc=null;function IE(){return Zc||(Zc=ZA(VR,LR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Gs)}catch(n){console.warn(n)}}}}).catch(t=>{throw Cr.create("idb-open",{originalErrorMessage:t.message})})),Zc}async function UR(t){try{const n=(await IE()).transaction(Gs),r=await n.objectStore(Gs).get(SE(t));return await n.done,r}catch(e){if(e instanceof Jn)$n.warn(e.message);else{const n=Cr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});$n.warn(n.message)}}}async function Pg(t,e){try{const r=(await IE()).transaction(Gs,"readwrite");await r.objectStore(Gs).put(e,SE(t)),await r.done}catch(n){if(n instanceof Jn)$n.warn(n.message);else{const r=Cr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});$n.warn(r.message)}}}function SE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR=1024,bR=30*24*60*60*1e3;class OR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new qR(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=kg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const u=new Date(s.date).valueOf();return Date.now()-u<=bR}),this._storage.overwrite(this._heartbeatsCache))}catch(r){$n.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=kg(),{heartbeatsToSend:r,unsentEntries:i}=BR(this._heartbeatsCache.heartbeats),o=Ya(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return $n.warn(n),""}}}function kg(){return new Date().toISOString().substring(0,10)}function BR(t,e=FR){const n=[];let r=t.slice();for(const i of t){const o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),Ng(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Ng(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class qR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return RA()?xA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await UR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Pg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Pg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Ng(t){return Ya(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $R(t){lo(new si("platform-logger",e=>new tR(e),"PRIVATE")),lo(new si("heartbeat",e=>new OR(e),"PRIVATE")),Ir(nf,Rg,t),Ir(nf,Rg,"esm2017"),Ir("fire-js","")}$R("");var Mg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ei,wE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,E){function I(){}I.prototype=E.prototype,A.D=E.prototype,A.prototype=new I,A.prototype.constructor=A,A.C=function(x,N,M){for(var k=Array(arguments.length-2),He=2;He<arguments.length;He++)k[He-2]=arguments[He];return E.prototype[N].apply(x,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(A,E,I){I||(I=0);var x=Array(16);if(typeof E=="string")for(var N=0;16>N;++N)x[N]=E.charCodeAt(I++)|E.charCodeAt(I++)<<8|E.charCodeAt(I++)<<16|E.charCodeAt(I++)<<24;else for(N=0;16>N;++N)x[N]=E[I++]|E[I++]<<8|E[I++]<<16|E[I++]<<24;E=A.g[0],I=A.g[1],N=A.g[2];var M=A.g[3],k=E+(M^I&(N^M))+x[0]+3614090360&4294967295;E=I+(k<<7&4294967295|k>>>25),k=M+(N^E&(I^N))+x[1]+3905402710&4294967295,M=E+(k<<12&4294967295|k>>>20),k=N+(I^M&(E^I))+x[2]+606105819&4294967295,N=M+(k<<17&4294967295|k>>>15),k=I+(E^N&(M^E))+x[3]+3250441966&4294967295,I=N+(k<<22&4294967295|k>>>10),k=E+(M^I&(N^M))+x[4]+4118548399&4294967295,E=I+(k<<7&4294967295|k>>>25),k=M+(N^E&(I^N))+x[5]+1200080426&4294967295,M=E+(k<<12&4294967295|k>>>20),k=N+(I^M&(E^I))+x[6]+2821735955&4294967295,N=M+(k<<17&4294967295|k>>>15),k=I+(E^N&(M^E))+x[7]+4249261313&4294967295,I=N+(k<<22&4294967295|k>>>10),k=E+(M^I&(N^M))+x[8]+1770035416&4294967295,E=I+(k<<7&4294967295|k>>>25),k=M+(N^E&(I^N))+x[9]+2336552879&4294967295,M=E+(k<<12&4294967295|k>>>20),k=N+(I^M&(E^I))+x[10]+4294925233&4294967295,N=M+(k<<17&4294967295|k>>>15),k=I+(E^N&(M^E))+x[11]+2304563134&4294967295,I=N+(k<<22&4294967295|k>>>10),k=E+(M^I&(N^M))+x[12]+1804603682&4294967295,E=I+(k<<7&4294967295|k>>>25),k=M+(N^E&(I^N))+x[13]+4254626195&4294967295,M=E+(k<<12&4294967295|k>>>20),k=N+(I^M&(E^I))+x[14]+2792965006&4294967295,N=M+(k<<17&4294967295|k>>>15),k=I+(E^N&(M^E))+x[15]+1236535329&4294967295,I=N+(k<<22&4294967295|k>>>10),k=E+(N^M&(I^N))+x[1]+4129170786&4294967295,E=I+(k<<5&4294967295|k>>>27),k=M+(I^N&(E^I))+x[6]+3225465664&4294967295,M=E+(k<<9&4294967295|k>>>23),k=N+(E^I&(M^E))+x[11]+643717713&4294967295,N=M+(k<<14&4294967295|k>>>18),k=I+(M^E&(N^M))+x[0]+3921069994&4294967295,I=N+(k<<20&4294967295|k>>>12),k=E+(N^M&(I^N))+x[5]+3593408605&4294967295,E=I+(k<<5&4294967295|k>>>27),k=M+(I^N&(E^I))+x[10]+38016083&4294967295,M=E+(k<<9&4294967295|k>>>23),k=N+(E^I&(M^E))+x[15]+3634488961&4294967295,N=M+(k<<14&4294967295|k>>>18),k=I+(M^E&(N^M))+x[4]+3889429448&4294967295,I=N+(k<<20&4294967295|k>>>12),k=E+(N^M&(I^N))+x[9]+568446438&4294967295,E=I+(k<<5&4294967295|k>>>27),k=M+(I^N&(E^I))+x[14]+3275163606&4294967295,M=E+(k<<9&4294967295|k>>>23),k=N+(E^I&(M^E))+x[3]+4107603335&4294967295,N=M+(k<<14&4294967295|k>>>18),k=I+(M^E&(N^M))+x[8]+1163531501&4294967295,I=N+(k<<20&4294967295|k>>>12),k=E+(N^M&(I^N))+x[13]+2850285829&4294967295,E=I+(k<<5&4294967295|k>>>27),k=M+(I^N&(E^I))+x[2]+4243563512&4294967295,M=E+(k<<9&4294967295|k>>>23),k=N+(E^I&(M^E))+x[7]+1735328473&4294967295,N=M+(k<<14&4294967295|k>>>18),k=I+(M^E&(N^M))+x[12]+2368359562&4294967295,I=N+(k<<20&4294967295|k>>>12),k=E+(I^N^M)+x[5]+4294588738&4294967295,E=I+(k<<4&4294967295|k>>>28),k=M+(E^I^N)+x[8]+2272392833&4294967295,M=E+(k<<11&4294967295|k>>>21),k=N+(M^E^I)+x[11]+1839030562&4294967295,N=M+(k<<16&4294967295|k>>>16),k=I+(N^M^E)+x[14]+4259657740&4294967295,I=N+(k<<23&4294967295|k>>>9),k=E+(I^N^M)+x[1]+2763975236&4294967295,E=I+(k<<4&4294967295|k>>>28),k=M+(E^I^N)+x[4]+1272893353&4294967295,M=E+(k<<11&4294967295|k>>>21),k=N+(M^E^I)+x[7]+4139469664&4294967295,N=M+(k<<16&4294967295|k>>>16),k=I+(N^M^E)+x[10]+3200236656&4294967295,I=N+(k<<23&4294967295|k>>>9),k=E+(I^N^M)+x[13]+681279174&4294967295,E=I+(k<<4&4294967295|k>>>28),k=M+(E^I^N)+x[0]+3936430074&4294967295,M=E+(k<<11&4294967295|k>>>21),k=N+(M^E^I)+x[3]+3572445317&4294967295,N=M+(k<<16&4294967295|k>>>16),k=I+(N^M^E)+x[6]+76029189&4294967295,I=N+(k<<23&4294967295|k>>>9),k=E+(I^N^M)+x[9]+3654602809&4294967295,E=I+(k<<4&4294967295|k>>>28),k=M+(E^I^N)+x[12]+3873151461&4294967295,M=E+(k<<11&4294967295|k>>>21),k=N+(M^E^I)+x[15]+530742520&4294967295,N=M+(k<<16&4294967295|k>>>16),k=I+(N^M^E)+x[2]+3299628645&4294967295,I=N+(k<<23&4294967295|k>>>9),k=E+(N^(I|~M))+x[0]+4096336452&4294967295,E=I+(k<<6&4294967295|k>>>26),k=M+(I^(E|~N))+x[7]+1126891415&4294967295,M=E+(k<<10&4294967295|k>>>22),k=N+(E^(M|~I))+x[14]+2878612391&4294967295,N=M+(k<<15&4294967295|k>>>17),k=I+(M^(N|~E))+x[5]+4237533241&4294967295,I=N+(k<<21&4294967295|k>>>11),k=E+(N^(I|~M))+x[12]+1700485571&4294967295,E=I+(k<<6&4294967295|k>>>26),k=M+(I^(E|~N))+x[3]+2399980690&4294967295,M=E+(k<<10&4294967295|k>>>22),k=N+(E^(M|~I))+x[10]+4293915773&4294967295,N=M+(k<<15&4294967295|k>>>17),k=I+(M^(N|~E))+x[1]+2240044497&4294967295,I=N+(k<<21&4294967295|k>>>11),k=E+(N^(I|~M))+x[8]+1873313359&4294967295,E=I+(k<<6&4294967295|k>>>26),k=M+(I^(E|~N))+x[15]+4264355552&4294967295,M=E+(k<<10&4294967295|k>>>22),k=N+(E^(M|~I))+x[6]+2734768916&4294967295,N=M+(k<<15&4294967295|k>>>17),k=I+(M^(N|~E))+x[13]+1309151649&4294967295,I=N+(k<<21&4294967295|k>>>11),k=E+(N^(I|~M))+x[4]+4149444226&4294967295,E=I+(k<<6&4294967295|k>>>26),k=M+(I^(E|~N))+x[11]+3174756917&4294967295,M=E+(k<<10&4294967295|k>>>22),k=N+(E^(M|~I))+x[2]+718787259&4294967295,N=M+(k<<15&4294967295|k>>>17),k=I+(M^(N|~E))+x[9]+3951481745&4294967295,A.g[0]=A.g[0]+E&4294967295,A.g[1]=A.g[1]+(N+(k<<21&4294967295|k>>>11))&4294967295,A.g[2]=A.g[2]+N&4294967295,A.g[3]=A.g[3]+M&4294967295}r.prototype.u=function(A,E){E===void 0&&(E=A.length);for(var I=E-this.blockSize,x=this.B,N=this.h,M=0;M<E;){if(N==0)for(;M<=I;)i(this,A,M),M+=this.blockSize;if(typeof A=="string"){for(;M<E;)if(x[N++]=A.charCodeAt(M++),N==this.blockSize){i(this,x),N=0;break}}else for(;M<E;)if(x[N++]=A[M++],N==this.blockSize){i(this,x),N=0;break}}this.h=N,this.o+=E},r.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var E=1;E<A.length-8;++E)A[E]=0;var I=8*this.o;for(E=A.length-8;E<A.length;++E)A[E]=I&255,I/=256;for(this.u(A),A=Array(16),E=I=0;4>E;++E)for(var x=0;32>x;x+=8)A[I++]=this.g[E]>>>x&255;return A};function o(A,E){var I=u;return Object.prototype.hasOwnProperty.call(I,A)?I[A]:I[A]=E(A)}function s(A,E){this.h=E;for(var I=[],x=!0,N=A.length-1;0<=N;N--){var M=A[N]|0;x&&M==E||(I[N]=M,x=!1)}this.g=I}var u={};function c(A){return-128<=A&&128>A?o(A,function(E){return new s([E|0],0>E?-1:0)}):new s([A|0],0>A?-1:0)}function d(A){if(isNaN(A)||!isFinite(A))return p;if(0>A)return D(d(-A));for(var E=[],I=1,x=0;A>=I;x++)E[x]=A/I|0,I*=4294967296;return new s(E,0)}function h(A,E){if(A.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(A.charAt(0)=="-")return D(h(A.substring(1),E));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=d(Math.pow(E,8)),x=p,N=0;N<A.length;N+=8){var M=Math.min(8,A.length-N),k=parseInt(A.substring(N,N+M),E);8>M?(M=d(Math.pow(E,M)),x=x.j(M).add(d(k))):(x=x.j(I),x=x.add(d(k)))}return x}var p=c(0),g=c(1),v=c(16777216);t=s.prototype,t.m=function(){if(P(this))return-D(this).m();for(var A=0,E=1,I=0;I<this.g.length;I++){var x=this.i(I);A+=(0<=x?x:4294967296+x)*E,E*=4294967296}return A},t.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(R(this))return"0";if(P(this))return"-"+D(this).toString(A);for(var E=d(Math.pow(A,6)),I=this,x="";;){var N=V(I,E).g;I=w(I,N.j(E));var M=((0<I.g.length?I.g[0]:I.h)>>>0).toString(A);if(I=N,R(I))return M+x;for(;6>M.length;)M="0"+M;x=M+x}},t.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function R(A){if(A.h!=0)return!1;for(var E=0;E<A.g.length;E++)if(A.g[E]!=0)return!1;return!0}function P(A){return A.h==-1}t.l=function(A){return A=w(this,A),P(A)?-1:R(A)?0:1};function D(A){for(var E=A.g.length,I=[],x=0;x<E;x++)I[x]=~A.g[x];return new s(I,~A.h).add(g)}t.abs=function(){return P(this)?D(this):this},t.add=function(A){for(var E=Math.max(this.g.length,A.g.length),I=[],x=0,N=0;N<=E;N++){var M=x+(this.i(N)&65535)+(A.i(N)&65535),k=(M>>>16)+(this.i(N)>>>16)+(A.i(N)>>>16);x=k>>>16,M&=65535,k&=65535,I[N]=k<<16|M}return new s(I,I[I.length-1]&-2147483648?-1:0)};function w(A,E){return A.add(D(E))}t.j=function(A){if(R(this)||R(A))return p;if(P(this))return P(A)?D(this).j(D(A)):D(D(this).j(A));if(P(A))return D(this.j(D(A)));if(0>this.l(v)&&0>A.l(v))return d(this.m()*A.m());for(var E=this.g.length+A.g.length,I=[],x=0;x<2*E;x++)I[x]=0;for(x=0;x<this.g.length;x++)for(var N=0;N<A.g.length;N++){var M=this.i(x)>>>16,k=this.i(x)&65535,He=A.i(N)>>>16,Oe=A.i(N)&65535;I[2*x+2*N]+=k*Oe,_(I,2*x+2*N),I[2*x+2*N+1]+=M*Oe,_(I,2*x+2*N+1),I[2*x+2*N+1]+=k*He,_(I,2*x+2*N+1),I[2*x+2*N+2]+=M*He,_(I,2*x+2*N+2)}for(x=0;x<E;x++)I[x]=I[2*x+1]<<16|I[2*x];for(x=E;x<2*E;x++)I[x]=0;return new s(I,0)};function _(A,E){for(;(A[E]&65535)!=A[E];)A[E+1]+=A[E]>>>16,A[E]&=65535,E++}function S(A,E){this.g=A,this.h=E}function V(A,E){if(R(E))throw Error("division by zero");if(R(A))return new S(p,p);if(P(A))return E=V(D(A),E),new S(D(E.g),D(E.h));if(P(E))return E=V(A,D(E)),new S(D(E.g),E.h);if(30<A.g.length){if(P(A)||P(E))throw Error("slowDivide_ only works with positive integers.");for(var I=g,x=E;0>=x.l(A);)I=F(I),x=F(x);var N=b(I,1),M=b(x,1);for(x=b(x,2),I=b(I,2);!R(x);){var k=M.add(x);0>=k.l(A)&&(N=N.add(I),M=k),x=b(x,1),I=b(I,1)}return E=w(A,N.j(E)),new S(N,E)}for(N=p;0<=A.l(E);){for(I=Math.max(1,Math.floor(A.m()/E.m())),x=Math.ceil(Math.log(I)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),M=d(I),k=M.j(E);P(k)||0<k.l(A);)I-=x,M=d(I),k=M.j(E);R(M)&&(M=g),N=N.add(M),A=w(A,k)}return new S(N,A)}t.A=function(A){return V(this,A).h},t.and=function(A){for(var E=Math.max(this.g.length,A.g.length),I=[],x=0;x<E;x++)I[x]=this.i(x)&A.i(x);return new s(I,this.h&A.h)},t.or=function(A){for(var E=Math.max(this.g.length,A.g.length),I=[],x=0;x<E;x++)I[x]=this.i(x)|A.i(x);return new s(I,this.h|A.h)},t.xor=function(A){for(var E=Math.max(this.g.length,A.g.length),I=[],x=0;x<E;x++)I[x]=this.i(x)^A.i(x);return new s(I,this.h^A.h)};function F(A){for(var E=A.g.length+1,I=[],x=0;x<E;x++)I[x]=A.i(x)<<1|A.i(x-1)>>>31;return new s(I,A.h)}function b(A,E){var I=E>>5;E%=32;for(var x=A.g.length-I,N=[],M=0;M<x;M++)N[M]=0<E?A.i(M+I)>>>E|A.i(M+I+1)<<32-E:A.i(M+I);return new s(N,A.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,wE=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=d,s.fromString=h,ei=s}).apply(typeof Mg<"u"?Mg:typeof self<"u"?self:typeof window<"u"?window:{});var Ql=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var AE,ss,RE,pa,sf,xE,PE,kE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,m,y){return f==Array.prototype||f==Object.prototype||(f[m]=y.value),f};function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ql=="object"&&Ql];for(var m=0;m<f.length;++m){var y=f[m];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=n(this);function i(f,m){if(m)e:{var y=r;f=f.split(".");for(var T=0;T<f.length-1;T++){var L=f[T];if(!(L in y))break e;y=y[L]}f=f[f.length-1],T=y[f],m=m(T),m!=T&&m!=null&&e(y,f,{configurable:!0,writable:!0,value:m})}}function o(f,m){f instanceof String&&(f+="");var y=0,T=!1,L={next:function(){if(!T&&y<f.length){var U=y++;return{value:m(U,f[U]),done:!1}}return T=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(f){return f||function(){return o(this,function(m,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},u=this||self;function c(f){var m=typeof f;return m=m!="object"?m:f?Array.isArray(f)?"array":m:"null",m=="array"||m=="object"&&typeof f.length=="number"}function d(f){var m=typeof f;return m=="object"&&f!=null||m=="function"}function h(f,m,y){return f.call.apply(f.bind,arguments)}function p(f,m,y){if(!f)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,T),f.apply(m,L)}}return function(){return f.apply(m,arguments)}}function g(f,m,y){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,g.apply(null,arguments)}function v(f,m){var y=Array.prototype.slice.call(arguments,1);return function(){var T=y.slice();return T.push.apply(T,arguments),f.apply(this,T)}}function R(f,m){function y(){}y.prototype=m.prototype,f.aa=m.prototype,f.prototype=new y,f.prototype.constructor=f,f.Qb=function(T,L,U){for(var K=Array(arguments.length-2),Se=2;Se<arguments.length;Se++)K[Se-2]=arguments[Se];return m.prototype[L].apply(T,K)}}function P(f){const m=f.length;if(0<m){const y=Array(m);for(let T=0;T<m;T++)y[T]=f[T];return y}return[]}function D(f,m){for(let y=1;y<arguments.length;y++){const T=arguments[y];if(c(T)){const L=f.length||0,U=T.length||0;f.length=L+U;for(let K=0;K<U;K++)f[L+K]=T[K]}else f.push(T)}}class w{constructor(m,y){this.i=m,this.j=y,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function _(f){return/^[\s\xa0]*$/.test(f)}function S(){var f=u.navigator;return f&&(f=f.userAgent)?f:""}function V(f){return V[" "](f),f}V[" "]=function(){};var F=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function b(f,m,y){for(const T in f)m.call(y,f[T],T,f)}function A(f,m){for(const y in f)m.call(void 0,f[y],y,f)}function E(f){const m={};for(const y in f)m[y]=f[y];return m}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(f,m){let y,T;for(let L=1;L<arguments.length;L++){T=arguments[L];for(y in T)f[y]=T[y];for(let U=0;U<I.length;U++)y=I[U],Object.prototype.hasOwnProperty.call(T,y)&&(f[y]=T[y])}}function N(f){var m=1;f=f.split(":");const y=[];for(;0<m&&f.length;)y.push(f.shift()),m--;return f.length&&y.push(f.join(":")),y}function M(f){u.setTimeout(()=>{throw f},0)}function k(){var f=ne;let m=null;return f.g&&(m=f.g,f.g=f.g.next,f.g||(f.h=null),m.next=null),m}class He{constructor(){this.h=this.g=null}add(m,y){const T=Oe.get();T.set(m,y),this.h?this.h.next=T:this.g=T,this.h=T}}var Oe=new w(()=>new Nt,f=>f.reset());class Nt{constructor(){this.next=this.g=this.h=null}set(m,y){this.h=m,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let Mt,J=!1,ne=new He,H=()=>{const f=u.Promise.resolve(void 0);Mt=()=>{f.then(fe)}};var fe=()=>{for(var f;f=k();){try{f.h.call(f.g)}catch(y){M(y)}var m=Oe;m.j(f),100>m.h&&(m.h++,f.next=m.g,m.g=f)}J=!1};function Ee(){this.s=this.s,this.C=this.C}Ee.prototype.s=!1,Ee.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ee.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ne(f,m){this.type=f,this.g=this.target=m,this.defaultPrevented=!1}Ne.prototype.h=function(){this.defaultPrevented=!0};var Zt=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var f=!1,m=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const y=()=>{};u.addEventListener("test",y,m),u.removeEventListener("test",y,m)}catch{}return f}();function qt(f,m){if(Ne.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var y=this.type=f.type,T=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=m,m=f.relatedTarget){if(F){e:{try{V(m.nodeName);var L=!0;break e}catch{}L=!1}L||(m=null)}}else y=="mouseover"?m=f.fromElement:y=="mouseout"&&(m=f.toElement);this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:jt[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&qt.aa.h.call(this)}}R(qt,Ne);var jt={2:"touch",3:"pen",4:"mouse"};qt.prototype.h=function(){qt.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var en="closure_listenable_"+(1e6*Math.random()|0),nc=0;function rc(f,m,y,T,L){this.listener=f,this.proxy=null,this.src=m,this.type=y,this.capture=!!T,this.ha=L,this.key=++nc,this.da=this.fa=!1}function vi(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Po(f){this.src=f,this.g={},this.h=0}Po.prototype.add=function(f,m,y,T,L){var U=f.toString();f=this.g[U],f||(f=this.g[U]=[],this.h++);var K=Ur(f,m,T,L);return-1<K?(m=f[K],y||(m.fa=!1)):(m=new rc(m,this.src,U,!!T,L),m.fa=y,f.push(m)),m};function ml(f,m){var y=m.type;if(y in f.g){var T=f.g[y],L=Array.prototype.indexOf.call(T,m,void 0),U;(U=0<=L)&&Array.prototype.splice.call(T,L,1),U&&(vi(m),f.g[y].length==0&&(delete f.g[y],f.h--))}}function Ur(f,m,y,T){for(var L=0;L<f.length;++L){var U=f[L];if(!U.da&&U.listener==m&&U.capture==!!y&&U.ha==T)return L}return-1}var ko="closure_lm_"+(1e6*Math.random()|0),No={};function ic(f,m,y,T,L){if(Array.isArray(m)){for(var U=0;U<m.length;U++)ic(f,m[U],y,T,L);return null}return y=ye(y),f&&f[en]?f.K(m,y,d(T)?!!T.capture:!1,L):oc(f,m,y,!1,T,L)}function oc(f,m,y,T,L,U){if(!m)throw Error("Invalid event type");var K=d(L)?!!L.capture:!!L,Se=ee(f);if(Se||(f[ko]=Se=new Po(f)),y=Se.add(m,y,T,K,U),y.proxy)return y;if(T=O(),y.proxy=T,T.src=f,T.listener=y,f.addEventListener)Zt||(L=K),L===void 0&&(L=!1),f.addEventListener(m.toString(),T,L);else if(f.attachEvent)f.attachEvent(W(m.toString()),T);else if(f.addListener&&f.removeListener)f.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return y}function O(){function f(y){return m.call(f.src,f.listener,y)}const m=X;return f}function B(f,m,y,T,L){if(Array.isArray(m))for(var U=0;U<m.length;U++)B(f,m[U],y,T,L);else T=d(T)?!!T.capture:!!T,y=ye(y),f&&f[en]?(f=f.i,m=String(m).toString(),m in f.g&&(U=f.g[m],y=Ur(U,y,T,L),-1<y&&(vi(U[y]),Array.prototype.splice.call(U,y,1),U.length==0&&(delete f.g[m],f.h--)))):f&&(f=ee(f))&&(m=f.g[m.toString()],f=-1,m&&(f=Ur(m,y,T,L)),(y=-1<f?m[f]:null)&&z(y))}function z(f){if(typeof f!="number"&&f&&!f.da){var m=f.src;if(m&&m[en])ml(m.i,f);else{var y=f.type,T=f.proxy;m.removeEventListener?m.removeEventListener(y,T,f.capture):m.detachEvent?m.detachEvent(W(y),T):m.addListener&&m.removeListener&&m.removeListener(T),(y=ee(m))?(ml(y,f),y.h==0&&(y.src=null,m[ko]=null)):vi(f)}}}function W(f){return f in No?No[f]:No[f]="on"+f}function X(f,m){if(f.da)f=!0;else{m=new qt(m,this);var y=f.listener,T=f.ha||f.src;f.fa&&z(f),f=y.call(T,m)}return f}function ee(f){return f=f[ko],f instanceof Po?f:null}var ae="__closure_events_fn_"+(1e9*Math.random()>>>0);function ye(f){return typeof f=="function"?f:(f[ae]||(f[ae]=function(m){return f.handleEvent(m)}),f[ae])}function ue(){Ee.call(this),this.i=new Po(this),this.M=this,this.F=null}R(ue,Ee),ue.prototype[en]=!0,ue.prototype.removeEventListener=function(f,m,y,T){B(this,f,m,y,T)};function he(f,m){var y,T=f.F;if(T)for(y=[];T;T=T.F)y.push(T);if(f=f.M,T=m.type||m,typeof m=="string")m=new Ne(m,f);else if(m instanceof Ne)m.target=m.target||f;else{var L=m;m=new Ne(T,f),x(m,L)}if(L=!0,y)for(var U=y.length-1;0<=U;U--){var K=m.g=y[U];L=tn(K,T,!0,m)&&L}if(K=m.g=f,L=tn(K,T,!0,m)&&L,L=tn(K,T,!1,m)&&L,y)for(U=0;U<y.length;U++)K=m.g=y[U],L=tn(K,T,!1,m)&&L}ue.prototype.N=function(){if(ue.aa.N.call(this),this.i){var f=this.i,m;for(m in f.g){for(var y=f.g[m],T=0;T<y.length;T++)vi(y[T]);delete f.g[m],f.h--}}this.F=null},ue.prototype.K=function(f,m,y,T){return this.i.add(String(f),m,!1,y,T)},ue.prototype.L=function(f,m,y,T){return this.i.add(String(f),m,!0,y,T)};function tn(f,m,y,T){if(m=f.i.g[String(m)],!m)return!0;m=m.concat();for(var L=!0,U=0;U<m.length;++U){var K=m[U];if(K&&!K.da&&K.capture==y){var Se=K.listener,Ze=K.ha||K.src;K.fa&&ml(f.i,K),L=Se.call(Ze,T)!==!1&&L}}return L&&!T.defaultPrevented}function Mo(f,m,y){if(typeof f=="function")y&&(f=g(f,y));else if(f&&typeof f.handleEvent=="function")f=g(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:u.setTimeout(f,m||0)}function gl(f){f.g=Mo(()=>{f.g=null,f.i&&(f.i=!1,gl(f))},f.l);const m=f.h;f.h=null,f.m.apply(null,m)}class Ct extends Ee{constructor(m,y){super(),this.m=m,this.l=y,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:gl(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $t(f){Ee.call(this),this.h=f,this.g={}}R($t,Ee);var An=[];function dn(f){b(f.g,function(m,y){this.g.hasOwnProperty(y)&&z(m)},f),f.g={}}$t.prototype.N=function(){$t.aa.N.call(this),dn(this)},$t.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Fr=u.JSON.stringify,sc=u.JSON.parse,Do=class{stringify(f){return u.JSON.stringify(f,void 0)}parse(f){return u.JSON.parse(f,void 0)}};function lc(){}lc.prototype.h=null;function Cp(f){return f.h||(f.h=f.i())}function Ip(){}var Vo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ac(){Ne.call(this,"d")}R(ac,Ne);function uc(){Ne.call(this,"c")}R(uc,Ne);var br={},Sp=null;function yl(){return Sp=Sp||new ue}br.La="serverreachability";function wp(f){Ne.call(this,br.La,f)}R(wp,Ne);function Lo(f){const m=yl();he(m,new wp(m))}br.STAT_EVENT="statevent";function Ap(f,m){Ne.call(this,br.STAT_EVENT,f),this.stat=m}R(Ap,Ne);function yt(f){const m=yl();he(m,new Ap(m,f))}br.Ma="timingevent";function Rp(f,m){Ne.call(this,br.Ma,f),this.size=m}R(Rp,Ne);function Uo(f,m){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){f()},m)}function Fo(){this.g=!0}Fo.prototype.xa=function(){this.g=!1};function hI(f,m,y,T,L,U){f.info(function(){if(f.g)if(U)for(var K="",Se=U.split("&"),Ze=0;Ze<Se.length;Ze++){var ve=Se[Ze].split("=");if(1<ve.length){var st=ve[0];ve=ve[1];var lt=st.split("_");K=2<=lt.length&&lt[1]=="type"?K+(st+"="+ve+"&"):K+(st+"=redacted&")}}else K=null;else K=U;return"XMLHTTP REQ ("+T+") [attempt "+L+"]: "+m+`
`+y+`
`+K})}function pI(f,m,y,T,L,U,K){f.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+L+"]: "+m+`
`+y+`
`+U+" "+K})}function _i(f,m,y,T){f.info(function(){return"XMLHTTP TEXT ("+m+"): "+gI(f,y)+(T?" "+T:"")})}function mI(f,m){f.info(function(){return"TIMEOUT: "+m})}Fo.prototype.info=function(){};function gI(f,m){if(!f.g)return m;if(!m)return null;try{var y=JSON.parse(m);if(y){for(f=0;f<y.length;f++)if(Array.isArray(y[f])){var T=y[f];if(!(2>T.length)){var L=T[1];if(Array.isArray(L)&&!(1>L.length)){var U=L[0];if(U!="noop"&&U!="stop"&&U!="close")for(var K=1;K<L.length;K++)L[K]=""}}}}return Fr(y)}catch{return m}}var vl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},xp={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},cc;function _l(){}R(_l,lc),_l.prototype.g=function(){return new XMLHttpRequest},_l.prototype.i=function(){return{}},cc=new _l;function Yn(f,m,y,T){this.j=f,this.i=m,this.l=y,this.R=T||1,this.U=new $t(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Pp}function Pp(){this.i=null,this.g="",this.h=!1}var kp={},dc={};function fc(f,m,y){f.L=1,f.v=Il(Rn(m)),f.m=y,f.P=!0,Np(f,null)}function Np(f,m){f.F=Date.now(),Tl(f),f.A=Rn(f.v);var y=f.A,T=f.R;Array.isArray(T)||(T=[String(T)]),zp(y.i,"t",T),f.C=0,y=f.j.J,f.h=new Pp,f.g=um(f.j,y?m:null,!f.m),0<f.O&&(f.M=new Ct(g(f.Y,f,f.g),f.O)),m=f.U,y=f.g,T=f.ca;var L="readystatechange";Array.isArray(L)||(L&&(An[0]=L.toString()),L=An);for(var U=0;U<L.length;U++){var K=ic(y,L[U],T||m.handleEvent,!1,m.h||m);if(!K)break;m.g[K.key]=K}m=f.H?E(f.H):{},f.m?(f.u||(f.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,m)):(f.u="GET",f.g.ea(f.A,f.u,null,m)),Lo(),hI(f.i,f.u,f.A,f.l,f.R,f.m)}Yn.prototype.ca=function(f){f=f.target;const m=this.M;m&&xn(f)==3?m.j():this.Y(f)},Yn.prototype.Y=function(f){try{if(f==this.g)e:{const lt=xn(this.g);var m=this.g.Ba();const Ci=this.g.Z();if(!(3>lt)&&(lt!=3||this.g&&(this.h.h||this.g.oa()||Zp(this.g)))){this.J||lt!=4||m==7||(m==8||0>=Ci?Lo(3):Lo(2)),hc(this);var y=this.g.Z();this.X=y;t:if(Mp(this)){var T=Zp(this.g);f="";var L=T.length,U=xn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Or(this),bo(this);var K="";break t}this.h.i=new u.TextDecoder}for(m=0;m<L;m++)this.h.h=!0,f+=this.h.i.decode(T[m],{stream:!(U&&m==L-1)});T.length=0,this.h.g+=f,this.C=0,K=this.h.g}else K=this.g.oa();if(this.o=y==200,pI(this.i,this.u,this.A,this.l,this.R,lt,y),this.o){if(this.T&&!this.K){t:{if(this.g){var Se,Ze=this.g;if((Se=Ze.g?Ze.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(Se)){var ve=Se;break t}}ve=null}if(y=ve)_i(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,pc(this,y);else{this.o=!1,this.s=3,yt(12),Or(this),bo(this);break e}}if(this.P){y=!0;let nn;for(;!this.J&&this.C<K.length;)if(nn=yI(this,K),nn==dc){lt==4&&(this.s=4,yt(14),y=!1),_i(this.i,this.l,null,"[Incomplete Response]");break}else if(nn==kp){this.s=4,yt(15),_i(this.i,this.l,K,"[Invalid Chunk]"),y=!1;break}else _i(this.i,this.l,nn,null),pc(this,nn);if(Mp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),lt!=4||K.length!=0||this.h.h||(this.s=1,yt(16),y=!1),this.o=this.o&&y,!y)_i(this.i,this.l,K,"[Invalid Chunked Response]"),Or(this),bo(this);else if(0<K.length&&!this.W){this.W=!0;var st=this.j;st.g==this&&st.ba&&!st.M&&(st.j.info("Great, no buffering proxy detected. Bytes received: "+K.length),Tc(st),st.M=!0,yt(11))}}else _i(this.i,this.l,K,null),pc(this,K);lt==4&&Or(this),this.o&&!this.J&&(lt==4?om(this.j,this):(this.o=!1,Tl(this)))}else VI(this.g),y==400&&0<K.indexOf("Unknown SID")?(this.s=3,yt(12)):(this.s=0,yt(13)),Or(this),bo(this)}}}catch{}finally{}};function Mp(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function yI(f,m){var y=f.C,T=m.indexOf(`
`,y);return T==-1?dc:(y=Number(m.substring(y,T)),isNaN(y)?kp:(T+=1,T+y>m.length?dc:(m=m.slice(T,T+y),f.C=T+y,m)))}Yn.prototype.cancel=function(){this.J=!0,Or(this)};function Tl(f){f.S=Date.now()+f.I,Dp(f,f.I)}function Dp(f,m){if(f.B!=null)throw Error("WatchDog timer not null");f.B=Uo(g(f.ba,f),m)}function hc(f){f.B&&(u.clearTimeout(f.B),f.B=null)}Yn.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(mI(this.i,this.A),this.L!=2&&(Lo(),yt(17)),Or(this),this.s=2,bo(this)):Dp(this,this.S-f)};function bo(f){f.j.G==0||f.J||om(f.j,f)}function Or(f){hc(f);var m=f.M;m&&typeof m.ma=="function"&&m.ma(),f.M=null,dn(f.U),f.g&&(m=f.g,f.g=null,m.abort(),m.ma())}function pc(f,m){try{var y=f.j;if(y.G!=0&&(y.g==f||mc(y.h,f))){if(!f.K&&mc(y.h,f)&&y.G==3){try{var T=y.Da.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var L=T;if(L[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<f.F)Pl(y),Rl(y);else break e;_c(y),yt(18)}}else y.za=L[1],0<y.za-y.T&&37500>L[2]&&y.F&&y.v==0&&!y.C&&(y.C=Uo(g(y.Za,y),6e3));if(1>=Up(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else qr(y,11)}else if((f.K||y.g==f)&&Pl(y),!_(m))for(L=y.Da.g.parse(m),m=0;m<L.length;m++){let ve=L[m];if(y.T=ve[0],ve=ve[1],y.G==2)if(ve[0]=="c"){y.K=ve[1],y.ia=ve[2];const st=ve[3];st!=null&&(y.la=st,y.j.info("VER="+y.la));const lt=ve[4];lt!=null&&(y.Aa=lt,y.j.info("SVER="+y.Aa));const Ci=ve[5];Ci!=null&&typeof Ci=="number"&&0<Ci&&(T=1.5*Ci,y.L=T,y.j.info("backChannelRequestTimeoutMs_="+T)),T=y;const nn=f.g;if(nn){const Nl=nn.g?nn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Nl){var U=T.h;U.g||Nl.indexOf("spdy")==-1&&Nl.indexOf("quic")==-1&&Nl.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(gc(U,U.h),U.h=null))}if(T.D){const Ec=nn.g?nn.g.getResponseHeader("X-HTTP-Session-Id"):null;Ec&&(T.ya=Ec,Ae(T.I,T.D,Ec))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-f.F,y.j.info("Handshake RTT: "+y.R+"ms")),T=y;var K=f;if(T.qa=am(T,T.J?T.ia:null,T.W),K.K){Fp(T.h,K);var Se=K,Ze=T.L;Ze&&(Se.I=Ze),Se.B&&(hc(Se),Tl(Se)),T.g=K}else rm(T);0<y.i.length&&xl(y)}else ve[0]!="stop"&&ve[0]!="close"||qr(y,7);else y.G==3&&(ve[0]=="stop"||ve[0]=="close"?ve[0]=="stop"?qr(y,7):vc(y):ve[0]!="noop"&&y.l&&y.l.ta(ve),y.v=0)}}Lo(4)}catch{}}var vI=class{constructor(f,m){this.g=f,this.map=m}};function Vp(f){this.l=f||10,u.PerformanceNavigationTiming?(f=u.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Lp(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Up(f){return f.h?1:f.g?f.g.size:0}function mc(f,m){return f.h?f.h==m:f.g?f.g.has(m):!1}function gc(f,m){f.g?f.g.add(m):f.h=m}function Fp(f,m){f.h&&f.h==m?f.h=null:f.g&&f.g.has(m)&&f.g.delete(m)}Vp.prototype.cancel=function(){if(this.i=bp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function bp(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let m=f.i;for(const y of f.g.values())m=m.concat(y.D);return m}return P(f.i)}function _I(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(c(f)){for(var m=[],y=f.length,T=0;T<y;T++)m.push(f[T]);return m}m=[],y=0;for(T in f)m[y++]=f[T];return m}function TI(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(c(f)||typeof f=="string"){var m=[];f=f.length;for(var y=0;y<f;y++)m.push(y);return m}m=[],y=0;for(const T in f)m[y++]=T;return m}}}function Op(f,m){if(f.forEach&&typeof f.forEach=="function")f.forEach(m,void 0);else if(c(f)||typeof f=="string")Array.prototype.forEach.call(f,m,void 0);else for(var y=TI(f),T=_I(f),L=T.length,U=0;U<L;U++)m.call(void 0,T[U],y&&y[U],f)}var Bp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function EI(f,m){if(f){f=f.split("&");for(var y=0;y<f.length;y++){var T=f[y].indexOf("="),L=null;if(0<=T){var U=f[y].substring(0,T);L=f[y].substring(T+1)}else U=f[y];m(U,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Br(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Br){this.h=f.h,El(this,f.j),this.o=f.o,this.g=f.g,Cl(this,f.s),this.l=f.l;var m=f.i,y=new qo;y.i=m.i,m.g&&(y.g=new Map(m.g),y.h=m.h),qp(this,y),this.m=f.m}else f&&(m=String(f).match(Bp))?(this.h=!1,El(this,m[1]||"",!0),this.o=Oo(m[2]||""),this.g=Oo(m[3]||"",!0),Cl(this,m[4]),this.l=Oo(m[5]||"",!0),qp(this,m[6]||"",!0),this.m=Oo(m[7]||"")):(this.h=!1,this.i=new qo(null,this.h))}Br.prototype.toString=function(){var f=[],m=this.j;m&&f.push(Bo(m,$p,!0),":");var y=this.g;return(y||m=="file")&&(f.push("//"),(m=this.o)&&f.push(Bo(m,$p,!0),"@"),f.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&f.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&f.push("/"),f.push(Bo(y,y.charAt(0)=="/"?SI:II,!0))),(y=this.i.toString())&&f.push("?",y),(y=this.m)&&f.push("#",Bo(y,AI)),f.join("")};function Rn(f){return new Br(f)}function El(f,m,y){f.j=y?Oo(m,!0):m,f.j&&(f.j=f.j.replace(/:$/,""))}function Cl(f,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);f.s=m}else f.s=null}function qp(f,m,y){m instanceof qo?(f.i=m,RI(f.i,f.h)):(y||(m=Bo(m,wI)),f.i=new qo(m,f.h))}function Ae(f,m,y){f.i.set(m,y)}function Il(f){return Ae(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function Oo(f,m){return f?m?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Bo(f,m,y){return typeof f=="string"?(f=encodeURI(f).replace(m,CI),y&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function CI(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var $p=/[#\/\?@]/g,II=/[#\?:]/g,SI=/[#\?]/g,wI=/[#\?@]/g,AI=/#/g;function qo(f,m){this.h=this.g=null,this.i=f||null,this.j=!!m}function Xn(f){f.g||(f.g=new Map,f.h=0,f.i&&EI(f.i,function(m,y){f.add(decodeURIComponent(m.replace(/\+/g," ")),y)}))}t=qo.prototype,t.add=function(f,m){Xn(this),this.i=null,f=Ti(this,f);var y=this.g.get(f);return y||this.g.set(f,y=[]),y.push(m),this.h+=1,this};function Gp(f,m){Xn(f),m=Ti(f,m),f.g.has(m)&&(f.i=null,f.h-=f.g.get(m).length,f.g.delete(m))}function Hp(f,m){return Xn(f),m=Ti(f,m),f.g.has(m)}t.forEach=function(f,m){Xn(this),this.g.forEach(function(y,T){y.forEach(function(L){f.call(m,L,T,this)},this)},this)},t.na=function(){Xn(this);const f=Array.from(this.g.values()),m=Array.from(this.g.keys()),y=[];for(let T=0;T<m.length;T++){const L=f[T];for(let U=0;U<L.length;U++)y.push(m[T])}return y},t.V=function(f){Xn(this);let m=[];if(typeof f=="string")Hp(this,f)&&(m=m.concat(this.g.get(Ti(this,f))));else{f=Array.from(this.g.values());for(let y=0;y<f.length;y++)m=m.concat(f[y])}return m},t.set=function(f,m){return Xn(this),this.i=null,f=Ti(this,f),Hp(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[m]),this.h+=1,this},t.get=function(f,m){return f?(f=this.V(f),0<f.length?String(f[0]):m):m};function zp(f,m,y){Gp(f,m),0<y.length&&(f.i=null,f.g.set(Ti(f,m),P(y)),f.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],m=Array.from(this.g.keys());for(var y=0;y<m.length;y++){var T=m[y];const U=encodeURIComponent(String(T)),K=this.V(T);for(T=0;T<K.length;T++){var L=U;K[T]!==""&&(L+="="+encodeURIComponent(String(K[T]))),f.push(L)}}return this.i=f.join("&")};function Ti(f,m){return m=String(m),f.j&&(m=m.toLowerCase()),m}function RI(f,m){m&&!f.j&&(Xn(f),f.i=null,f.g.forEach(function(y,T){var L=T.toLowerCase();T!=L&&(Gp(this,T),zp(this,L,y))},f)),f.j=m}function xI(f,m){const y=new Fo;if(u.Image){const T=new Image;T.onload=v(Zn,y,"TestLoadImage: loaded",!0,m,T),T.onerror=v(Zn,y,"TestLoadImage: error",!1,m,T),T.onabort=v(Zn,y,"TestLoadImage: abort",!1,m,T),T.ontimeout=v(Zn,y,"TestLoadImage: timeout",!1,m,T),u.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=f}else m(!1)}function PI(f,m){const y=new Fo,T=new AbortController,L=setTimeout(()=>{T.abort(),Zn(y,"TestPingServer: timeout",!1,m)},1e4);fetch(f,{signal:T.signal}).then(U=>{clearTimeout(L),U.ok?Zn(y,"TestPingServer: ok",!0,m):Zn(y,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(L),Zn(y,"TestPingServer: error",!1,m)})}function Zn(f,m,y,T,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),T(y)}catch{}}function kI(){this.g=new Do}function NI(f,m,y){const T=y||"";try{Op(f,function(L,U){let K=L;d(L)&&(K=Fr(L)),m.push(T+U+"="+encodeURIComponent(K))})}catch(L){throw m.push(T+"type="+encodeURIComponent("_badmap")),L}}function Sl(f){this.l=f.Ub||null,this.j=f.eb||!1}R(Sl,lc),Sl.prototype.g=function(){return new wl(this.l,this.j)},Sl.prototype.i=function(f){return function(){return f}}({});function wl(f,m){ue.call(this),this.D=f,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(wl,ue),t=wl.prototype,t.open=function(f,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=m,this.readyState=1,Go(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(m.body=f),(this.D||u).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,$o(this)),this.readyState=0},t.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Go(this)),this.g&&(this.readyState=3,Go(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Wp(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function Wp(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}t.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var m=f.value?f.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!f.done}))&&(this.response=this.responseText+=m)}f.done?$o(this):Go(this),this.readyState==3&&Wp(this)}},t.Ra=function(f){this.g&&(this.response=this.responseText=f,$o(this))},t.Qa=function(f){this.g&&(this.response=f,$o(this))},t.ga=function(){this.g&&$o(this)};function $o(f){f.readyState=4,f.l=null,f.j=null,f.v=null,Go(f)}t.setRequestHeader=function(f,m){this.u.append(f,m)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],m=this.h.entries();for(var y=m.next();!y.done;)y=y.value,f.push(y[0]+": "+y[1]),y=m.next();return f.join(`\r
`)};function Go(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(wl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function Kp(f){let m="";return b(f,function(y,T){m+=T,m+=":",m+=y,m+=`\r
`}),m}function yc(f,m,y){e:{for(T in y){var T=!1;break e}T=!0}T||(y=Kp(y),typeof f=="string"?y!=null&&encodeURIComponent(String(y)):Ae(f,m,y))}function Ue(f){ue.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(Ue,ue);var MI=/^https?$/i,DI=["POST","PUT"];t=Ue.prototype,t.Ha=function(f){this.J=f},t.ea=function(f,m,y,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);m=m?m.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():cc.g(),this.v=this.o?Cp(this.o):Cp(cc),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(m,String(f),!0),this.B=!1}catch(U){Jp(this,U);return}if(f=y||"",y=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var L in T)y.set(L,T[L]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const U of T.keys())y.set(U,T.get(U));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(y.keys()).find(U=>U.toLowerCase()=="content-type"),L=u.FormData&&f instanceof u.FormData,!(0<=Array.prototype.indexOf.call(DI,m,void 0))||T||L||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,K]of y)this.g.setRequestHeader(U,K);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Xp(this),this.u=!0,this.g.send(f),this.u=!1}catch(U){Jp(this,U)}};function Jp(f,m){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=m,f.m=5,Qp(f),Al(f)}function Qp(f){f.A||(f.A=!0,he(f,"complete"),he(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,he(this,"complete"),he(this,"abort"),Al(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Al(this,!0)),Ue.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Yp(this):this.bb())},t.bb=function(){Yp(this)};function Yp(f){if(f.h&&typeof s<"u"&&(!f.v[1]||xn(f)!=4||f.Z()!=2)){if(f.u&&xn(f)==4)Mo(f.Ea,0,f);else if(he(f,"readystatechange"),xn(f)==4){f.h=!1;try{const K=f.Z();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var y;if(!(y=m)){var T;if(T=K===0){var L=String(f.D).match(Bp)[1]||null;!L&&u.self&&u.self.location&&(L=u.self.location.protocol.slice(0,-1)),T=!MI.test(L?L.toLowerCase():"")}y=T}if(y)he(f,"complete"),he(f,"success");else{f.m=6;try{var U=2<xn(f)?f.g.statusText:""}catch{U=""}f.l=U+" ["+f.Z()+"]",Qp(f)}}finally{Al(f)}}}}function Al(f,m){if(f.g){Xp(f);const y=f.g,T=f.v[0]?()=>{}:null;f.g=null,f.v=null,m||he(f,"ready");try{y.onreadystatechange=T}catch{}}}function Xp(f){f.I&&(u.clearTimeout(f.I),f.I=null)}t.isActive=function(){return!!this.g};function xn(f){return f.g?f.g.readyState:0}t.Z=function(){try{return 2<xn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(f){if(this.g){var m=this.g.responseText;return f&&m.indexOf(f)==0&&(m=m.substring(f.length)),sc(m)}};function Zp(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function VI(f){const m={};f=(f.g&&2<=xn(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<f.length;T++){if(_(f[T]))continue;var y=N(f[T]);const L=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const U=m[L]||[];m[L]=U,U.push(y)}A(m,function(T){return T.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ho(f,m,y){return y&&y.internalChannelParams&&y.internalChannelParams[f]||m}function jp(f){this.Aa=0,this.i=[],this.j=new Fo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ho("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ho("baseRetryDelayMs",5e3,f),this.cb=Ho("retryDelaySeedMs",1e4,f),this.Wa=Ho("forwardChannelMaxRetries",2,f),this.wa=Ho("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new Vp(f&&f.concurrentRequestLimit),this.Da=new kI,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=jp.prototype,t.la=8,t.G=1,t.connect=function(f,m,y,T){yt(0),this.W=f,this.H=m||{},y&&T!==void 0&&(this.H.OSID=y,this.H.OAID=T),this.F=this.X,this.I=am(this,null,this.W),xl(this)};function vc(f){if(em(f),f.G==3){var m=f.U++,y=Rn(f.I);if(Ae(y,"SID",f.K),Ae(y,"RID",m),Ae(y,"TYPE","terminate"),zo(f,y),m=new Yn(f,f.j,m),m.L=2,m.v=Il(Rn(y)),y=!1,u.navigator&&u.navigator.sendBeacon)try{y=u.navigator.sendBeacon(m.v.toString(),"")}catch{}!y&&u.Image&&(new Image().src=m.v,y=!0),y||(m.g=um(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Tl(m)}lm(f)}function Rl(f){f.g&&(Tc(f),f.g.cancel(),f.g=null)}function em(f){Rl(f),f.u&&(u.clearTimeout(f.u),f.u=null),Pl(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&u.clearTimeout(f.s),f.s=null)}function xl(f){if(!Lp(f.h)&&!f.s){f.s=!0;var m=f.Ga;Mt||H(),J||(Mt(),J=!0),ne.add(m,f),f.B=0}}function LI(f,m){return Up(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=m.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=Uo(g(f.Ga,f,m),sm(f,f.B)),f.B++,!0)}t.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const L=new Yn(this,this.j,f);let U=this.o;if(this.S&&(U?(U=E(U),x(U,this.S)):U=this.S),this.m!==null||this.O||(L.H=U,U=null),this.P)e:{for(var m=0,y=0;y<this.i.length;y++){t:{var T=this.i[y];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(m+=T,4096<m){m=y;break e}if(m===4096||y===this.i.length-1){m=y+1;break e}}m=1e3}else m=1e3;m=nm(this,L,m),y=Rn(this.I),Ae(y,"RID",f),Ae(y,"CVER",22),this.D&&Ae(y,"X-HTTP-Session-Id",this.D),zo(this,y),U&&(this.O?m="headers="+encodeURIComponent(String(Kp(U)))+"&"+m:this.m&&yc(y,this.m,U)),gc(this.h,L),this.Ua&&Ae(y,"TYPE","init"),this.P?(Ae(y,"$req",m),Ae(y,"SID","null"),L.T=!0,fc(L,y,null)):fc(L,y,m),this.G=2}}else this.G==3&&(f?tm(this,f):this.i.length==0||Lp(this.h)||tm(this))};function tm(f,m){var y;m?y=m.l:y=f.U++;const T=Rn(f.I);Ae(T,"SID",f.K),Ae(T,"RID",y),Ae(T,"AID",f.T),zo(f,T),f.m&&f.o&&yc(T,f.m,f.o),y=new Yn(f,f.j,y,f.B+1),f.m===null&&(y.H=f.o),m&&(f.i=m.D.concat(f.i)),m=nm(f,y,1e3),y.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),gc(f.h,y),fc(y,T,m)}function zo(f,m){f.H&&b(f.H,function(y,T){Ae(m,T,y)}),f.l&&Op({},function(y,T){Ae(m,T,y)})}function nm(f,m,y){y=Math.min(f.i.length,y);var T=f.l?g(f.l.Na,f.l,f):null;e:{var L=f.i;let U=-1;for(;;){const K=["count="+y];U==-1?0<y?(U=L[0].g,K.push("ofs="+U)):U=0:K.push("ofs="+U);let Se=!0;for(let Ze=0;Ze<y;Ze++){let ve=L[Ze].g;const st=L[Ze].map;if(ve-=U,0>ve)U=Math.max(0,L[Ze].g-100),Se=!1;else try{NI(st,K,"req"+ve+"_")}catch{T&&T(st)}}if(Se){T=K.join("&");break e}}}return f=f.i.splice(0,y),m.D=f,T}function rm(f){if(!f.g&&!f.u){f.Y=1;var m=f.Fa;Mt||H(),J||(Mt(),J=!0),ne.add(m,f),f.v=0}}function _c(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=Uo(g(f.Fa,f),sm(f,f.v)),f.v++,!0)}t.Fa=function(){if(this.u=null,im(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=Uo(g(this.ab,this),f)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,yt(10),Rl(this),im(this))};function Tc(f){f.A!=null&&(u.clearTimeout(f.A),f.A=null)}function im(f){f.g=new Yn(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var m=Rn(f.qa);Ae(m,"RID","rpc"),Ae(m,"SID",f.K),Ae(m,"AID",f.T),Ae(m,"CI",f.F?"0":"1"),!f.F&&f.ja&&Ae(m,"TO",f.ja),Ae(m,"TYPE","xmlhttp"),zo(f,m),f.m&&f.o&&yc(m,f.m,f.o),f.L&&(f.g.I=f.L);var y=f.g;f=f.ia,y.L=1,y.v=Il(Rn(m)),y.m=null,y.P=!0,Np(y,f)}t.Za=function(){this.C!=null&&(this.C=null,Rl(this),_c(this),yt(19))};function Pl(f){f.C!=null&&(u.clearTimeout(f.C),f.C=null)}function om(f,m){var y=null;if(f.g==m){Pl(f),Tc(f),f.g=null;var T=2}else if(mc(f.h,m))y=m.D,Fp(f.h,m),T=1;else return;if(f.G!=0){if(m.o)if(T==1){y=m.m?m.m.length:0,m=Date.now()-m.F;var L=f.B;T=yl(),he(T,new Rp(T,y)),xl(f)}else rm(f);else if(L=m.s,L==3||L==0&&0<m.X||!(T==1&&LI(f,m)||T==2&&_c(f)))switch(y&&0<y.length&&(m=f.h,m.i=m.i.concat(y)),L){case 1:qr(f,5);break;case 4:qr(f,10);break;case 3:qr(f,6);break;default:qr(f,2)}}}function sm(f,m){let y=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(y*=2),y*m}function qr(f,m){if(f.j.info("Error code "+m),m==2){var y=g(f.fb,f),T=f.Xa;const L=!T;T=new Br(T||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||El(T,"https"),Il(T),L?xI(T.toString(),y):PI(T.toString(),y)}else yt(2);f.G=0,f.l&&f.l.sa(m),lm(f),em(f)}t.fb=function(f){f?(this.j.info("Successfully pinged google.com"),yt(2)):(this.j.info("Failed to ping google.com"),yt(1))};function lm(f){if(f.G=0,f.ka=[],f.l){const m=bp(f.h);(m.length!=0||f.i.length!=0)&&(D(f.ka,m),D(f.ka,f.i),f.h.i.length=0,P(f.i),f.i.length=0),f.l.ra()}}function am(f,m,y){var T=y instanceof Br?Rn(y):new Br(y);if(T.g!="")m&&(T.g=m+"."+T.g),Cl(T,T.s);else{var L=u.location;T=L.protocol,m=m?m+"."+L.hostname:L.hostname,L=+L.port;var U=new Br(null);T&&El(U,T),m&&(U.g=m),L&&Cl(U,L),y&&(U.l=y),T=U}return y=f.D,m=f.ya,y&&m&&Ae(T,y,m),Ae(T,"VER",f.la),zo(f,T),T}function um(f,m,y){if(m&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=f.Ca&&!f.pa?new Ue(new Sl({eb:y})):new Ue(f.pa),m.Ha(f.J),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function cm(){}t=cm.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function kl(){}kl.prototype.g=function(f,m){return new Dt(f,m)};function Dt(f,m){ue.call(this),this.g=new jp(m),this.l=f,this.h=m&&m.messageUrlParams||null,f=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(f?f["X-WebChannel-Content-Type"]=m.messageContentType:f={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(f?f["X-WebChannel-Client-Profile"]=m.va:f={"X-WebChannel-Client-Profile":m.va}),this.g.S=f,(f=m&&m.Sb)&&!_(f)&&(this.g.m=f),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!_(m)&&(this.g.D=m,f=this.h,f!==null&&m in f&&(f=this.h,m in f&&delete f[m])),this.j=new Ei(this)}R(Dt,ue),Dt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Dt.prototype.close=function(){vc(this.g)},Dt.prototype.o=function(f){var m=this.g;if(typeof f=="string"){var y={};y.__data__=f,f=y}else this.u&&(y={},y.__data__=Fr(f),f=y);m.i.push(new vI(m.Ya++,f)),m.G==3&&xl(m)},Dt.prototype.N=function(){this.g.l=null,delete this.j,vc(this.g),delete this.g,Dt.aa.N.call(this)};function dm(f){ac.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var m=f.__sm__;if(m){e:{for(const y in m){f=y;break e}f=void 0}(this.i=f)&&(f=this.i,m=m!==null&&f in m?m[f]:void 0),this.data=m}else this.data=f}R(dm,ac);function fm(){uc.call(this),this.status=1}R(fm,uc);function Ei(f){this.g=f}R(Ei,cm),Ei.prototype.ua=function(){he(this.g,"a")},Ei.prototype.ta=function(f){he(this.g,new dm(f))},Ei.prototype.sa=function(f){he(this.g,new fm)},Ei.prototype.ra=function(){he(this.g,"b")},kl.prototype.createWebChannel=kl.prototype.g,Dt.prototype.send=Dt.prototype.o,Dt.prototype.open=Dt.prototype.m,Dt.prototype.close=Dt.prototype.close,kE=function(){return new kl},PE=function(){return yl()},xE=br,sf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},vl.NO_ERROR=0,vl.TIMEOUT=8,vl.HTTP_ERROR=6,pa=vl,xp.COMPLETE="complete",RE=xp,Ip.EventType=Vo,Vo.OPEN="a",Vo.CLOSE="b",Vo.ERROR="c",Vo.MESSAGE="d",ue.prototype.listen=ue.prototype.K,ss=Ip,Ue.prototype.listenOnce=Ue.prototype.L,Ue.prototype.getLastError=Ue.prototype.Ka,Ue.prototype.getLastErrorCode=Ue.prototype.Ba,Ue.prototype.getStatus=Ue.prototype.Z,Ue.prototype.getResponseJson=Ue.prototype.Oa,Ue.prototype.getResponseText=Ue.prototype.oa,Ue.prototype.send=Ue.prototype.ea,Ue.prototype.setWithCredentials=Ue.prototype.Ha,AE=Ue}).apply(typeof Ql<"u"?Ql:typeof self<"u"?self:typeof window<"u"?window:{});const Dg="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}dt.UNAUTHENTICATED=new dt(null),dt.GOOGLE_CREDENTIALS=new dt("google-credentials-uid"),dt.FIRST_PARTY=new dt("first-party-uid"),dt.MOCK_USER=new dt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Eo="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const li=new kh("@firebase/firestore");function es(){return li.logLevel}function Z(t,...e){if(li.logLevel<=pe.DEBUG){const n=e.map(Dh);li.debug(`Firestore (${Eo}): ${t}`,...n)}}function Gn(t,...e){if(li.logLevel<=pe.ERROR){const n=e.map(Dh);li.error(`Firestore (${Eo}): ${t}`,...n)}}function ao(t,...e){if(li.logLevel<=pe.WARN){const n=e.map(Dh);li.warn(`Firestore (${Eo}): ${t}`,...n)}}function Dh(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ie(t="Unexpected state"){const e=`FIRESTORE (${Eo}) INTERNAL ASSERTION FAILED: `+t;throw Gn(e),new Error(e)}function Ie(t,e){t||ie()}function se(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class j extends Jn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class GR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(dt.UNAUTHENTICATED))}shutdown(){}}class HR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class zR{constructor(e){this.t=e,this.currentUser=dt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ie(this.o===void 0);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let o=new Sr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Sr,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const c=o;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},u=c=>{Z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(Z("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Sr)}},0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ie(typeof r.accessToken=="string"),new NE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ie(e===null||typeof e=="string"),new dt(e)}}class WR{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=dt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class KR{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new WR(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(dt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class JR{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class QR{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ie(this.o===void 0);const r=o=>{o.error!=null&&Z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,Z("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{Z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):Z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ie(typeof n.token=="string"),this.R=n.token,new JR(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YR(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=YR(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}}function _e(t,e){return t<e?-1:t>e?1:0}function uo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new j($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new j($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new j($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new j($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Je.fromMillis(Date.now())}static fromDate(e){return Je.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Je(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?_e(this.nanoseconds,e.nanoseconds):_e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new oe(e)}static min(){return new oe(new Je(0,0))}static max(){return new oe(new Je(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e,n,r){n===void 0?n=0:n>e.length&&ie(),r===void 0?r=e.length-n:r>e.length-n&&ie(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Hs.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Hs?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class be extends Hs{construct(e,n,r){return new be(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new j($.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new be(n)}static emptyPath(){return new be([])}}const XR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tt extends Hs{construct(e,n,r){return new tt(e,n,r)}static isValidIdentifier(e){return XR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new tt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new j($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const u=e[i];if(u==="\\"){if(i+1===e.length)throw new j($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new j($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else u==="`"?(s=!s,i++):u!=="."||s?(r+=u,i++):(o(),i++)}if(o(),s)throw new j($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tt(n)}static emptyPath(){return new tt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.path=e}static fromPath(e){return new te(be.fromString(e))}static fromName(e){return new te(be.fromString(e).popFirst(5))}static empty(){return new te(be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return be.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new te(new be(e.slice()))}}function ZR(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=oe.fromTimestamp(r===1e9?new Je(n+1,0):new Je(n,r));return new xr(i,te.empty(),e)}function jR(t){return new xr(t.readTime,t.key,-1)}class xr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new xr(oe.min(),te.empty(),-1)}static max(){return new xr(oe.max(),te.empty(),-1)}}function ex(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=te.comparator(t.documentKey,e.documentKey),n!==0?n:_e(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nx{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ol(t){if(t.code!==$.FAILED_PRECONDITION||t.message!==tx)throw t;Z("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ie(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new q((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof q?n:q.resolve(n)}catch(n){return q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):q.reject(n)}static resolve(e){return new q((n,r)=>{n(e)})}static reject(e){return new q((n,r)=>{r(e)})}static waitFor(e){return new q((n,r)=>{let i=0,o=0,s=!1;e.forEach(u=>{++i,u.next(()=>{++o,s&&o===i&&n()},c=>r(c))}),s=!0,o===i&&n()})}static or(e){let n=q.resolve(!1);for(const r of e)n=n.next(i=>i?q.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new q((r,i)=>{const o=e.length,s=new Array(o);let u=0;for(let c=0;c<o;c++){const d=c;n(e[d]).next(h=>{s[d]=h,++u,u===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new q((r,i)=>{const o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}}function rx(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function sl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Vh.oe=-1;function Vu(t){return t==null}function ja(t){return t===0&&1/t==-1/0}function ix(t){return typeof t=="number"&&Number.isInteger(t)&&!ja(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function pi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function DE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e,n){this.comparator=e,this.root=n||et.EMPTY}insert(e,n){return new Le(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,et.BLACK,null,null))}remove(e){return new Le(this.comparator,this.root.remove(e,this.comparator).copy(null,null,et.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Yl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Yl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Yl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Yl(this.root,e,this.comparator,!0)}}class Yl{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class et{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??et.RED,this.left=i??et.EMPTY,this.right=o??et.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new et(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return et.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return et.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,et.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,et.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ie();const e=this.left.check();if(e!==this.right.check())throw ie();return e+(this.isRed()?0:1)}}et.EMPTY=null,et.RED=!0,et.BLACK=!1;et.EMPTY=new class{constructor(){this.size=0}get key(){throw ie()}get value(){throw ie()}get color(){throw ie()}get left(){throw ie()}get right(){throw ie()}copy(e,n,r,i,o){return this}insert(e,n,r){return new et(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e){this.comparator=e,this.data=new Le(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Lg(this.data.getIterator())}getIteratorFrom(e){return new Lg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof rt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new rt(this.comparator);return n.data=e,n}}class Lg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.fields=e,e.sort(tt.comparator)}static empty(){return new Ut([])}unionWith(e){let n=new rt(tt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ut(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return uo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new VE("Invalid base64 string: "+o):o}}(e);return new ot(n)}static fromUint8Array(e){const n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new ot(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return _e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ot.EMPTY_BYTE_STRING=new ot("");const ox=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pr(t){if(Ie(!!t),typeof t=="string"){let e=0;const n=ox.exec(t);if(Ie(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Be(t.seconds),nanos:Be(t.nanos)}}function Be(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ai(t){return typeof t=="string"?ot.fromBase64String(t):ot.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lh(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Uh(t){const e=t.mapValue.fields.__previous_value__;return Lh(e)?Uh(e):e}function zs(t){const e=Pr(t.mapValue.fields.__local_write_time__.timestampValue);return new Je(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e,n,r,i,o,s,u,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=d}}class Ws{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ws("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ws&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xl={mapValue:{}};function ui(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Lh(t)?4:ax(t)?9007199254740991:lx(t)?10:11:ie()}function In(t,e){if(t===e)return!0;const n=ui(t);if(n!==ui(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return zs(t).isEqual(zs(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=Pr(i.timestampValue),u=Pr(o.timestampValue);return s.seconds===u.seconds&&s.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return ai(i.bytesValue).isEqual(ai(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Be(i.geoPointValue.latitude)===Be(o.geoPointValue.latitude)&&Be(i.geoPointValue.longitude)===Be(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Be(i.integerValue)===Be(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=Be(i.doubleValue),u=Be(o.doubleValue);return s===u?ja(s)===ja(u):isNaN(s)&&isNaN(u)}return!1}(t,e);case 9:return uo(t.arrayValue.values||[],e.arrayValue.values||[],In);case 10:case 11:return function(i,o){const s=i.mapValue.fields||{},u=o.mapValue.fields||{};if(Vg(s)!==Vg(u))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(u[c]===void 0||!In(s[c],u[c])))return!1;return!0}(t,e);default:return ie()}}function Ks(t,e){return(t.values||[]).find(n=>In(n,e))!==void 0}function co(t,e){if(t===e)return 0;const n=ui(t),r=ui(e);if(n!==r)return _e(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return _e(t.booleanValue,e.booleanValue);case 2:return function(o,s){const u=Be(o.integerValue||o.doubleValue),c=Be(s.integerValue||s.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(t,e);case 3:return Ug(t.timestampValue,e.timestampValue);case 4:return Ug(zs(t),zs(e));case 5:return _e(t.stringValue,e.stringValue);case 6:return function(o,s){const u=ai(o),c=ai(s);return u.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){const u=o.split("/"),c=s.split("/");for(let d=0;d<u.length&&d<c.length;d++){const h=_e(u[d],c[d]);if(h!==0)return h}return _e(u.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){const u=_e(Be(o.latitude),Be(s.latitude));return u!==0?u:_e(Be(o.longitude),Be(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Fg(t.arrayValue,e.arrayValue);case 10:return function(o,s){var u,c,d,h;const p=o.fields||{},g=s.fields||{},v=(u=p.value)===null||u===void 0?void 0:u.arrayValue,R=(c=g.value)===null||c===void 0?void 0:c.arrayValue,P=_e(((d=v==null?void 0:v.values)===null||d===void 0?void 0:d.length)||0,((h=R==null?void 0:R.values)===null||h===void 0?void 0:h.length)||0);return P!==0?P:Fg(v,R)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===Xl.mapValue&&s===Xl.mapValue)return 0;if(o===Xl.mapValue)return 1;if(s===Xl.mapValue)return-1;const u=o.fields||{},c=Object.keys(u),d=s.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){const g=_e(c[p],h[p]);if(g!==0)return g;const v=co(u[c[p]],d[h[p]]);if(v!==0)return v}return _e(c.length,h.length)}(t.mapValue,e.mapValue);default:throw ie()}}function Ug(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return _e(t,e);const n=Pr(t),r=Pr(e),i=_e(n.seconds,r.seconds);return i!==0?i:_e(n.nanos,r.nanos)}function Fg(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=co(n[i],r[i]);if(o)return o}return _e(n.length,r.length)}function fo(t){return lf(t)}function lf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Pr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ai(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return te.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=lf(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${lf(n.fields[s])}`;return i+"}"}(t.mapValue):ie()}function af(t){return!!t&&"integerValue"in t}function Fh(t){return!!t&&"arrayValue"in t}function bg(t){return!!t&&"nullValue"in t}function Og(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ma(t){return!!t&&"mapValue"in t}function lx(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function _s(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return pi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=_s(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=_s(t.arrayValue.values[n]);return e}return Object.assign({},t)}function ax(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.value=e}static empty(){return new St({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ma(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=_s(n)}setAll(e){let n=tt.emptyPath(),r={},i=[];e.forEach((s,u)=>{if(!n.isImmediateParentOf(u)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=u.popLast()}s?r[u.lastSegment()]=_s(s):i.push(u.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());ma(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return In(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];ma(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){pi(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new St(_s(this.value))}}function LE(t){const e=[];return pi(t.fields,(n,r)=>{const i=new tt([n]);if(ma(r)){const o=LE(r.mapValue).fields;if(o.length===0)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new Ut(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,n,r,i,o,s,u){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=u}static newInvalidDocument(e){return new ht(e,0,oe.min(),oe.min(),oe.min(),St.empty(),0)}static newFoundDocument(e,n,r,i){return new ht(e,1,n,oe.min(),r,i,0)}static newNoDocument(e,n){return new ht(e,2,n,oe.min(),oe.min(),St.empty(),0)}static newUnknownDocument(e,n){return new ht(e,3,n,oe.min(),oe.min(),St.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=St.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=St.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ht&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ht(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e,n){this.position=e,this.inclusive=n}}function Bg(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(o.field.isKeyField()?r=te.comparator(te.fromName(s.referenceValue),n.key):r=co(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function qg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!In(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e,n="asc"){this.field=e,this.dir=n}}function ux(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{}class We extends UE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new dx(e,n,r):n==="array-contains"?new px(e,r):n==="in"?new mx(e,r):n==="not-in"?new gx(e,r):n==="array-contains-any"?new yx(e,r):new We(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new fx(e,r):new hx(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(co(n,this.value)):n!==null&&ui(this.value)===ui(n)&&this.matchesComparison(co(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ie()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Sn extends UE{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Sn(e,n)}matches(e){return FE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function FE(t){return t.op==="and"}function bE(t){return cx(t)&&FE(t)}function cx(t){for(const e of t.filters)if(e instanceof Sn)return!1;return!0}function uf(t){if(t instanceof We)return t.field.canonicalString()+t.op.toString()+fo(t.value);if(bE(t))return t.filters.map(e=>uf(e)).join(",");{const e=t.filters.map(n=>uf(n)).join(",");return`${t.op}(${e})`}}function OE(t,e){return t instanceof We?function(r,i){return i instanceof We&&r.op===i.op&&r.field.isEqual(i.field)&&In(r.value,i.value)}(t,e):t instanceof Sn?function(r,i){return i instanceof Sn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,u)=>o&&OE(s,i.filters[u]),!0):!1}(t,e):void ie()}function BE(t){return t instanceof We?function(n){return`${n.field.canonicalString()} ${n.op} ${fo(n.value)}`}(t):t instanceof Sn?function(n){return n.op.toString()+" {"+n.getFilters().map(BE).join(" ,")+"}"}(t):"Filter"}class dx extends We{constructor(e,n,r){super(e,n,r),this.key=te.fromName(r.referenceValue)}matches(e){const n=te.comparator(e.key,this.key);return this.matchesComparison(n)}}class fx extends We{constructor(e,n){super(e,"in",n),this.keys=qE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class hx extends We{constructor(e,n){super(e,"not-in",n),this.keys=qE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function qE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>te.fromName(r.referenceValue))}class px extends We{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Fh(n)&&Ks(n.arrayValue,this.value)}}class mx extends We{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ks(this.value.arrayValue,n)}}class gx extends We{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ks(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ks(this.value.arrayValue,n)}}class yx extends We{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Fh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ks(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(e,n=null,r=[],i=[],o=null,s=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=u,this.ue=null}}function $g(t,e=null,n=[],r=[],i=null,o=null,s=null){return new vx(t,e,n,r,i,o,s)}function bh(t){const e=se(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>uf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Vu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>fo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>fo(r)).join(",")),e.ue=n}return e.ue}function Oh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!ux(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!OE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!qg(t.startAt,e.startAt)&&qg(t.endAt,e.endAt)}function cf(t){return te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e,n=null,r=[],i=[],o=null,s="F",u=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=u,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function _x(t,e,n,r,i,o,s,u){return new Lu(t,e,n,r,i,o,s,u)}function Uu(t){return new Lu(t)}function Gg(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Tx(t){return t.collectionGroup!==null}function Ts(t){const e=se(t);if(e.ce===null){e.ce=[];const n=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let u=new rt(tt.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(u=u.add(d.field))})}),u})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new tu(o,r))}),n.has(tt.keyField().canonicalString())||e.ce.push(new tu(tt.keyField(),r))}return e.ce}function yn(t){const e=se(t);return e.le||(e.le=Ex(e,Ts(t))),e.le}function Ex(t,e){if(t.limitType==="F")return $g(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new tu(i.field,o)});const n=t.endAt?new eu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new eu(t.startAt.position,t.startAt.inclusive):null;return $g(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function df(t,e,n){return new Lu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Fu(t,e){return Oh(yn(t),yn(e))&&t.limitType===e.limitType}function $E(t){return`${bh(yn(t))}|lt:${t.limitType}`}function Si(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>BE(i)).join(", ")}]`),Vu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>fo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>fo(i)).join(",")),`Target(${r})`}(yn(t))}; limitType=${t.limitType})`}function bu(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):te.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of Ts(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,u,c){const d=Bg(s,u,c);return s.inclusive?d<=0:d<0}(r.startAt,Ts(r),i)||r.endAt&&!function(s,u,c){const d=Bg(s,u,c);return s.inclusive?d>=0:d>0}(r.endAt,Ts(r),i))}(t,e)}function Cx(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function GE(t){return(e,n)=>{let r=!1;for(const i of Ts(t)){const o=Ix(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function Ix(t,e,n){const r=t.field.isKeyField()?te.comparator(e.key,n.key):function(o,s,u){const c=s.data.field(o),d=u.data.field(o);return c!==null&&d!==null?co(c,d):ie()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ie()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){pi(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return DE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sx=new Le(te.comparator);function Hn(){return Sx}const HE=new Le(te.comparator);function ls(...t){let e=HE;for(const n of t)e=e.insert(n.key,n);return e}function zE(t){let e=HE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Xr(){return Es()}function WE(){return Es()}function Es(){return new Co(t=>t.toString(),(t,e)=>t.isEqual(e))}const wx=new Le(te.comparator),Ax=new rt(te.comparator);function de(...t){let e=Ax;for(const n of t)e=e.add(n);return e}const Rx=new rt(_e);function xx(){return Rx}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bh(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ja(e)?"-0":e}}function KE(t){return{integerValue:""+t}}function Px(t,e){return ix(e)?KE(e):Bh(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(){this._=void 0}}function kx(t,e,n){return t instanceof nu?function(i,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Lh(o)&&(o=Uh(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof Js?QE(t,e):t instanceof Qs?YE(t,e):function(i,o){const s=JE(i,o),u=Hg(s)+Hg(i.Pe);return af(s)&&af(i.Pe)?KE(u):Bh(i.serializer,u)}(t,e)}function Nx(t,e,n){return t instanceof Js?QE(t,e):t instanceof Qs?YE(t,e):n}function JE(t,e){return t instanceof ru?function(r){return af(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class nu extends Ou{}class Js extends Ou{constructor(e){super(),this.elements=e}}function QE(t,e){const n=XE(e);for(const r of t.elements)n.some(i=>In(i,r))||n.push(r);return{arrayValue:{values:n}}}class Qs extends Ou{constructor(e){super(),this.elements=e}}function YE(t,e){let n=XE(e);for(const r of t.elements)n=n.filter(i=>!In(i,r));return{arrayValue:{values:n}}}class ru extends Ou{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Hg(t){return Be(t.integerValue||t.doubleValue)}function XE(t){return Fh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Mx(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Js&&i instanceof Js||r instanceof Qs&&i instanceof Qs?uo(r.elements,i.elements,In):r instanceof ru&&i instanceof ru?In(r.Pe,i.Pe):r instanceof nu&&i instanceof nu}(t.transform,e.transform)}class Dx{constructor(e,n){this.version=e,this.transformResults=n}}class vn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new vn}static exists(e){return new vn(void 0,e)}static updateTime(e){return new vn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ga(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Bu{}function ZE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new eC(t.key,vn.none()):new ll(t.key,t.data,vn.none());{const n=t.data,r=St.empty();let i=new rt(tt.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Lr(t.key,r,new Ut(i.toArray()),vn.none())}}function Vx(t,e,n){t instanceof ll?function(i,o,s){const u=i.value.clone(),c=Wg(i.fieldTransforms,o,s.transformResults);u.setAll(c),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):t instanceof Lr?function(i,o,s){if(!ga(i.precondition,o))return void o.convertToUnknownDocument(s.version);const u=Wg(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(jE(i)),c.setAll(u),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Cs(t,e,n,r){return t instanceof ll?function(o,s,u,c){if(!ga(o.precondition,s))return u;const d=o.value.clone(),h=Kg(o.fieldTransforms,c,s);return d.setAll(h),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Lr?function(o,s,u,c){if(!ga(o.precondition,s))return u;const d=Kg(o.fieldTransforms,c,s),h=s.data;return h.setAll(jE(o)),h.setAll(d),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(o,s,u){return ga(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):u}(t,e,n)}function Lx(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=JE(r.transform,i||null);o!=null&&(n===null&&(n=St.empty()),n.set(r.field,o))}return n||null}function zg(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&uo(r,i,(o,s)=>Mx(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ll extends Bu{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Lr extends Bu{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function jE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Wg(t,e,n){const r=new Map;Ie(t.length===n.length);for(let i=0;i<n.length;i++){const o=t[i],s=o.transform,u=e.data.field(o.field);r.set(o.field,Nx(s,u,n[i]))}return r}function Kg(t,e,n){const r=new Map;for(const i of t){const o=i.transform,s=n.data.field(i.field);r.set(i.field,kx(o,s,e))}return r}class eC extends Bu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ux extends Bu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&Vx(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Cs(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Cs(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=WE();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let u=this.applyToLocalView(s,o.mutatedFields);u=n.has(i.key)?null:u;const c=ZE(s,u);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(oe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),de())}isEqual(e){return this.batchId===e.batchId&&uo(this.mutations,e.mutations,(n,r)=>zg(n,r))&&uo(this.baseMutations,e.baseMutations,(n,r)=>zg(n,r))}}class qh{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ie(e.mutations.length===r.length);let i=function(){return wx}();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new qh(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $e,me;function Bx(t){switch(t){default:return ie();case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0}}function tC(t){if(t===void 0)return Gn("GRPC error has no .code"),$.UNKNOWN;switch(t){case $e.OK:return $.OK;case $e.CANCELLED:return $.CANCELLED;case $e.UNKNOWN:return $.UNKNOWN;case $e.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case $e.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case $e.INTERNAL:return $.INTERNAL;case $e.UNAVAILABLE:return $.UNAVAILABLE;case $e.UNAUTHENTICATED:return $.UNAUTHENTICATED;case $e.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case $e.NOT_FOUND:return $.NOT_FOUND;case $e.ALREADY_EXISTS:return $.ALREADY_EXISTS;case $e.PERMISSION_DENIED:return $.PERMISSION_DENIED;case $e.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case $e.ABORTED:return $.ABORTED;case $e.OUT_OF_RANGE:return $.OUT_OF_RANGE;case $e.UNIMPLEMENTED:return $.UNIMPLEMENTED;case $e.DATA_LOSS:return $.DATA_LOSS;default:return ie()}}(me=$e||($e={}))[me.OK=0]="OK",me[me.CANCELLED=1]="CANCELLED",me[me.UNKNOWN=2]="UNKNOWN",me[me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",me[me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",me[me.NOT_FOUND=5]="NOT_FOUND",me[me.ALREADY_EXISTS=6]="ALREADY_EXISTS",me[me.PERMISSION_DENIED=7]="PERMISSION_DENIED",me[me.UNAUTHENTICATED=16]="UNAUTHENTICATED",me[me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",me[me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",me[me.ABORTED=10]="ABORTED",me[me.OUT_OF_RANGE=11]="OUT_OF_RANGE",me[me.UNIMPLEMENTED=12]="UNIMPLEMENTED",me[me.INTERNAL=13]="INTERNAL",me[me.UNAVAILABLE=14]="UNAVAILABLE",me[me.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qx(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x=new ei([4294967295,4294967295],0);function Jg(t){const e=qx().encode(t),n=new wE;return n.update(e),new Uint8Array(n.digest())}function Qg(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ei([n,r],0),new ei([i,o],0)]}class $h{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new as(`Invalid padding: ${n}`);if(r<0)throw new as(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new as(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new as(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ei.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(ei.fromNumber(r)));return i.compare($x)===1&&(i=new ei([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Jg(e),[r,i]=Qg(n);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new $h(o,i,n);return r.forEach(u=>s.insert(u)),s}insert(e){if(this.Ie===0)return;const n=Jg(e),[r,i]=Qg(n);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class as extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,al.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new qu(oe.min(),i,new Le(_e),Hn(),de())}}class al{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new al(r,n,de(),de(),de())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class nC{constructor(e,n){this.targetId=e,this.me=n}}class rC{constructor(e,n,r=ot.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Yg{constructor(){this.fe=0,this.ge=Zg(),this.pe=ot.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=de(),n=de(),r=de();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ie()}}),new al(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Zg()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ie(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Gx{constructor(e){this.Le=e,this.Be=new Map,this.ke=Hn(),this.qe=Xg(),this.Qe=new Le(_e)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ie()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const o=i.target;if(cf(o))if(r===0){const s=new te(o.path);this.Ue(n,s,ht.newNoDocument(s,oe.min()))}else Ie(r===1);else{const s=this.Ye(n);if(s!==r){const u=this.Ze(e),c=u?this.Xe(u,e,s):1;if(c!==0){this.je(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,u;try{s=ai(r).toUint8Array()}catch(c){if(c instanceof VE)return ao("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new $h(s,i,o)}catch(c){return ao(c instanceof as?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.Ie===0?null:u}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const s=this.Le.tt(),u=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.Ue(n,o,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((o,s)=>{const u=this.Je(s);if(u){if(o.current&&cf(u.target)){const c=new te(u.target.path);this.ke.get(c)!==null||this.it(s,c)||this.Ue(s,c,ht.newNoDocument(c,e))}o.be&&(n.set(s,o.ve()),o.Ce())}});let r=de();this.qe.forEach((o,s)=>{let u=!0;s.forEachWhile(c=>{const d=this.Je(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));const i=new qu(e,n,this.Qe,this.ke,r);return this.ke=Hn(),this.qe=Xg(),this.Qe=new Le(_e),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Yg,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new rt(_e),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Z("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Yg),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Xg(){return new Le(te.comparator)}function Zg(){return new Le(te.comparator)}const Hx={asc:"ASCENDING",desc:"DESCENDING"},zx={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Wx={and:"AND",or:"OR"};class Kx{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ff(t,e){return t.useProto3Json||Vu(e)?e:{value:e}}function iu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function iC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Jx(t,e){return iu(t,e.toTimestamp())}function _n(t){return Ie(!!t),oe.fromTimestamp(function(n){const r=Pr(n);return new Je(r.seconds,r.nanos)}(t))}function Gh(t,e){return hf(t,e).canonicalString()}function hf(t,e){const n=function(i){return new be(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function oC(t){const e=be.fromString(t);return Ie(cC(e)),e}function pf(t,e){return Gh(t.databaseId,e.path)}function jc(t,e){const n=oC(e);if(n.get(1)!==t.databaseId.projectId)throw new j($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new j($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new te(lC(n))}function sC(t,e){return Gh(t.databaseId,e)}function Qx(t){const e=oC(t);return e.length===4?be.emptyPath():lC(e)}function mf(t){return new be(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function lC(t){return Ie(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function jg(t,e,n){return{name:pf(t,e),fields:n.value.mapValue.fields}}function Yx(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ie()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(d,h){return d.useProto3Json?(Ie(h===void 0||typeof h=="string"),ot.fromBase64String(h||"")):(Ie(h===void 0||h instanceof Buffer||h instanceof Uint8Array),ot.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,u=s&&function(d){const h=d.code===void 0?$.UNKNOWN:tC(d.code);return new j(h,d.message||"")}(s);n=new rC(r,i,o,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=jc(t,r.document.name),o=_n(r.document.updateTime),s=r.document.createTime?_n(r.document.createTime):oe.min(),u=new St({mapValue:{fields:r.document.fields}}),c=ht.newFoundDocument(i,o,s,u),d=r.targetIds||[],h=r.removedTargetIds||[];n=new ya(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=jc(t,r.document),o=r.readTime?_n(r.readTime):oe.min(),s=ht.newNoDocument(i,o),u=r.removedTargetIds||[];n=new ya([],u,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=jc(t,r.document),o=r.removedTargetIds||[];n=new ya([],o,i,null)}else{if(!("filter"in e))return ie();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,s=new Ox(i,o),u=r.targetId;n=new nC(u,s)}}return n}function Xx(t,e){let n;if(e instanceof ll)n={update:jg(t,e.key,e.value)};else if(e instanceof eC)n={delete:pf(t,e.key)};else if(e instanceof Lr)n={update:jg(t,e.key,e.data),updateMask:sP(e.fieldMask)};else{if(!(e instanceof Ux))return ie();n={verify:pf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const u=s.transform;if(u instanceof nu)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Js)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Qs)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof ru)return{fieldPath:s.field.canonicalString(),increment:u.Pe};throw ie()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:Jx(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ie()}(t,e.precondition)),n}function Zx(t,e){return t&&t.length>0?(Ie(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?_n(i.updateTime):_n(o);return s.isEqual(oe.min())&&(s=_n(o)),new Dx(s,i.transformResults||[])}(n,e))):[]}function jx(t,e){return{documents:[sC(t,e.path)]}}function eP(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=sC(t,i);const o=function(d){if(d.length!==0)return uC(Sn.create(d,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const s=function(d){if(d.length!==0)return d.map(h=>function(g){return{field:wi(g.field),direction:rP(g.dir)}}(h))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const u=ff(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:i}}function tP(t){let e=Qx(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ie(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=function(p){const g=aC(p);return g instanceof Sn&&bE(g)?g.getFilters():[g]}(n.where));let s=[];n.orderBy&&(s=function(p){return p.map(g=>function(R){return new tu(Ai(R.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(g))}(n.orderBy));let u=null;n.limit&&(u=function(p){let g;return g=typeof p=="object"?p.value:p,Vu(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(p){const g=!!p.before,v=p.values||[];return new eu(v,g)}(n.startAt));let d=null;return n.endAt&&(d=function(p){const g=!p.before,v=p.values||[];return new eu(v,g)}(n.endAt)),_x(e,i,s,o,u,"F",c,d)}function nP(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ie()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function aC(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ai(n.unaryFilter.field);return We.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ai(n.unaryFilter.field);return We.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Ai(n.unaryFilter.field);return We.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Ai(n.unaryFilter.field);return We.create(s,"!=",{nullValue:"NULL_VALUE"});default:return ie()}}(t):t.fieldFilter!==void 0?function(n){return We.create(Ai(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ie()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Sn.create(n.compositeFilter.filters.map(r=>aC(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ie()}}(n.compositeFilter.op))}(t):ie()}function rP(t){return Hx[t]}function iP(t){return zx[t]}function oP(t){return Wx[t]}function wi(t){return{fieldPath:t.canonicalString()}}function Ai(t){return tt.fromServerFormat(t.fieldPath)}function uC(t){return t instanceof We?function(n){if(n.op==="=="){if(Og(n.value))return{unaryFilter:{field:wi(n.field),op:"IS_NAN"}};if(bg(n.value))return{unaryFilter:{field:wi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Og(n.value))return{unaryFilter:{field:wi(n.field),op:"IS_NOT_NAN"}};if(bg(n.value))return{unaryFilter:{field:wi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wi(n.field),op:iP(n.op),value:n.value}}}(t):t instanceof Sn?function(n){const r=n.getFilters().map(i=>uC(i));return r.length===1?r[0]:{compositeFilter:{op:oP(n.op),filters:r}}}(t):ie()}function sP(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function cC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e,n,r,i,o=oe.min(),s=oe.min(),u=ot.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new dr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(e){this.ct=e}}function aP(t){const e=tP({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?df(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(){this.un=new cP}addToCollectionParentIndex(e,n){return this.un.add(n),q.resolve()}getCollectionParents(e,n){return q.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return q.resolve()}deleteFieldIndex(e,n){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,n){return q.resolve()}getDocumentsMatchingTarget(e,n){return q.resolve(null)}getIndexType(e,n){return q.resolve(0)}getFieldIndexes(e,n){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,n){return q.resolve(xr.min())}getMinOffsetFromCollectionGroup(e,n){return q.resolve(xr.min())}updateCollectionGroup(e,n,r){return q.resolve()}updateIndexEntries(e,n){return q.resolve()}}class cP{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new rt(be.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new rt(be.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ho(0)}static kn(){return new ho(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{constructor(){this.changes=new Co(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ht.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?q.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Cs(r.mutation,i,Ut.empty(),Je.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,de()).next(()=>r))}getLocalViewOfDocuments(e,n,r=de()){const i=Xr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=ls();return o.forEach((u,c)=>{s=s.insert(u,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=Xr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,de()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,u)=>{n.set(s,u)})})}computeViews(e,n,r,i){let o=Hn();const s=Es(),u=function(){return Es()}();return n.forEach((c,d)=>{const h=r.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof Lr)?o=o.insert(d.key,d):h!==void 0?(s.set(d.key,h.mutation.getFieldMask()),Cs(h.mutation,d,h.mutation.getFieldMask(),Je.now())):s.set(d.key,Ut.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((d,h)=>s.set(d,h)),n.forEach((d,h)=>{var p;return u.set(d,new fP(h,(p=s.get(d))!==null&&p!==void 0?p:null))}),u))}recalculateAndSaveOverlays(e,n){const r=Es();let i=new Le((s,u)=>s-u),o=de();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const u of s)u.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let h=r.get(c)||Ut.empty();h=u.applyToLocalView(d,h),r.set(c,h);const p=(i.get(u.batchId)||de()).add(c);i=i.insert(u.batchId,p)})}).next(()=>{const s=[],u=i.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),d=c.key,h=c.value,p=WE();h.forEach(g=>{if(!o.has(g)){const v=ZE(n.get(g),r.get(g));v!==null&&p.set(g,v),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,d,p))}return q.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return te.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Tx(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):q.resolve(Xr());let u=-1,c=o;return s.next(d=>q.forEach(d,(h,p)=>(u<p.largestBatchId&&(u=p.largestBatchId),o.get(h)?q.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{c=c.insert(h,g)}))).next(()=>this.populateOverlays(e,d,o)).next(()=>this.computeViews(e,c,d,de())).next(h=>({batchId:u,changes:zE(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new te(n)).next(r=>{let i=ls();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let s=ls();return this.indexManager.getCollectionParents(e,o).next(u=>q.forEach(u,c=>{const d=function(p,g){return new Lu(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(h=>{h.forEach((p,g)=>{s=s.insert(p,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((c,d)=>{const h=d.getKey();s.get(h)===null&&(s=s.insert(h,ht.newInvalidDocument(h)))});let u=ls();return s.forEach((c,d)=>{const h=o.get(c);h!==void 0&&Cs(h.mutation,d,Ut.empty(),Je.now()),bu(n,d)&&(u=u.insert(c,d))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return q.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:_n(i.createTime)}}(n)),q.resolve()}getNamedQuery(e,n){return q.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:aP(i.bundledQuery),readTime:_n(i.readTime)}}(n)),q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(){this.overlays=new Le(te.comparator),this.Ir=new Map}getOverlay(e,n){return q.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Xr();return q.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.ht(e,n,o)}),q.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),q.resolve()}getOverlaysForCollection(e,n,r){const i=Xr(),o=n.length+1,s=new te(n.child("")),u=this.overlays.getIteratorFrom(s);for(;u.hasNext();){const c=u.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return q.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Le((d,h)=>d-h);const s=this.overlays.getIterator();for(;s.hasNext();){const d=s.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=o.get(d.largestBatchId);h===null&&(h=Xr(),o=o.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const u=Xr(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>u.set(d,h)),!(u.size()>=i)););return q.resolve(u)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new bx(n,r));let o=this.Ir.get(n);o===void 0&&(o=de(),this.Ir.set(n,o)),this.Ir.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(){this.sessionToken=ot.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(){this.Tr=new rt(Qe.Er),this.dr=new rt(Qe.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Qe(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Qe(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new te(new be([])),r=new Qe(n,e),i=new Qe(n,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new te(new be([])),r=new Qe(n,e),i=new Qe(n,e+1);let o=de();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const n=new Qe(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Qe{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return te.comparator(e.key,n.key)||_e(e.wr,n.wr)}static Ar(e,n){return _e(e.wr,n.wr)||te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new rt(Qe.Er)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Fx(o,n,r,i);this.mutationQueue.push(s);for(const u of i)this.br=this.br.add(new Qe(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return q.resolve(s)}lookupMutationBatch(e,n){return q.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),o=i<0?0:i;return q.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Qe(n,0),i=new Qe(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{const u=this.Dr(s.wr);o.push(u)}),q.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new rt(_e);return n.forEach(i=>{const o=new Qe(i,0),s=new Qe(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],u=>{r=r.add(u.wr)})}),q.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;te.isDocumentKey(o)||(o=o.child(""));const s=new Qe(new te(o),0);let u=new rt(_e);return this.br.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(u=u.add(c.wr)),!0)},s),q.resolve(this.Cr(u))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ie(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return q.forEach(n.mutations,i=>{const o=new Qe(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Qe(n,0),i=this.br.firstAfterOrEqual(r);return q.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(e){this.Mr=e,this.docs=function(){return new Le(te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return q.resolve(r?r.document.mutableCopy():ht.newInvalidDocument(n))}getEntries(e,n){let r=Hn();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():ht.newInvalidDocument(i))}),q.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Hn();const s=n.path,u=new te(s.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:d,value:{document:h}}=c.getNext();if(!s.isPrefixOf(d.path))break;d.path.length>s.length+1||ex(jR(h),r)<=0||(i.has(h.key)||bu(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return q.resolve(o)}getAllFromCollectionGroup(e,n,r,i){ie()}Or(e,n){return q.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new _P(this)}getSize(e){return q.resolve(this.size)}}class _P extends dP{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),q.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e){this.persistence=e,this.Nr=new Co(n=>bh(n),Oh),this.lastRemoteSnapshotVersion=oe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Hh,this.targetCount=0,this.kr=ho.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),q.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new ho(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,q.resolve()}updateTargetData(e,n){return this.Kn(n),q.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.Nr.forEach((s,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)}),q.waitFor(o).next(()=>i)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return q.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),q.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),q.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),q.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return q.resolve(r)}containsKey(e,n){return q.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Vh(0),this.Kr=!1,this.Kr=!0,this.$r=new gP,this.referenceDelegate=e(this),this.Ur=new TP(this),this.indexManager=new uP,this.remoteDocumentCache=function(i){return new vP(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new lP(n),this.Gr=new pP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new mP,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new yP(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Z("MemoryPersistence","Starting transaction:",e);const i=new CP(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,n){return q.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class CP extends nx{constructor(e){super(),this.currentSequenceNumber=e}}class zh{constructor(e){this.persistence=e,this.Jr=new Hh,this.Yr=null}static Zr(e){return new zh(e)}get Xr(){if(this.Yr)return this.Yr;throw ie()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),q.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),q.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.Xr,r=>{const i=te.fromPath(r);return this.ei(e,i).next(o=>{o||n.removeEntry(i,oe.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return q.or([()=>q.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=de(),i=de();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new Wh(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return AA()?8:rx(gt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.Yi(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new IP;return this.Xi(e,n,s).next(u=>{if(o.result=u,this.zi)return this.es(e,n,s,u.size)})}).next(()=>o.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(es()<=pe.DEBUG&&Z("QueryEngine","SDK will not create cache indexes for query:",Si(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),q.resolve()):(es()<=pe.DEBUG&&Z("QueryEngine","Query:",Si(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(es()<=pe.DEBUG&&Z("QueryEngine","The SDK decides to create cache indexes for query:",Si(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,yn(n))):q.resolve())}Yi(e,n){if(Gg(n))return q.resolve(null);let r=yn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=df(n,null,"F"),r=yn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=de(...o);return this.Ji.getDocuments(e,s).next(u=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.ts(n,u);return this.ns(n,d,s,c.readTime)?this.Yi(e,df(n,null,"F")):this.rs(e,d,n,c)}))})))}Zi(e,n,r,i){return Gg(n)||i.isEqual(oe.min())?q.resolve(null):this.Ji.getDocuments(e,r).next(o=>{const s=this.ts(n,o);return this.ns(n,s,r,i)?q.resolve(null):(es()<=pe.DEBUG&&Z("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Si(n)),this.rs(e,s,n,ZR(i,-1)).next(u=>u))})}ts(e,n){let r=new rt(GE(e));return n.forEach((i,o)=>{bu(e,o)&&(r=r.add(o))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,n,r){return es()<=pe.DEBUG&&Z("QueryEngine","Using full collection scan to execute query:",Si(n)),this.Ji.getDocumentsMatchingQuery(e,n,xr.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Le(_e),this._s=new Co(o=>bh(o),Oh),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new hP(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function AP(t,e,n,r){return new wP(t,e,n,r)}async function dC(t,e){const n=se(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],u=[];let c=de();for(const d of i){s.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}for(const d of o){u.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(d=>({hs:d,removedBatchIds:s,addedBatchIds:u}))})})}function RP(t,e){const n=se(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(u,c,d,h){const p=d.batch,g=p.keys();let v=q.resolve();return g.forEach(R=>{v=v.next(()=>h.getEntry(c,R)).next(P=>{const D=d.docVersions.get(R);Ie(D!==null),P.version.compareTo(D)<0&&(p.applyToRemoteDocument(P,d),P.isValidDocument()&&(P.setReadTime(d.commitVersion),h.addEntry(P)))})}),v.next(()=>u.mutationQueue.removeMutationBatch(c,p))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let c=de();for(let d=0;d<u.mutationResults.length;++d)u.mutationResults[d].transformResults.length>0&&(c=c.add(u.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function fC(t){const e=se(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function xP(t,e){const n=se(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const u=[];e.targetChanges.forEach((h,p)=>{const g=i.get(p);if(!g)return;u.push(n.Ur.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(o,h.addedDocuments,p)));let v=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(ot.EMPTY_BYTE_STRING,oe.min()).withLastLimboFreeSnapshotVersion(oe.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),i=i.insert(p,v),function(P,D,w){return P.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(g,v,h)&&u.push(n.Ur.updateTargetData(o,v))});let c=Hn(),d=de();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),u.push(PP(o,s,e.documentUpdates).next(h=>{c=h.Ps,d=h.Is})),!r.isEqual(oe.min())){const h=n.Ur.getLastRemoteSnapshotVersion(o).next(p=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));u.push(h)}return q.waitFor(u).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,c,d)).next(()=>c)}).then(o=>(n.os=i,o))}function PP(t,e,n){let r=de(),i=de();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=Hn();return n.forEach((u,c)=>{const d=o.get(u);c.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(u)),c.isNoDocument()&&c.version.isEqual(oe.min())?(e.removeEntry(u,c.readTime),s=s.insert(u,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),s=s.insert(u,c)):Z("LocalStore","Ignoring outdated watch update for ",u,". Current version:",d.version," Watch version:",c.version)}),{Ps:s,Is:i}})}function kP(t,e){const n=se(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function NP(t,e){const n=se(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(o=>o?(i=o,q.resolve(i)):n.Ur.allocateTargetId(r).next(s=>(i=new dr(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function gf(t,e,n){const r=se(t),i=r.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!sl(s))throw s;Z("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function ey(t,e,n){const r=se(t);let i=oe.min(),o=de();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,d,h){const p=se(c),g=p._s.get(h);return g!==void 0?q.resolve(p.os.get(g)):p.Ur.getTargetData(d,h)}(r,s,yn(e)).next(u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,u.targetId).next(c=>{o=c})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,n?i:oe.min(),n?o:de())).next(u=>(MP(r,Cx(e),u),{documents:u,Ts:o})))}function MP(t,e,n){let r=t.us.get(e)||oe.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.us.set(e,r)}class ty{constructor(){this.activeTargetIds=xx()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class DP{constructor(){this.so=new ty,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new ty,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Z("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Z("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zl=null;function ed(){return Zl===null?Zl=function(){return 268435456+Math.round(2147483648*Math.random())}():Zl++,"0x"+Zl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ct="WebChannelConnection";class FP extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(n,r,i,o,s){const u=ed(),c=this.xo(n,r.toUriEncodedString());Z("RestConnection",`Sending RPC '${n}' ${u}:`,c,i);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,o,s),this.No(n,c,d,i).then(h=>(Z("RestConnection",`Received RPC '${n}' ${u}: `,h),h),h=>{throw ao("RestConnection",`RPC '${n}' ${u} failed with error: `,h,"url: ",c,"request:",i),h})}Lo(n,r,i,o,s,u){return this.Mo(n,r,i,o,s)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Eo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}xo(n,r){const i=LP[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const o=ed();return new Promise((s,u)=>{const c=new AE;c.setWithCredentials(!0),c.listenOnce(RE.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case pa.NO_ERROR:const h=c.getResponseJson();Z(ct,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case pa.TIMEOUT:Z(ct,`RPC '${e}' ${o} timed out`),u(new j($.DEADLINE_EXCEEDED,"Request time out"));break;case pa.HTTP_ERROR:const p=c.getStatus();if(Z(ct,`RPC '${e}' ${o} failed with status:`,p,"response text:",c.getResponseText()),p>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);const v=g==null?void 0:g.error;if(v&&v.status&&v.message){const R=function(D){const w=D.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(w)>=0?w:$.UNKNOWN}(v.status);u(new j(R,v.message))}else u(new j($.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new j($.UNAVAILABLE,"Connection failed."));break;default:ie()}}finally{Z(ct,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(i);Z(ct,`RPC '${e}' ${o} sending request:`,i),c.send(n,"POST",d,r,15)})}Bo(e,n,r){const i=ed(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=kE(),u=PE(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=o.join("");Z(ct,`Creating RPC '${e}' stream ${i}: ${h}`,c);const p=s.createWebChannel(h,c);let g=!1,v=!1;const R=new UP({Io:D=>{v?Z(ct,`Not sending because RPC '${e}' stream ${i} is closed:`,D):(g||(Z(ct,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),Z(ct,`RPC '${e}' stream ${i} sending:`,D),p.send(D))},To:()=>p.close()}),P=(D,w,_)=>{D.listen(w,S=>{try{_(S)}catch(V){setTimeout(()=>{throw V},0)}})};return P(p,ss.EventType.OPEN,()=>{v||(Z(ct,`RPC '${e}' stream ${i} transport opened.`),R.yo())}),P(p,ss.EventType.CLOSE,()=>{v||(v=!0,Z(ct,`RPC '${e}' stream ${i} transport closed`),R.So())}),P(p,ss.EventType.ERROR,D=>{v||(v=!0,ao(ct,`RPC '${e}' stream ${i} transport errored:`,D),R.So(new j($.UNAVAILABLE,"The operation could not be completed")))}),P(p,ss.EventType.MESSAGE,D=>{var w;if(!v){const _=D.data[0];Ie(!!_);const S=_,V=S.error||((w=S[0])===null||w===void 0?void 0:w.error);if(V){Z(ct,`RPC '${e}' stream ${i} received error:`,V);const F=V.status;let b=function(I){const x=$e[I];if(x!==void 0)return tC(x)}(F),A=V.message;b===void 0&&(b=$.INTERNAL,A="Unknown error status: "+F+" with message "+V.message),v=!0,R.So(new j(b,A)),p.close()}else Z(ct,`RPC '${e}' stream ${i} received:`,_),R.bo(_)}}),P(u,xE.STAT_EVENT,D=>{D.stat===sf.PROXY?Z(ct,`RPC '${e}' stream ${i} detected buffering proxy`):D.stat===sf.NOPROXY&&Z(ct,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{R.wo()},0),R}}function td(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $u(t){return new Kx(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e,n,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&Z("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e,n,r,i,o,s,u,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new hC(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===$.RESOURCE_EXHAUSTED?(Gn(n.toString()),Gn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new j($.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Z("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Z("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class bP extends pC{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=Yx(this.serializer,e),r=function(o){if(!("targetChange"in o))return oe.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?oe.min():s.readTime?_n(s.readTime):oe.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=mf(this.serializer),n.addTarget=function(o,s){let u;const c=s.target;if(u=cf(c)?{documents:jx(o,c)}:{query:eP(o,c)._t},u.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){u.resumeToken=iC(o,s.resumeToken);const d=ff(o,s.expectedCount);d!==null&&(u.expectedCount=d)}else if(s.snapshotVersion.compareTo(oe.min())>0){u.readTime=iu(o,s.snapshotVersion.toTimestamp());const d=ff(o,s.expectedCount);d!==null&&(u.expectedCount=d)}return u}(this.serializer,e);const r=nP(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=mf(this.serializer),n.removeTarget=e,this.a_(n)}}class OP extends pC{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ie(!!e.streamToken),this.lastStreamToken=e.streamToken,Ie(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ie(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=Zx(e.writeResults,e.commitTime),r=_n(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=mf(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Xx(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new j($.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,hf(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new j($.UNKNOWN,o.toString())})}Lo(e,n,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.connection.Lo(e,hf(n,r),i,s,u,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new j($.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class qP{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Gn(n),this.D_=!1):Z("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(async()=>{mi(this)&&(Z("RemoteStore","Restarting streams for network reachability change."),await async function(c){const d=se(c);d.L_.add(4),await ul(d),d.q_.set("Unknown"),d.L_.delete(4),await Gu(d)}(this))})}),this.q_=new qP(r,i)}}async function Gu(t){if(mi(t))for(const e of t.B_)await e(!0)}async function ul(t){for(const e of t.B_)await e(!1)}function mC(t,e){const n=se(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Yh(n)?Qh(n):Io(n).r_()&&Jh(n,e))}function Kh(t,e){const n=se(t),r=Io(n);n.N_.delete(e),r.r_()&&gC(n,e),n.N_.size===0&&(r.r_()?r.o_():mi(n)&&n.q_.set("Unknown"))}function Jh(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(oe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Io(t).A_(e)}function gC(t,e){t.Q_.xe(e),Io(t).R_(e)}function Qh(t){t.Q_=new Gx({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Io(t).start(),t.q_.v_()}function Yh(t){return mi(t)&&!Io(t).n_()&&t.N_.size>0}function mi(t){return se(t).L_.size===0}function yC(t){t.Q_=void 0}async function GP(t){t.q_.set("Online")}async function HP(t){t.N_.forEach((e,n)=>{Jh(t,e)})}async function zP(t,e){yC(t),Yh(t)?(t.q_.M_(e),Qh(t)):t.q_.set("Unknown")}async function WP(t,e,n){if(t.q_.set("Online"),e instanceof rC&&e.state===2&&e.cause)try{await async function(i,o){const s=o.cause;for(const u of o.targetIds)i.N_.has(u)&&(await i.remoteSyncer.rejectListen(u,s),i.N_.delete(u),i.Q_.removeTarget(u))}(t,e)}catch(r){Z("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ou(t,r)}else if(e instanceof ya?t.Q_.Ke(e):e instanceof nC?t.Q_.He(e):t.Q_.We(e),!n.isEqual(oe.min()))try{const r=await fC(t.localStore);n.compareTo(r)>=0&&await function(o,s){const u=o.Q_.rt(s);return u.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const h=o.N_.get(d);h&&o.N_.set(d,h.withResumeToken(c.resumeToken,s))}}),u.targetMismatches.forEach((c,d)=>{const h=o.N_.get(c);if(!h)return;o.N_.set(c,h.withResumeToken(ot.EMPTY_BYTE_STRING,h.snapshotVersion)),gC(o,c);const p=new dr(h.target,c,d,h.sequenceNumber);Jh(o,p)}),o.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(r){Z("RemoteStore","Failed to raise snapshot:",r),await ou(t,r)}}async function ou(t,e,n){if(!sl(e))throw e;t.L_.add(1),await ul(t),t.q_.set("Offline"),n||(n=()=>fC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Z("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Gu(t)})}function vC(t,e){return e().catch(n=>ou(t,n,e))}async function Hu(t){const e=se(t),n=kr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;KP(e);)try{const i=await kP(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,JP(e,i)}catch(i){await ou(e,i)}_C(e)&&TC(e)}function KP(t){return mi(t)&&t.O_.length<10}function JP(t,e){t.O_.push(e);const n=kr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function _C(t){return mi(t)&&!kr(t).n_()&&t.O_.length>0}function TC(t){kr(t).start()}async function QP(t){kr(t).p_()}async function YP(t){const e=kr(t);for(const n of t.O_)e.m_(n.mutations)}async function XP(t,e,n){const r=t.O_.shift(),i=qh.from(r,e,n);await vC(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Hu(t)}async function ZP(t,e){e&&kr(t).V_&&await async function(r,i){if(function(s){return Bx(s)&&s!==$.ABORTED}(i.code)){const o=r.O_.shift();kr(r).s_(),await vC(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Hu(r)}}(t,e),_C(t)&&TC(t)}async function ry(t,e){const n=se(t);n.asyncQueue.verifyOperationInProgress(),Z("RemoteStore","RemoteStore received new credentials");const r=mi(n);n.L_.add(3),await ul(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Gu(n)}async function jP(t,e){const n=se(t);e?(n.L_.delete(2),await Gu(n)):e||(n.L_.add(2),await ul(n),n.q_.set("Unknown"))}function Io(t){return t.K_||(t.K_=function(n,r,i){const o=se(n);return o.w_(),new bP(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:GP.bind(null,t),Ro:HP.bind(null,t),mo:zP.bind(null,t),d_:WP.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Yh(t)?Qh(t):t.q_.set("Unknown")):(await t.K_.stop(),yC(t))})),t.K_}function kr(t){return t.U_||(t.U_=function(n,r,i){const o=se(n);return o.w_(),new OP(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:QP.bind(null,t),mo:ZP.bind(null,t),f_:YP.bind(null,t),g_:XP.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Hu(t)):(await t.U_.stop(),t.O_.length>0&&(Z("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Sr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const s=Date.now()+r,u=new Xh(e,n,s,i,o);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new j($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zh(t,e){if(Gn("AsyncQueue",`${e}: ${t}`),sl(t))return new j($.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e){this.comparator=e?(n,r)=>e(n,r)||te.comparator(n.key,r.key):(n,r)=>te.comparator(n.key,r.key),this.keyedMap=ls(),this.sortedSet=new Le(this.comparator)}static emptySet(e){return new Ki(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ki)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ki;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(){this.W_=new Le(te.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ie():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class po{constructor(e,n,r,i,o,s,u,c,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,o){const s=[];return n.forEach(u=>{s.push({type:0,doc:u})}),new po(e,n,Ki.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Fu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class tk{constructor(){this.queries=oy(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=se(n),o=i.queries;i.queries=oy(),o.forEach((s,u)=>{for(const c of u.j_)c.onError(r)})})(this,new j($.ABORTED,"Firestore shutting down"))}}function oy(){return new Co(t=>$E(t),Fu)}async function EC(t,e){const n=se(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new ek,r=e.J_()?0:1);try{switch(r){case 0:o.z_=await n.onListen(i,!0);break;case 1:o.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){const u=Zh(s,`Initialization of query '${Si(e.query)}' failed`);return void e.onError(u)}n.queries.set(i,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&jh(n)}async function CC(t,e){const n=se(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function nk(t,e){const n=se(t);let r=!1;for(const i of e){const o=i.query,s=n.queries.get(o);if(s){for(const u of s.j_)u.X_(i)&&(r=!0);s.z_=i}}r&&jh(n)}function rk(t,e,n){const r=se(t),i=r.queries.get(e);if(i)for(const o of i.j_)o.onError(n);r.queries.delete(e)}function jh(t){t.Y_.forEach(e=>{e.next()})}var yf,sy;(sy=yf||(yf={})).ea="default",sy.Cache="cache";class IC{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new po(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=po.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==yf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(e){this.key=e}}class wC{constructor(e){this.key=e}}class ik{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=de(),this.mutatedKeys=de(),this.Aa=GE(e),this.Ra=new Ki(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new iy,i=n?n.Ra:this.Ra;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,u=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{const g=i.get(h),v=bu(this.query,p)?p:null,R=!!g&&this.mutatedKeys.has(g.key),P=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let D=!1;g&&v?g.data.isEqual(v.data)?R!==P&&(r.track({type:3,doc:v}),D=!0):this.ga(g,v)||(r.track({type:2,doc:v}),D=!0,(c&&this.Aa(v,c)>0||d&&this.Aa(v,d)<0)&&(u=!0)):!g&&v?(r.track({type:0,doc:v}),D=!0):g&&!v&&(r.track({type:1,doc:g}),D=!0,(c||d)&&(u=!0)),D&&(v?(s=s.add(v),o=P?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ra:s,fa:r,ns:u,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const s=e.fa.G_();s.sort((h,p)=>function(v,R){const P=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ie()}};return P(v)-P(R)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;const u=n&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,d=c!==this.Ea;return this.Ea=c,s.length!==0||d?{snapshot:new po(this.query,e.Ra,o,s,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:u}:{wa:u}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new iy,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=de(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new wC(r))}),this.da.forEach(r=>{e.has(r)||n.push(new SC(r))}),n}ba(e){this.Ta=e.Ts,this.da=de();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return po.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class ok{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class sk{constructor(e){this.key=e,this.va=!1}}class lk{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Co(u=>$E(u),Fu),this.Ma=new Map,this.xa=new Set,this.Oa=new Le(te.comparator),this.Na=new Map,this.La=new Hh,this.Ba={},this.ka=new Map,this.qa=ho.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function ak(t,e,n=!0){const r=NC(t);let i;const o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=await AC(r,e,n,!0),i}async function uk(t,e){const n=NC(t);await AC(n,e,!0,!1)}async function AC(t,e,n,r){const i=await NP(t.localStore,yn(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n);let u;return r&&(u=await ck(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&mC(t.remoteStore,i),u}async function ck(t,e,n,r,i){t.Ka=(p,g,v)=>async function(P,D,w,_){let S=D.view.ma(w);S.ns&&(S=await ey(P.localStore,D.query,!1).then(({documents:A})=>D.view.ma(A,S)));const V=_&&_.targetChanges.get(D.targetId),F=_&&_.targetMismatches.get(D.targetId)!=null,b=D.view.applyChanges(S,P.isPrimaryClient,V,F);return ay(P,D.targetId,b.wa),b.snapshot}(t,p,g,v);const o=await ey(t.localStore,e,!0),s=new ik(e,o.Ts),u=s.ma(o.documents),c=al.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),d=s.applyChanges(u,t.isPrimaryClient,c);ay(t,n,d.wa);const h=new ok(e,n,s);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function dk(t,e,n){const r=se(t),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!Fu(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await gf(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Kh(r.remoteStore,i.targetId),vf(r,i.targetId)}).catch(ol)):(vf(r,i.targetId),await gf(r.localStore,i.targetId,!0))}async function fk(t,e){const n=se(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Kh(n.remoteStore,r.targetId))}async function hk(t,e,n){const r=Tk(t);try{const i=await function(s,u){const c=se(s),d=Je.now(),h=u.reduce((v,R)=>v.add(R.key),de());let p,g;return c.persistence.runTransaction("Locally write mutations","readwrite",v=>{let R=Hn(),P=de();return c.cs.getEntries(v,h).next(D=>{R=D,R.forEach((w,_)=>{_.isValidDocument()||(P=P.add(w))})}).next(()=>c.localDocuments.getOverlayedDocuments(v,R)).next(D=>{p=D;const w=[];for(const _ of u){const S=Lx(_,p.get(_.key).overlayedDocument);S!=null&&w.push(new Lr(_.key,S,LE(S.value.mapValue),vn.exists(!0)))}return c.mutationQueue.addMutationBatch(v,d,w,u)}).next(D=>{g=D;const w=D.applyToLocalDocumentSet(p,P);return c.documentOverlayCache.saveOverlays(v,D.batchId,w)})}).then(()=>({batchId:g.batchId,changes:zE(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,u,c){let d=s.Ba[s.currentUser.toKey()];d||(d=new Le(_e)),d=d.insert(u,c),s.Ba[s.currentUser.toKey()]=d}(r,i.batchId,n),await cl(r,i.changes),await Hu(r.remoteStore)}catch(i){const o=Zh(i,"Failed to persist write");n.reject(o)}}async function RC(t,e){const n=se(t);try{const r=await xP(n.localStore,e);e.targetChanges.forEach((i,o)=>{const s=n.Na.get(o);s&&(Ie(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?Ie(s.va):i.removedDocuments.size>0&&(Ie(s.va),s.va=!1))}),await cl(n,r,e)}catch(r){await ol(r)}}function ly(t,e,n){const r=se(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((o,s)=>{const u=s.view.Z_(e);u.snapshot&&i.push(u.snapshot)}),function(s,u){const c=se(s);c.onlineState=u;let d=!1;c.queries.forEach((h,p)=>{for(const g of p.j_)g.Z_(u)&&(d=!0)}),d&&jh(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function pk(t,e,n){const r=se(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),o=i&&i.key;if(o){let s=new Le(te.comparator);s=s.insert(o,ht.newNoDocument(o,oe.min()));const u=de().add(o),c=new qu(oe.min(),new Map,new Le(_e),s,u);await RC(r,c),r.Oa=r.Oa.remove(o),r.Na.delete(e),ep(r)}else await gf(r.localStore,e,!1).then(()=>vf(r,e,n)).catch(ol)}async function mk(t,e){const n=se(t),r=e.batch.batchId;try{const i=await RP(n.localStore,e);PC(n,r,null),xC(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await cl(n,i)}catch(i){await ol(i)}}async function gk(t,e,n){const r=se(t);try{const i=await function(s,u){const c=se(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return c.mutationQueue.lookupMutationBatch(d,u).next(p=>(Ie(p!==null),h=p.keys(),c.mutationQueue.removeMutationBatch(d,p))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,h,u)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>c.localDocuments.getDocuments(d,h))})}(r.localStore,e);PC(r,e,n),xC(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await cl(r,i)}catch(i){await ol(i)}}function xC(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function PC(t,e,n){const r=se(t);let i=r.Ba[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function vf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||kC(t,r)})}function kC(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Kh(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),ep(t))}function ay(t,e,n){for(const r of n)r instanceof SC?(t.La.addReference(r.key,e),yk(t,r)):r instanceof wC?(Z("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||kC(t,r.key)):ie()}function yk(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Z("SyncEngine","New document in limbo: "+n),t.xa.add(r),ep(t))}function ep(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new te(be.fromString(e)),r=t.qa.next();t.Na.set(r,new sk(n)),t.Oa=t.Oa.insert(n,r),mC(t.remoteStore,new dr(yn(Uu(n.path)),r,"TargetPurposeLimboResolution",Vh.oe))}}async function cl(t,e,n){const r=se(t),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((u,c)=>{s.push(r.Ka(c,e,n).then(d=>{var h;if((d||n)&&r.isPrimaryClient){const p=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(d){i.push(d);const p=Wh.Wi(c.targetId,d);o.push(p)}}))}),await Promise.all(s),r.Ca.d_(i),await async function(c,d){const h=se(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>q.forEach(d,g=>q.forEach(g.$i,v=>h.persistence.referenceDelegate.addReference(p,g.targetId,v)).next(()=>q.forEach(g.Ui,v=>h.persistence.referenceDelegate.removeReference(p,g.targetId,v)))))}catch(p){if(!sl(p))throw p;Z("LocalStore","Failed to update sequence numbers: "+p)}for(const p of d){const g=p.targetId;if(!p.fromCache){const v=h.os.get(g),R=v.snapshotVersion,P=v.withLastLimboFreeSnapshotVersion(R);h.os=h.os.insert(g,P)}}}(r.localStore,o))}async function vk(t,e){const n=se(t);if(!n.currentUser.isEqual(e)){Z("SyncEngine","User change. New user:",e.toKey());const r=await dC(n.localStore,e);n.currentUser=e,function(o,s){o.ka.forEach(u=>{u.forEach(c=>{c.reject(new j($.CANCELLED,s))})}),o.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await cl(n,r.hs)}}function _k(t,e){const n=se(t),r=n.Na.get(e);if(r&&r.va)return de().add(r.key);{let i=de();const o=n.Ma.get(e);if(!o)return i;for(const s of o){const u=n.Fa.get(s);i=i.unionWith(u.view.Va)}return i}}function NC(t){const e=se(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=RC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=_k.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=pk.bind(null,e),e.Ca.d_=nk.bind(null,e.eventManager),e.Ca.$a=rk.bind(null,e.eventManager),e}function Tk(t){const e=se(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=mk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=gk.bind(null,e),e}class su{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=$u(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return AP(this.persistence,new SP,e.initialUser,this.serializer)}Ga(e){return new EP(zh.Zr,this.serializer)}Wa(e){return new DP}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}su.provider={build:()=>new su};class _f{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ly(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=vk.bind(null,this.syncEngine),await jP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new tk}()}createDatastore(e){const n=$u(e.databaseInfo.databaseId),r=function(o){return new FP(o)}(e.databaseInfo);return function(o,s,u,c){return new BP(o,s,u,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,u){return new $P(r,i,o,s,u)}(this.localStore,this.datastore,e.asyncQueue,n=>ly(this.syncEngine,n,0),function(){return ny.D()?new ny:new VP}())}createSyncEngine(e,n){return function(i,o,s,u,c,d,h){const p=new lk(i,o,s,u,c,d);return h&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const o=se(i);Z("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await ul(o),o.k_.shutdown(),o.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}_f.provider={build:()=>new _f};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Gn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=dt.UNAUTHENTICATED,this.clientId=ME.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{Z("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(Z("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Sr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Zh(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function nd(t,e){t.asyncQueue.verifyOperationInProgress(),Z("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await dC(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function uy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Ck(t);Z("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>ry(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>ry(e.remoteStore,i)),t._onlineComponents=e}async function Ck(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Z("FirestoreClient","Using user provided OfflineComponentProvider");try{await nd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===$.FAILED_PRECONDITION||i.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;ao("Error using user provided cache. Falling back to memory cache: "+n),await nd(t,new su)}}else Z("FirestoreClient","Using default OfflineComponentProvider"),await nd(t,new su);return t._offlineComponents}async function DC(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Z("FirestoreClient","Using user provided OnlineComponentProvider"),await uy(t,t._uninitializedComponentsProvider._online)):(Z("FirestoreClient","Using default OnlineComponentProvider"),await uy(t,new _f))),t._onlineComponents}function Ik(t){return DC(t).then(e=>e.syncEngine)}async function Tf(t){const e=await DC(t),n=e.eventManager;return n.onListen=ak.bind(null,e.syncEngine),n.onUnlisten=dk.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=uk.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=fk.bind(null,e.syncEngine),n}function Sk(t,e,n={}){const r=new Sr;return t.asyncQueue.enqueueAndForget(async()=>function(o,s,u,c,d){const h=new MC({next:g=>{h.Za(),s.enqueueAndForget(()=>CC(o,p));const v=g.docs.has(u);!v&&g.fromCache?d.reject(new j($.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&g.fromCache&&c&&c.source==="server"?d.reject(new j($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new IC(Uu(u.path),h,{includeMetadataChanges:!0,_a:!0});return EC(o,p)}(await Tf(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cy=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wk(t,e,n){if(!n)throw new j($.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Ak(t,e,n,r){if(e===!0&&r===!0)throw new j($.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function dy(t){if(!te.isDocumentKey(t))throw new j($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function tp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ie()}function Tn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new j($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=tp(t);throw new j($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new j($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new j($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Ak("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=VC((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new j($.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new j($.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new j($.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class np{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fy({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new j($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new j($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fy(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new GR;switch(r.type){case"firstParty":return new KR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new j($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=cy.get(n);r&&(Z("ComponentProvider","Removing Datastore"),cy.delete(n),r.terminate())}(this),Promise.resolve()}}function Rk(t,e,n,r={}){var i;const o=(t=Tn(t,np))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&ao("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let u,c;if(typeof r.mockUserToken=="string")u=r.mockUserToken,c=dt.MOCK_USER;else{u=_A(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new j($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new dt(d)}t._authCredentials=new HR(new NE(u,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new zu(this.firestore,e,this._query)}}class Pt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ys(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pt(this.firestore,e,this._key)}}class Ys extends zu{constructor(e,n,r){super(e,n,Uu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pt(this.firestore,null,new te(e))}withConverter(e){return new Ys(this.firestore,e,this._path)}}function hy(t,e,...n){if(t=kt(t),arguments.length===1&&(e=ME.newId()),wk("doc","path",e),t instanceof np){const r=be.fromString(e,...n);return dy(r),new Pt(t,null,new te(r))}{if(!(t instanceof Pt||t instanceof Ys))throw new j($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(be.fromString(e,...n));return dy(r),new Pt(t.firestore,t instanceof Ys?t.converter:null,new te(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new hC(this,"async_queue_retry"),this.Vu=()=>{const r=td();r&&Z("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=td();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=td();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Sr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!sl(e))throw e;Z("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(s){let u=s.message||"";return s.stack&&(u=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),u}(r);throw Gn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=Xh.createAndSchedule(this,e,n,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&ie()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function my(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}class mo extends np{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new py,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new py(e),this._firestoreClient=void 0,await e}}}function xk(t,e){const n=typeof t=="object"?t:CE(),r=typeof t=="string"?t:"(default)",i=Mh(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=yA("firestore");o&&Rk(i,...o)}return i}function rp(t){if(t._terminated)throw new j($.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Pk(t),t._firestoreClient}function Pk(t){var e,n,r;const i=t._freezeSettings(),o=function(u,c,d,h){return new sx(u,c,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,VC(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new Ek(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e){this._byteString=e}static fromBase64String(e){try{return new go(ot.fromBase64String(e))}catch(n){throw new j($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new go(ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new j($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new j($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new j($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return _e(this._lat,e._lat)||_e(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk=/^__.*__$/;class Nk{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Lr(e,this.data,this.fieldMask,n,this.fieldTransforms):new ll(e,this.data,n,this.fieldTransforms)}}class LC{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Lr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function UC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ie()}}class lp{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new lp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return lu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(UC(this.Cu)&&kk.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Mk{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||$u(e)}Qu(e,n,r,i=!1){return new lp({Cu:e,methodName:n,qu:r,path:tt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function FC(t){const e=t._freezeSettings(),n=$u(t._databaseId);return new Mk(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Dk(t,e,n,r,i,o={}){const s=t.Qu(o.merge||o.mergeFields?2:0,e,n,i);ap("Data must be an object, but it was:",s,r);const u=bC(r,s);let c,d;if(o.merge)c=new Ut(s.fieldMask),d=s.fieldTransforms;else if(o.mergeFields){const h=[];for(const p of o.mergeFields){const g=Ef(e,p,n);if(!s.contains(g))throw new j($.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);BC(h,g)||h.push(g)}c=new Ut(h),d=s.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,d=s.fieldTransforms;return new Nk(new St(u),c,d)}class Ku extends ip{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ku}}function Vk(t,e,n,r){const i=t.Qu(1,e,n);ap("Data must be an object, but it was:",i,r);const o=[],s=St.empty();pi(r,(c,d)=>{const h=up(e,c,n);d=kt(d);const p=i.Nu(h);if(d instanceof Ku)o.push(h);else{const g=Ju(d,p);g!=null&&(o.push(h),s.set(h,g))}});const u=new Ut(o);return new LC(s,u,i.fieldTransforms)}function Lk(t,e,n,r,i,o){const s=t.Qu(1,e,n),u=[Ef(e,r,n)],c=[i];if(o.length%2!=0)throw new j($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)u.push(Ef(e,o[g])),c.push(o[g+1]);const d=[],h=St.empty();for(let g=u.length-1;g>=0;--g)if(!BC(d,u[g])){const v=u[g];let R=c[g];R=kt(R);const P=s.Nu(v);if(R instanceof Ku)d.push(v);else{const D=Ju(R,P);D!=null&&(d.push(v),h.set(v,D))}}const p=new Ut(d);return new LC(h,p,s.fieldTransforms)}function Ju(t,e){if(OC(t=kt(t)))return ap("Unsupported field value:",e,t),bC(t,e);if(t instanceof ip)return function(r,i){if(!UC(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const u of r){let c=Ju(u,i.Lu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=kt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Px(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Je.fromDate(r);return{timestampValue:iu(i.serializer,o)}}if(r instanceof Je){const o=new Je(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:iu(i.serializer,o)}}if(r instanceof op)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof go)return{bytesValue:iC(i.serializer,r._byteString)};if(r instanceof Pt){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Gh(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof sp)return function(s,u){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(c=>{if(typeof c!="number")throw u.Bu("VectorValues must only contain numeric values.");return Bh(u.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${tp(r)}`)}(t,e)}function bC(t,e){const n={};return DE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):pi(t,(r,i)=>{const o=Ju(i,e.Mu(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function OC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Je||t instanceof op||t instanceof go||t instanceof Pt||t instanceof ip||t instanceof sp)}function ap(t,e,n){if(!OC(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=tp(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Ef(t,e,n){if((e=kt(e))instanceof Wu)return e._internalPath;if(typeof e=="string")return up(t,e);throw lu("Field path arguments must be of type string or ",t,!1,void 0,n)}const Uk=new RegExp("[~\\*/\\[\\]]");function up(t,e,n){if(e.search(Uk)>=0)throw lu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Wu(...e.split("."))._internalPath}catch{throw lu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function lu(t,e,n,r,i){const o=r&&!r.isEmpty(),s=i!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new j($.INVALID_ARGUMENT,u+t+c)}function BC(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Fk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field($C("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Fk extends qC{data(){return super.data()}}function $C(t,e){return typeof e=="string"?up(t,e):e instanceof Wu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bk(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new j($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ok{convertValue(e,n="none"){switch(ui(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Be(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ai(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ie()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return pi(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;const o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Be(s.doubleValue));return new sp(o)}convertGeoPoint(e){return new op(Be(e.latitude),Be(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Uh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(zs(e));default:return null}}convertTimestamp(e){const n=Pr(e);return new Je(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=be.fromString(e);Ie(cC(r));const i=new Ws(r.get(1),r.get(3)),o=new te(r.popFirst(5));return i.isEqual(n)||Gn(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bk(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class GC extends qC{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new va(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field($C("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class va extends GC{data(e={}){return super.data(e)}}class qk{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new us(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new va(this._firestore,this._userDataWriter,r.key,r,new us(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new j($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(u=>{const c=new va(i._firestore,i._userDataWriter,u.doc.key,u.doc,new us(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{const c=new va(i._firestore,i._userDataWriter,u.doc.key,u.doc,new us(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,h=-1;return u.type!==0&&(d=s.indexOf(u.doc.key),s=s.delete(u.doc.key)),u.type!==1&&(s=s.add(u.doc),h=s.indexOf(u.doc.key)),{type:$k(u.type),doc:c,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function $k(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ie()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gk(t){t=Tn(t,Pt);const e=Tn(t.firestore,mo);return Sk(rp(e),t._key).then(n=>WC(e,t,n))}class HC extends Ok{constructor(e){super(),this.firestore=e}convertBytes(e){return new go(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Pt(this.firestore,null,n)}}function Hk(t,e,n){t=Tn(t,Pt);const r=Tn(t.firestore,mo),i=Bk(t.converter,e,n);return zC(r,[Dk(FC(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,vn.none())])}function zk(t,e,n,...r){t=Tn(t,Pt);const i=Tn(t.firestore,mo),o=FC(i);let s;return s=typeof(e=kt(e))=="string"||e instanceof Wu?Lk(o,"updateDoc",t._key,e,n,r):Vk(o,"updateDoc",t._key,e),zC(i,[s.toMutation(t._key,vn.exists(!0))])}function Wk(t,...e){var n,r,i;t=kt(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||my(e[s])||(o=e[s],s++);const u={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(my(e[s])){const p=e[s];e[s]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let c,d,h;if(t instanceof Pt)d=Tn(t.firestore,mo),h=Uu(t._key.path),c={next:p=>{e[s]&&e[s](WC(d,t,p))},error:e[s+1],complete:e[s+2]};else{const p=Tn(t,zu);d=Tn(p.firestore,mo),h=p._query;const g=new HC(d);c={next:v=>{e[s]&&e[s](new qk(d,g,p,v))},error:e[s+1],complete:e[s+2]},bk(t._query)}return function(g,v,R,P){const D=new MC(P),w=new IC(v,D,R);return g.asyncQueue.enqueueAndForget(async()=>EC(await Tf(g),w)),()=>{D.Za(),g.asyncQueue.enqueueAndForget(async()=>CC(await Tf(g),w))}}(rp(d),h,u,c)}function zC(t,e){return function(r,i){const o=new Sr;return r.asyncQueue.enqueueAndForget(async()=>hk(await Ik(r),i,o)),o.promise}(rp(t),e)}function WC(t,e,n){const r=n.docs.get(e._key),i=new HC(t);return new GC(t,i,e._key,r,new us(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Eo=i})(To),lo(new si("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),u=new mo(new zR(r.getProvider("auth-internal")),new QR(r.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new j($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ws(d.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),Ir(Dg,"4.7.3",e),Ir(Dg,"4.7.3","esm2017")})();var Kk="firebase",Jk="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ir(Kk,Jk,"app");function cp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function KC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Qk=KC,JC=new rl("auth","Firebase",KC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const au=new kh("@firebase/auth");function Yk(t,...e){au.logLevel<=pe.WARN&&au.warn(`Auth (${To}): ${t}`,...e)}function _a(t,...e){au.logLevel<=pe.ERROR&&au.error(`Auth (${To}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zn(t,...e){throw dp(t,...e)}function En(t,...e){return dp(t,...e)}function QC(t,e,n){const r=Object.assign(Object.assign({},Qk()),{[e]:n});return new rl("auth","Firebase",r).create(e,{appName:t.name})}function wr(t){return QC(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function dp(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return JC.create(t,...e)}function re(t,e,...n){if(!t)throw dp(e,...n)}function Vn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw _a(e),new Error(e)}function Wn(t,e){t||Vn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Xk(){return gy()==="http:"||gy()==="https:"}function gy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Xk()||IA()||"connection"in navigator)?navigator.onLine:!0}function jk(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e,n){this.shortDelay=e,this.longDelay=n,Wn(n>e,"Short delay should be less than long delay!"),this.isMobile=TA()||SA()}get(){return Zk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fp(t,e){Wn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Vn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Vn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Vn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN=new dl(3e4,6e4);function Qu(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function So(t,e,n,r,i={}){return XC(t,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});const u=il(Object.assign({key:t.config.apiKey},s)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:c},o);return CA()||(d.referrerPolicy="no-referrer"),YC.fetch()(jC(t,t.config.apiHost,n,u),d)})}async function XC(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},eN),e);try{const i=new nN(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=await o.json();if("needConfirmation"in s)throw jl(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const u=o.ok?s.errorMessage:s.error.message,[c,d]=u.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw jl(t,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw jl(t,"email-already-in-use",s);if(c==="USER_DISABLED")throw jl(t,"user-disabled",s);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw QC(t,h,d);zn(t,h)}}catch(i){if(i instanceof Jn)throw i;zn(t,"network-request-failed",{message:String(i)})}}async function ZC(t,e,n,r,i={}){const o=await So(t,e,n,r,i);return"mfaPendingCredential"in o&&zn(t,"multi-factor-auth-required",{_serverResponse:o}),o}function jC(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?fp(t.config,i):`${t.config.apiScheme}://${i}`}class nN{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(En(this.auth,"network-request-failed")),tN.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function jl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=En(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rN(t,e){return So(t,"POST","/v1/accounts:delete",e)}async function e0(t,e){return So(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Is(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function iN(t,e=!1){const n=kt(t),r=await n.getIdToken(e),i=hp(r);re(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,s=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:Is(rd(i.auth_time)),issuedAtTime:Is(rd(i.iat)),expirationTime:Is(rd(i.exp)),signInProvider:s||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function rd(t){return Number(t)*1e3}function hp(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return _a("JWT malformed, contained fewer than 3 sections"),null;try{const i=mE(n);return i?JSON.parse(i):(_a("Failed to decode base64 JWT payload"),null)}catch(i){return _a("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function yy(t){const e=hp(t);return re(e,"internal-error"),re(typeof e.exp<"u","internal-error"),re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xs(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Jn&&oN(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function oN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Is(this.lastLoginAt),this.creationTime=Is(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uu(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Xs(t,e0(n,{idToken:r}));re(i==null?void 0:i.users.length,n,"internal-error");const o=i.users[0];t._notifyReloadListener(o);const s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?t0(o.providerUserInfo):[],u=aN(t.providerData,s),c=t.isAnonymous,d=!(t.email&&o.passwordHash)&&!(u!=null&&u.length),h=c?d:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new If(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(t,p)}async function lN(t){const e=kt(t);await uu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function aN(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function t0(t){return t.map(e=>{var{providerId:n}=e,r=cp(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uN(t,e){const n=await XC(t,{},async()=>{const r=il({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=jC(t,i,"/v1/token",`key=${o}`),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",YC.fetch()(s,{method:"POST",headers:u,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function cN(t,e){return So(t,"POST","/v2/accounts:revokeToken",Qu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){re(e.idToken,"internal-error"),re(typeof e.idToken<"u","internal-error"),re(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):yy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){re(e.length!==0,"internal-error");const n=yy(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:o}=await uN(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new Ji;return r&&(re(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(re(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(re(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ji,this.toJSON())}_performRefresh(){return Vn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(t,e){re(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ln{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=cp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new sN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new If(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Xs(this,this.stsTokenManager.getToken(this.auth,e));return re(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return iN(this,e)}reload(){return lN(this)}_assign(e){this!==e&&(re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ln(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await uu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Dn(this.auth.app))return Promise.reject(wr(this.auth));const e=await this.getIdToken();return await Xs(this,rN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,u,c,d,h;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,v=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,R=(s=n.photoURL)!==null&&s!==void 0?s:void 0,P=(u=n.tenantId)!==null&&u!==void 0?u:void 0,D=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,w=(d=n.createdAt)!==null&&d!==void 0?d:void 0,_=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:S,emailVerified:V,isAnonymous:F,providerData:b,stsTokenManager:A}=n;re(S&&A,e,"internal-error");const E=Ji.fromJSON(this.name,A);re(typeof S=="string",e,"internal-error"),er(p,e.name),er(g,e.name),re(typeof V=="boolean",e,"internal-error"),re(typeof F=="boolean",e,"internal-error"),er(v,e.name),er(R,e.name),er(P,e.name),er(D,e.name),er(w,e.name),er(_,e.name);const I=new Ln({uid:S,auth:e,email:g,emailVerified:V,displayName:p,isAnonymous:F,photoURL:R,phoneNumber:v,tenantId:P,stsTokenManager:E,createdAt:w,lastLoginAt:_});return b&&Array.isArray(b)&&(I.providerData=b.map(x=>Object.assign({},x))),D&&(I._redirectEventId=D),I}static async _fromIdTokenResponse(e,n,r=!1){const i=new Ji;i.updateFromServerResponse(n);const o=new Ln({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await uu(o),o}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];re(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?t0(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),u=new Ji;u.updateFromIdToken(r);const c=new Ln({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:s}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new If(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vy=new Map;function Un(t){Wn(t instanceof Function,"Expected a class definition");let e=vy.get(t);return e?(Wn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,vy.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}n0.type="NONE";const _y=n0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ta(t,e,n){return`firebase:${t}:${e}:${n}`}class Qi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=Ta(this.userKey,i.apiKey,o),this.fullPersistenceKey=Ta("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ln._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Qi(Un(_y),e,r);const i=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let o=i[0]||Un(_y);const s=Ta(r,e.config.apiKey,e.name);let u=null;for(const d of n)try{const h=await d._get(s);if(h){const p=Ln._fromJSON(e,h);d!==o&&(u=p),o=d;break}}catch{}const c=i.filter(d=>d._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new Qi(o,e,r):(o=c[0],u&&await o._set(s,u.toJSON()),await Promise.all(n.map(async d=>{if(d!==o)try{await d._remove(s)}catch{}})),new Qi(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ty(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(s0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(r0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(a0(e))return"Blackberry";if(u0(e))return"Webos";if(i0(e))return"Safari";if((e.includes("chrome/")||o0(e))&&!e.includes("edge/"))return"Chrome";if(l0(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function r0(t=gt()){return/firefox\//i.test(t)}function i0(t=gt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function o0(t=gt()){return/crios\//i.test(t)}function s0(t=gt()){return/iemobile/i.test(t)}function l0(t=gt()){return/android/i.test(t)}function a0(t=gt()){return/blackberry/i.test(t)}function u0(t=gt()){return/webos/i.test(t)}function pp(t=gt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function dN(t=gt()){var e;return pp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function fN(){return wA()&&document.documentMode===10}function c0(t=gt()){return pp(t)||l0(t)||u0(t)||a0(t)||/windows phone/i.test(t)||s0(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d0(t,e=[]){let n;switch(t){case"Browser":n=Ty(gt());break;case"Worker":n=`${Ty(gt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${To}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((s,u)=>{try{const c=e(o);s(c)}catch(c){u(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pN(t,e={}){return So(t,"GET","/v2/passwordPolicy",Qu(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN=6;class gN{constructor(e){var n,r,i,o;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:mN,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,u;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(u=c.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ey(this),this.idTokenSubscription=new Ey(this),this.beforeStateQueue=new hN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=JC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Un(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Qi.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await e0(this,{idToken:e}),r=await Ln._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Dn(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!s||s===u)&&(c!=null&&c.user)&&(i=c.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await uu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=jk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Dn(this.app))return Promise.reject(wr(this));const n=e?kt(e):null;return n&&re(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Dn(this.app)?Promise.reject(wr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Dn(this.app)?Promise.reject(wr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Un(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await pN(this),n=new gN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new rl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await cN(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Un(e)||this._popupRedirectResolver;re(n,this,"argument-error"),this.redirectPersistenceManager=await Qi.create(this,[Un(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let s=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(re(u,this,"internal-error"),u.then(()=>{s||o(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{s=!0,c()}}else{const c=e.addObserver(n);return()=>{s=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=d0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&Yk(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Yu(t){return kt(t)}class Ey{constructor(e){this.auth=e,this.observer=null,this.addObserver=DA(n=>this.observer=n)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function vN(t){mp=t}function _N(t){return mp.loadJS(t)}function TN(){return mp.gapiScript}function EN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(t,e){const n=Mh(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),o=n.getOptions();if(Xa(o,e??{}))return i;zn(i,"already-initialized")}return n.initialize({options:e})}function IN(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Un);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function SN(t,e,n){const r=Yu(t);re(r._canInitEmulator,r,"emulator-config-failed"),re(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=f0(e),{host:s,port:u}=wN(e),c=u===null?"":`:${u}`;r.config.emulator={url:`${o}//${s}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),AN()}function f0(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function wN(t){const e=f0(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:Cy(r.substr(o.length+1))}}else{const[o,s]=r.split(":");return{host:o,port:Cy(s)}}}function Cy(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function AN(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Vn("not implemented")}_getIdTokenResponse(e){return Vn("not implemented")}_linkToIdToken(e,n){return Vn("not implemented")}_getReauthenticationResolver(e){return Vn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yi(t,e){return ZC(t,"POST","/v1/accounts:signInWithIdp",Qu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RN="http://localhost";class ci extends h0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ci(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):zn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,o=cp(n,["providerId","signInMethod"]);if(!r||!i)return null;const s=new ci(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){const n=this.buildRequest();return Yi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Yi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Yi(e,n)}buildRequest(){const e={requestUri:RN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=il(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl extends p0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or extends fl{constructor(){super("facebook.com")}static credential(e){return ci._fromParams({providerId:or.PROVIDER_ID,signInMethod:or.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return or.credentialFromTaggedObject(e)}static credentialFromError(e){return or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return or.credential(e.oauthAccessToken)}catch{return null}}}or.FACEBOOK_SIGN_IN_METHOD="facebook.com";or.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr extends fl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ci._fromParams({providerId:sr.PROVIDER_ID,signInMethod:sr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return sr.credentialFromTaggedObject(e)}static credentialFromError(e){return sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return sr.credential(n,r)}catch{return null}}}sr.GOOGLE_SIGN_IN_METHOD="google.com";sr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr extends fl{constructor(){super("github.com")}static credential(e){return ci._fromParams({providerId:lr.PROVIDER_ID,signInMethod:lr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return lr.credentialFromTaggedObject(e)}static credentialFromError(e){return lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return lr.credential(e.oauthAccessToken)}catch{return null}}}lr.GITHUB_SIGN_IN_METHOD="github.com";lr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar extends fl{constructor(){super("twitter.com")}static credential(e,n){return ci._fromParams({providerId:ar.PROVIDER_ID,signInMethod:ar.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ar.credentialFromTaggedObject(e)}static credentialFromError(e){return ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ar.credential(n,r)}catch{return null}}}ar.TWITTER_SIGN_IN_METHOD="twitter.com";ar.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xN(t,e){return ZC(t,"POST","/v1/accounts:signUp",Qu(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const o=await Ln._fromIdTokenResponse(e,r,i),s=Iy(r);return new Nr({user:o,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Iy(r);return new Nr({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Iy(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m0(t){var e;if(Dn(t.app))return Promise.reject(wr(t));const n=Yu(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Nr({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await xN(n,{returnSecureToken:!0}),i=await Nr._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu extends Jn{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,cu.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new cu(e,n,r,i)}}function g0(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?cu._fromErrorAndOperation(t,o,e,r):o})}async function PN(t,e,n=!1){const r=await Xs(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Nr._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kN(t,e,n=!1){const{auth:r}=t;if(Dn(r.app))return Promise.reject(wr(r));const i="reauthenticate";try{const o=await Xs(t,g0(r,i,e,t),n);re(o.idToken,r,"internal-error");const s=hp(o.idToken);re(s,r,"internal-error");const{sub:u}=s;return re(t.uid===u,r,"user-mismatch"),Nr._forOperation(t,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&zn(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NN(t,e,n=!1){if(Dn(t.app))return Promise.reject(wr(t));const r="signIn",i=await g0(t,r,e),o=await Nr._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MN(t,e,n,r){return kt(t).onIdTokenChanged(e,n,r)}function DN(t,e,n){return kt(t).beforeAuthStateChanged(e,n)}const du="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(du,"1"),this.storage.removeItem(du),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN=1e3,LN=10;class v0 extends y0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=c0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((s,u,c)=>{this.notifyListeners(s,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!n&&this.localCache[r]===s||this.notifyListeners(r,s)},o=this.storage.getItem(r);fN()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,LN):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},VN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}v0.type="LOCAL";const UN=v0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0 extends y0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}_0.type="SESSION";const T0=_0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FN(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Xu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:o}=n.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const u=Array.from(s).map(async d=>d(n.origin,o)),c=await FN(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Xu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gp(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((u,c)=>{const d=gp("",20);i.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){const g=p;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(g.data.response);break;default:clearTimeout(h),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cn(){return window}function ON(t){Cn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E0(){return typeof Cn().WorkerGlobalScope<"u"&&typeof Cn().importScripts=="function"}async function BN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function qN(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function $N(){return E0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0="firebaseLocalStorageDb",GN=1,fu="firebaseLocalStorage",I0="fbase_key";class hl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Zu(t,e){return t.transaction([fu],e?"readwrite":"readonly").objectStore(fu)}function HN(){const t=indexedDB.deleteDatabase(C0);return new hl(t).toPromise()}function Sf(){const t=indexedDB.open(C0,GN);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(fu,{keyPath:I0})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(fu)?e(r):(r.close(),await HN(),e(await Sf()))})})}async function Sy(t,e,n){const r=Zu(t,!0).put({[I0]:e,value:n});return new hl(r).toPromise()}async function zN(t,e){const n=Zu(t,!1).get(e),r=await new hl(n).toPromise();return r===void 0?null:r.value}function wy(t,e){const n=Zu(t,!0).delete(e);return new hl(n).toPromise()}const WN=800,KN=3;class S0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Sf(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>KN)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return E0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Xu._getInstance($N()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await BN(),!this.activeServiceWorker)return;this.sender=new bN(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||qN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Sf();return await Sy(e,du,"1"),await wy(e,du),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Sy(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>zN(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>wy(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=Zu(i,!1).getAll();return new hl(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),WN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}S0.type="LOCAL";const JN=S0;new dl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QN(t,e){return e?Un(e):(re(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp extends h0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Yi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Yi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Yi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function YN(t){return NN(t.auth,new yp(t),t.bypassAuthState)}function XN(t){const{auth:e,user:n}=t;return re(n,e,"internal-error"),kN(n,new yp(t),t.bypassAuthState)}async function ZN(t){const{auth:e,user:n}=t;return re(n,e,"internal-error"),PN(n,new yp(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:u}=e;if(s){this.reject(s);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return YN;case"linkViaPopup":case"linkViaRedirect":return ZN;case"reauthViaPopup":case"reauthViaRedirect":return XN;default:zn(this.auth,"internal-error")}}resolve(e){Wn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jN=new dl(2e3,1e4);class Oi extends w0{constructor(e,n,r,i,o){super(e,n,i,o),this.provider=r,this.authWindow=null,this.pollId=null,Oi.currentPopupAction&&Oi.currentPopupAction.cancel(),Oi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return re(e,this.auth,"internal-error"),e}async onExecution(){Wn(this.filter.length===1,"Popup operations only handle one event");const e=gp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(En(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(En(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Oi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(En(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,jN.get())};e()}}Oi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eM="pendingRedirect",Ea=new Map;class tM extends w0{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ea.get(this.auth._key());if(!e){try{const r=await nM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ea.set(this.auth._key(),e)}return this.bypassAuthState||Ea.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function nM(t,e){const n=oM(e),r=iM(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function rM(t,e){Ea.set(t._key(),e)}function iM(t){return Un(t._redirectPersistence)}function oM(t){return Ta(eM,t.config.apiKey,t.name)}async function sM(t,e,n=!1){if(Dn(t.app))return Promise.reject(wr(t));const r=Yu(t),i=QN(r,e),s=await new tM(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lM=10*60*1e3;class aM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!uM(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!A0(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(En(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=lM&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ay(e))}saveEventToCache(e){this.cachedEventUids.add(Ay(e)),this.lastProcessedEventTime=Date.now()}}function Ay(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function A0({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function uM(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return A0(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cM(t,e={}){return So(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fM=/^https?/;async function hM(t){if(t.config.emulator)return;const{authorizedDomains:e}=await cM(t);for(const n of e)try{if(pM(n))return}catch{}zn(t,"unauthorized-domain")}function pM(t){const e=Cf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!fM.test(n))return!1;if(dM.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mM=new dl(3e4,6e4);function Ry(){const t=Cn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function gM(t){return new Promise((e,n)=>{var r,i,o;function s(){Ry(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ry(),n(En(t,"network-request-failed"))},timeout:mM.get()})}if(!((i=(r=Cn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Cn().gapi)===null||o===void 0)&&o.load)s();else{const u=EN("iframefcb");return Cn()[u]=()=>{gapi.load?s():n(En(t,"network-request-failed"))},_N(`${TN()}?onload=${u}`).catch(c=>n(c))}}).catch(e=>{throw Ca=null,e})}let Ca=null;function yM(t){return Ca=Ca||gM(t),Ca}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vM=new dl(5e3,15e3),_M="__/auth/iframe",TM="emulator/auth/iframe",EM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},CM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function IM(t){const e=t.config;re(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?fp(e,TM):`https://${t.config.authDomain}/${_M}`,r={apiKey:e.apiKey,appName:t.name,v:To},i=CM.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${il(r).slice(1)}`}async function SM(t){const e=await yM(t),n=Cn().gapi;return re(n,t,"internal-error"),e.open({where:document.body,url:IM(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:EM,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const s=En(t,"network-request-failed"),u=Cn().setTimeout(()=>{o(s)},vM.get());function c(){Cn().clearTimeout(u),i(r)}r.ping(c).then(c,()=>{o(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},AM=500,RM=600,xM="_blank",PM="http://localhost";class xy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function kM(t,e,n,r=AM,i=RM){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const c=Object.assign(Object.assign({},wM),{width:r.toString(),height:i.toString(),top:o,left:s}),d=gt().toLowerCase();n&&(u=o0(d)?xM:n),r0(d)&&(e=e||PM,c.scrollbars="yes");const h=Object.entries(c).reduce((g,[v,R])=>`${g}${v}=${R},`,"");if(dN(d)&&u!=="_self")return NM(e||"",u),new xy(null);const p=window.open(e||"",u,h);re(p,t,"popup-blocked");try{p.focus()}catch{}return new xy(p)}function NM(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MM="__/auth/handler",DM="emulator/auth/handler",VM=encodeURIComponent("fac");async function Py(t,e,n,r,i,o){re(t.config.authDomain,t,"auth-domain-config-required"),re(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:To,eventId:i};if(e instanceof p0){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",MA(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,p]of Object.entries({}))s[h]=p}if(e instanceof fl){const h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}t.tenantId&&(s.tid=t.tenantId);const u=s;for(const h of Object.keys(u))u[h]===void 0&&delete u[h];const c=await t._getAppCheckToken(),d=c?`#${VM}=${encodeURIComponent(c)}`:"";return`${LM(t)}?${il(u).slice(1)}${d}`}function LM({config:t}){return t.emulator?fp(t,DM):`https://${t.authDomain}/${MM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const id="webStorageSupport";class UM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=T0,this._completeRedirectFn=sM,this._overrideRedirectResult=rM}async _openPopup(e,n,r,i){var o;Wn((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await Py(e,n,r,Cf(),i);return kM(e,s,gp())}async _openRedirect(e,n,r,i){await this._originValidation(e);const o=await Py(e,n,r,Cf(),i);return ON(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Wn(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await SM(e),r=new aM(e);return n.register("authEvent",i=>(re(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(id,{type:id},i=>{var o;const s=(o=i==null?void 0:i[0])===null||o===void 0?void 0:o[id];s!==void 0&&n(!!s),zn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=hM(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return c0()||i0()||pp()}}const FM=UM;var ky="@firebase/auth",Ny="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OM(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function BM(t){lo(new si("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:u}=r.options;re(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:s,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:d0(t)},d=new yN(r,i,o,c);return IN(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),lo(new si("auth-internal",e=>{const n=Yu(e.getProvider("auth").getImmediate());return(r=>new bM(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ir(ky,Ny,OM(t)),Ir(ky,Ny,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qM=5*60,$M=vE("authIdTokenMaxAge")||qM;let My=null;const GM=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>$M)return;const i=n==null?void 0:n.token;My!==i&&(My=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function HM(t=CE()){const e=Mh(t,"auth");if(e.isInitialized())return e.getImmediate();const n=CN(t,{popupRedirectResolver:FM,persistence:[JN,UN,T0]}),r=vE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const s=GM(o.toString());DN(n,s,()=>s(n.currentUser)),MN(n,u=>s(u))}}const i=gE("auth");return i&&SN(n,`http://${i}`),n}function zM(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}vN({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=En("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",zM().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});BM("Browser");/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var WM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KM=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=(t,e)=>{const n=le.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:s,className:u="",children:c,...d},h)=>le.createElement("svg",{ref:h,...WM,width:i,height:i,stroke:r,strokeWidth:s?Number(o)*24/Number(i):o,className:["lucide",`lucide-${KM(t)}`,u].join(" "),...d},[...e.map(([p,g])=>le.createElement(p,g)),...Array.isArray(c)?c:[c]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R0=Xt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=Xt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JM=Xt("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QM=Xt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dy=Xt("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wr=Xt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x0=Xt("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P0=Xt("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kr=Xt("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k0=Xt("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N0=Xt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const od=Xt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),YM=({epic:t,onRefine:e,onGenerateIssues:n,onAddIssue:r,onUpdateEpic:i,onDeleteEpic:o,loadingAI:s,issues:u})=>{const[c,d]=le.useState(!1),[h,p]=le.useState(!1),[g,v]=le.useState(!1),[R,P]=le.useState(!1),[D,w]=le.useState(null),[_,S]=le.useState({title:t.title||"",description:t.description||"",summary:t.summary||"",acceptanceCriteria:t.acceptanceCriteria||"",priority:t.priority||"Medium",tShirtSize:t.tShirtSize||"M"}),[V,F]=le.useState(!1);let b="bg-gray-400",A="Not Started",E=C.jsx(QM,{className:"w-4 h-4 mr-1"});t.status==="inProgress"?(b="bg-yellow-400",A="In Progress",E=C.jsx(x0,{className:"w-4 h-4 mr-1"})):t.status==="complete"&&(b="bg-green-500",A="Complete",E=C.jsx(JM,{className:"w-4 h-4 mr-1"}));const I=u.filter(H=>H.epicId===t.id),x=()=>{i(t.id,_),p(!1)},N=()=>{S({title:t.title||"",description:t.description||"",summary:t.summary||"",acceptanceCriteria:t.acceptanceCriteria||"",priority:t.priority||"Medium",tShirtSize:t.tShirtSize||"M"}),p(!1)},M=()=>{o(t.id),v(!1)},k=H=>{w(H.data),S(H.data)},He=()=>{D&&(i(t.id,D),w(null),P(!1),p(!1))},Oe=()=>{S({title:t.title||"",description:t.description||"",summary:t.summary||"",acceptanceCriteria:t.acceptanceCriteria||"",priority:t.priority||"Medium",tShirtSize:t.tShirtSize||"M"}),w(null),P(!1)},Nt=()=>{const H={id:Date.now().toString(),title:_.title,description:_.description,summary:_.summary,acceptanceCriteria:_.acceptanceCriteria,priority:_.priority,tShirtSize:_.tShirtSize,status:"Not Started"};onAddEpic(H),F(!1)},Mt=H=>new Date(H).toLocaleString(),J=H=>{switch(H){case"Critical":return"text-red-800 font-bold";case"High":return"text-red-600";case"Medium":return"text-yellow-600";case"Low":return"text-green-600";default:return"text-gray-600"}},ne=H=>{switch(H){case"XS":return"text-green-600";case"S":return"text-green-500";case"M":return"text-yellow-600";case"L":return"text-orange-600";case"XL":return"text-red-600";default:return"text-gray-600"}};return C.jsxs("div",{className:"bg-blue-100 rounded-lg p-4 shadow-md transition-all duration-300",children:[C.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>d(!c),children:[C.jsxs("div",{className:"flex-1 min-w-0",children:[C.jsx("h3",{className:"text-lg font-semibold text-blue-800 break-words",children:t.title}),C.jsxs("div",{className:"flex items-center mt-1 text-xs font-medium text-gray-600",children:[C.jsxs("span",{className:`px-2 py-0.5 rounded-full text-white ${b}`,children:[E,A]}),C.jsxs("span",{className:"ml-2",children:["(",I.length," issues)"]})]}),C.jsxs("div",{className:"flex items-center mt-1 text-xs font-medium gap-3",children:[C.jsxs("span",{className:`font-semibold ${J(t.priority||"Medium")}`,children:["Priority: ",t.priority||"Medium"]}),C.jsxs("span",{className:`font-semibold ${ne(t.tShirtSize||"M")}`,children:["Size: ",t.tShirtSize||"M"]})]})]}),C.jsxs("div",{className:"flex items-center space-x-1 ml-2",children:[C.jsx("button",{onClick:H=>{H.stopPropagation(),P(!0),d(!0)},className:"p-1 text-purple-600 hover:bg-purple-200 rounded transition-colors",title:"View History",disabled:!t.history||t.history.length===0,children:C.jsx(Dy,{className:"w-4 h-4"})}),C.jsx("button",{onClick:H=>{H.stopPropagation(),p(!0),d(!0)},className:"p-1 text-blue-600 hover:bg-blue-200 rounded transition-colors",title:"Edit Epic",children:C.jsx(k0,{className:"w-4 h-4"})}),C.jsx("button",{onClick:H=>{H.stopPropagation(),v(!0)},className:"p-1 text-red-600 hover:bg-red-200 rounded transition-colors",title:"Delete Epic",children:C.jsx(N0,{className:"w-4 h-4"})})]}),C.jsx(Ss,{className:`w-6 h-6 text-gray-500 transition-transform duration-300 ${c?"rotate-90":""}`})]}),c&&C.jsx("div",{className:"mt-4 space-y-3 border-t pt-4 border-gray-300",children:h?C.jsxs("div",{className:"space-y-3",children:[C.jsxs("div",{children:[C.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Title"}),C.jsx("input",{type:"text",value:_.title,onChange:H=>S({..._,title:H.target.value}),className:"w-full p-2 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-400"})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Summary"}),C.jsx("input",{type:"text",value:_.summary,onChange:H=>S({..._,summary:H.target.value}),className:"w-full p-2 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"Brief summary of the epic"})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Description"}),C.jsx("textarea",{value:_.description,onChange:H=>S({..._,description:H.target.value}),className:"w-full p-2 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-400",rows:"3"})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Acceptance Criteria"}),C.jsx("textarea",{value:_.acceptanceCriteria,onChange:H=>S({..._,acceptanceCriteria:H.target.value}),className:"w-full p-2 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-400",rows:"3",placeholder:"Given, When, Then format..."})]}),C.jsxs("div",{className:"flex space-x-4",children:[C.jsxs("div",{className:"flex-1",children:[C.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Priority"}),C.jsxs("select",{value:_.priority,onChange:H=>S({..._,priority:H.target.value}),className:"w-full p-2 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-400",children:[C.jsx("option",{value:"Low",children:"Low"}),C.jsx("option",{value:"Medium",children:"Medium"}),C.jsx("option",{value:"High",children:"High"}),C.jsx("option",{value:"Critical",children:"Critical"})]})]}),C.jsxs("div",{className:"flex-1",children:[C.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"T-Shirt Size"}),C.jsxs("select",{value:_.tShirtSize,onChange:H=>S({..._,tShirtSize:H.target.value}),className:"w-full p-2 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-400",children:[C.jsx("option",{value:"XS",children:"XS"}),C.jsx("option",{value:"S",children:"S"}),C.jsx("option",{value:"M",children:"M"}),C.jsx("option",{value:"L",children:"L"}),C.jsx("option",{value:"XL",children:"XL"})]})]})]}),C.jsxs("div",{className:"flex space-x-2 mt-4",children:[C.jsxs("button",{onClick:x,className:"px-3 py-1 bg-green-500 text-white rounded-full text-xs font-semibold hover:bg-green-600 transition-colors flex items-center",children:[C.jsx(P0,{className:"w-4 h-4 mr-1"})," Save"]}),C.jsxs("button",{onClick:N,className:"px-3 py-1 bg-gray-500 text-white rounded-full text-xs font-semibold hover:bg-gray-600 transition-colors flex items-center",children:[C.jsx(od,{className:"w-4 h-4 mr-1"})," Cancel"]})]})]}):C.jsxs(C.Fragment,{children:[t.summary&&C.jsxs("div",{children:[C.jsx("h4",{className:"text-xs font-medium text-gray-700 mb-1",children:"Summary"}),C.jsx("p",{className:"text-sm text-gray-700",children:t.summary})]}),C.jsxs("div",{children:[C.jsx("h4",{className:"text-xs font-medium text-gray-700 mb-1",children:"Description"}),C.jsx("p",{className:"text-sm text-gray-700",children:t.description})]}),t.acceptanceCriteria&&C.jsxs("div",{children:[C.jsx("h4",{className:"text-xs font-medium text-gray-700 mb-1",children:"Acceptance Criteria"}),C.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-line",children:t.acceptanceCriteria})]})]})}),C.jsxs("div",{className:"flex space-x-2 mt-4 pt-3 border-t border-gray-200",children:[C.jsxs("button",{onClick:H=>{H.stopPropagation(),e(t.id)},className:"px-3 py-1 bg-yellow-400 text-yellow-900 rounded-full text-xs font-semibold hover:bg-yellow-500 transition-colors flex items-center",disabled:s,children:[C.jsx(Kr,{className:"w-4 h-4 mr-1"})," Refine"]}),C.jsxs("button",{onClick:H=>{H.stopPropagation(),n(t.id)},className:"px-3 py-1 bg-purple-500 text-white rounded-full text-xs font-semibold hover:bg-purple-600 transition-colors flex items-center",disabled:s,children:[C.jsx(Kr,{className:"w-4 h-4 mr-1"})," Generate"]}),C.jsxs("button",{onClick:H=>{H.stopPropagation(),r(t.id)},className:"px-3 py-1 bg-gray-300 text-gray-800 rounded-full text-xs font-semibold hover:bg-gray-400 transition-colors flex items-center",children:[C.jsx(Wr,{className:"w-4 h-4 mr-1"})," Add"]})]}),R&&C.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-start justify-start p-4 z-50",children:C.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-96 mt-4 ml-4 max-h-96 overflow-y-auto",children:[C.jsxs("div",{className:"flex items-center justify-between mb-4",children:[C.jsxs("h3",{className:"font-bold text-lg text-purple-600 flex items-center",children:[C.jsx(Dy,{className:"w-5 h-5 mr-2"}),"Epic History"]}),C.jsx("button",{onClick:()=>P(!1),className:"text-gray-500 hover:text-gray-700",children:C.jsx(od,{className:"w-5 h-5"})})]}),C.jsx("div",{className:"space-y-3 mb-4",children:t.history&&t.history.length>0?[...t.history].reverse().map((H,fe)=>C.jsxs("div",{className:`p-3 border rounded cursor-pointer transition-colors ${D===H.data?"border-purple-500 bg-purple-50":"border-gray-200 hover:border-purple-300 hover:bg-purple-25"}`,onClick:()=>k(H),children:[C.jsxs("div",{className:"flex justify-between items-start mb-1",children:[C.jsx("span",{className:"text-sm font-medium text-purple-700",children:H.action}),C.jsx("span",{className:"text-xs text-gray-500",children:H.user})]}),C.jsx("div",{className:"text-xs text-gray-600",children:Mt(H.timestamp)}),C.jsx("div",{className:"text-xs text-gray-500 mt-1 truncate",children:H.data.title})]},fe)):C.jsx("p",{className:"text-gray-500 text-sm",children:"No history available"})}),D&&C.jsxs("div",{className:"flex space-x-2 pt-3 border-t",children:[C.jsx("button",{onClick:He,className:"flex-1 bg-purple-500 text-white font-bold py-2 px-4 rounded hover:bg-purple-600 transition-colors",children:"Apply"}),C.jsx("button",{onClick:Oe,className:"flex-1 bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded hover:bg-gray-400 transition-colors",children:"Cancel"})]})]})}),g&&C.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:C.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-sm w-full",children:[C.jsx("h3",{className:"font-bold text-lg mb-2 text-red-600",children:"Delete Epic"}),C.jsxs("p",{className:"text-gray-700 mb-4",children:['Are you sure you want to delete "',t.title,'"? This will also delete all ',I.length," associated issues. This action cannot be undone."]}),C.jsxs("div",{className:"flex space-x-2",children:[C.jsx("button",{onClick:M,className:"flex-1 bg-red-500 text-white font-bold py-2 px-4 rounded hover:bg-red-600 transition-colors",children:"Delete"}),C.jsx("button",{onClick:()=>v(!1),className:"flex-1 bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded hover:bg-gray-400 transition-colors",children:"Cancel"})]})]})}),V&&C.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:C.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-sm w-full",children:[C.jsx("h3",{className:"font-bold text-lg mb-2 text-blue-600",children:"Create New Epic"}),C.jsx("input",{type:"text",placeholder:"Title",value:_.title,onChange:H=>S({..._,title:H.target.value}),className:"w-full p-2 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-400 mb-2"}),C.jsx("textarea",{placeholder:"Description",value:_.description,onChange:H=>S({..._,description:H.target.value}),className:"w-full p-2 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-400 mb-2",rows:"3"}),C.jsxs("button",{onClick:Nt,className:"w-full px-3 py-1 bg-green-500 text-white rounded-full text-xs font-semibold hover:bg-green-600 transition-colors flex items-center justify-center",children:[C.jsx(Wr,{className:"w-4 h-4 mr-1"})," Save New Epic"]}),C.jsxs("button",{onClick:()=>F(!1),className:"w-full px-3 py-1 bg-gray-500 text-white rounded-full text-xs font-semibold hover:bg-gray-600 transition-colors flex items-center justify-center mt-2",children:[C.jsx(od,{className:"w-4 h-4 mr-1"})," Cancel"]})]})})]})},M0=({issue:t,onUpdate:e,onDelete:n,allSprints:r})=>{var h;const[i,o]=le.useState(!1),[s,u]=le.useState(t);le.useEffect(()=>{u(t)},[t]);const c=()=>{e(t.id,"summary",s.summary),e(t.id,"description",s.description),e(t.id,"acceptanceCriteria",s.acceptanceCriteria),e(t.id,"storyPoints",parseInt(s.storyPoints,10)),e(t.id,"timeEstimate",parseInt(s.timeEstimate,10)),e(t.id,"status",s.status),e(t.id,"sprint",s.sprint),o(!1)},d=["To Do","In Progress","Done"];return C.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 shadow-sm border border-gray-200",children:[C.jsxs("div",{className:"flex items-center justify-between mb-2",children:[C.jsx("h4",{className:"font-semibold text-sm text-gray-900 flex-1 break-words",children:s.summary}),C.jsxs("div",{className:"flex-shrink-0 flex items-center space-x-1 ml-2",children:[i?C.jsx("button",{onClick:c,className:"text-green-500 hover:text-green-600 transition-colors p-1 rounded-full",title:"Save Issue",children:C.jsx(P0,{className:"w-4 h-4"})}):C.jsx("button",{onClick:()=>o(!0),className:"text-blue-500 hover:text-blue-600 transition-colors p-1 rounded-full",title:"Edit Issue",children:C.jsx(k0,{className:"w-4 h-4"})}),C.jsx("button",{onClick:()=>n(t.id),className:"text-red-500 hover:text-red-600 transition-colors p-1 rounded-full",title:"Delete Issue",children:C.jsx(N0,{className:"w-4 h-4"})})]})]}),C.jsx("div",{className:"text-xs text-gray-600 space-y-2",children:i?C.jsxs("div",{className:"space-y-2",children:[C.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Summary"}),C.jsx("textarea",{value:s.summary,onChange:p=>u({...s,summary:p.target.value}),className:"w-full p-2 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-400",rows:"3",placeholder:"Summary"}),C.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Description"}),C.jsx("textarea",{value:s.description,onChange:p=>u({...s,description:p.target.value}),className:"w-full p-2 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-400",rows:"3",placeholder:"Description"}),C.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Acceptance Criteria"}),C.jsx("textarea",{value:s.acceptanceCriteria,onChange:p=>u({...s,acceptanceCriteria:p.target.value}),className:"w-full p-2 text-sm border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-400",rows:"3",placeholder:"Acceptance Criteria (Gherkin)"}),C.jsxs("div",{className:"flex space-x-2",children:[C.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Story Points"}),C.jsx("input",{type:"number",value:s.storyPoints,onChange:p=>u({...s,storyPoints:p.target.value}),className:"w-1/2 text-xs p-2 border rounded",placeholder:"Story Points"}),C.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Time Estimate"}),C.jsx("input",{type:"number",value:s.timeEstimate,onChange:p=>u({...s,timeEstimate:p.target.value}),className:"w-1/2 text-xs p-2 border rounded",placeholder:"Time Estimate (hrs)"})]}),C.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Status"}),C.jsx("select",{value:s.status,onChange:p=>u({...s,status:p.target.value}),className:"w-full text-xs p-2 border rounded",children:d.map(p=>C.jsx("option",{value:p,children:p},p))}),C.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Sprint"}),C.jsxs("select",{value:s.sprint||"backlog",onChange:p=>u({...s,sprint:p.target.value==="backlog"?null:p.target.value}),className:"w-full text-xs p-2 border rounded",children:[C.jsx("option",{value:"backlog",children:"Backlog"}),r.map(p=>C.jsx("option",{value:p.id,children:p.name},p.id))]})]}):C.jsxs("div",{className:"space-y-1",children:[C.jsxs("p",{children:[C.jsx("span",{className:"font-medium",children:"Type:"})," ",s.type]}),C.jsxs("p",{children:[C.jsx("span",{className:"font-medium",children:"Status:"})," ",s.status]}),C.jsxs("p",{children:[C.jsx("span",{className:"font-medium",children:"SP:"})," ",s.storyPoints," | ",C.jsx("span",{className:"font-medium",children:"Est:"})," ",s.timeEstimate,"h"]}),s.sprint&&C.jsxs("p",{children:[C.jsx("span",{className:"font-medium",children:"Sprint:"})," ",(h=r.find(p=>p.id===s.sprint))==null?void 0:h.name]})]})})]})},XM=({sprint:t,issues:e,onUpdateIssue:n,onDeleteIssue:r,allSprints:i})=>{const[o,s]=le.useState(!1),u=()=>{s(!o)};return C.jsxs("div",{className:"mt-4 border-t pt-4 border-gray-200",children:[C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsx("button",{onClick:u,className:"collapse-button",children:o?C.jsx(Ss,{}):C.jsx(R0,{})}),C.jsxs("h3",{className:"text-xl font-bold text-gray-700 mb-2",children:[t.name,C.jsxs("span",{className:"ml-2 bg-blue-100 text-blue-800 text-xs font-semibold mr-2 px-2.5 py-0.5 rounded",children:[e.length," Issues"]})]})]}),!o&&C.jsx("div",{className:"space-y-3",children:e.map(c=>C.jsx(M0,{issue:c,onUpdate:n,onDelete:r,allSprints:i},c.id))})]})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let ZM,jM;function eD(){return{geminiUrl:ZM,vertexUrl:jM}}function tD(t,e,n,r){var i,o;if(!(t!=null&&t.baseUrl)){const s=eD();return e?(i=s.vertexUrl)!==null&&i!==void 0?i:n:(o=s.geminiUrl)!==null&&o!==void 0?o:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gi{}function Y(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const o=e[i];return o!=null?String(o):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function a(t,e,n){for(let o=0;o<e.length-1;o++){const s=e[o];if(s.endsWith("[]")){const u=s.slice(0,-2);if(!(u in t))if(Array.isArray(n))t[u]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(t[u])){const c=t[u];if(Array.isArray(n))for(let d=0;d<c.length;d++){const h=c[d];a(h,e.slice(o+1),n[d])}else for(const d of c)a(d,e.slice(o+1),n)}return}else if(s.endsWith("[0]")){const u=s.slice(0,-3);u in t||(t[u]=[{}]);const c=t[u];a(c[0],e.slice(o+1),n);return}(!t[s]||typeof t[s]!="object")&&(t[s]={}),t=t[s]}const r=e[e.length-1],i=t[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else t[r]=n}function l(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;const r=e[n];if(r.endsWith("[]")){const i=r.slice(0,-2);if(i in t){const o=t[i];return Array.isArray(o)?o.map(s=>l(s,e.slice(n+1))):void 0}else return}else t=t[r]}return t}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wf(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Vy;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Vy||(Vy={}));var Ly;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Ly||(Ly={}));var fr;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(fr||(fr={}));var Uy;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(Uy||(Uy={}));var Fy;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Fy||(Fy={}));var by;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(by||(by={}));var Oy;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Oy||(Oy={}));var By;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(By||(By={}));var qy;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(qy||(qy={}));var $y;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})($y||($y={}));var Gy;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(Gy||(Gy={}));var Hy;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Hy||(Hy={}));var zy;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(zy||(zy={}));var Wy;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(Wy||(Wy={}));var Ky;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Ky||(Ky={}));var hu;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(hu||(hu={}));var Jy;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Jy||(Jy={}));var Af;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Af||(Af={}));var Qy;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Qy||(Qy={}));var Yy;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Yy||(Yy={}));var Xy;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(Xy||(Xy={}));var Zy;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Zy||(Zy={}));var jy;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(jy||(jy={}));var ev;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(ev||(ev={}));var tv;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(tv||(tv={}));var nv;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(nv||(nv={}));var rv;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(rv||(rv={}));var iv;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(iv||(iv={}));var ov;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(ov||(ov={}));var sv;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(sv||(sv={}));var lv;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(lv||(lv={}));var av;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(av||(av={}));var uv;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(uv||(uv={}));var cv;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(cv||(cv={}));var dv;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(dv||(dv={}));var fv;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(fv||(fv={}));var hv;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(hv||(hv={}));var pv;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(pv||(pv={}));var mv;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(mv||(mv={}));var gv;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(gv||(gv={}));var yv;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(yv||(yv={}));var vv;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(vv||(vv={}));var _v;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(_v||(_v={}));var Tv;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Tv||(Tv={}));var Ev;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Ev||(Ev={}));var Bi;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Bi||(Bi={}));class Rf{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class ts{get text(){var e,n,r,i,o,s,u,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",h=!1;const p=[];for(const g of(c=(u=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)!==null&&c!==void 0?c:[]){for(const[v,R]of Object.entries(g))v!=="text"&&v!=="thought"&&(R!==null||R!==void 0)&&p.push(v);if(typeof g.text=="string"){if(typeof g.thought=="boolean"&&g.thought)continue;h=!0,d+=g.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),h?d:void 0}get data(){var e,n,r,i,o,s,u,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const h=[];for(const p of(c=(u=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)!==null&&c!==void 0?c:[]){for(const[g,v]of Object.entries(p))g!=="inlineData"&&(v!==null||v!==void 0)&&h.push(g);p.inlineData&&typeof p.inlineData.data=="string"&&(d+=atob(p.inlineData.data))}return h.length>0&&console.warn(`there are non-data parts ${h} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,n,r,i,o,s,u,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(c=(u=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(h=>h.functionCall).map(h=>h.functionCall).filter(h=>h!==void 0);if((d==null?void 0:d.length)!==0)return d}get executableCode(){var e,n,r,i,o,s,u,c,d;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const h=(c=(u=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((h==null?void 0:h.length)!==0)return(d=h==null?void 0:h[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,n,r,i,o,s,u,c,d;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const h=(c=(u=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((h==null?void 0:h.length)!==0)return(d=h==null?void 0:h[0])===null||d===void 0?void 0:d.output}}class Cv{}class Iv{}class nD{}class rD{}class iD{}class oD{}class Sv{}class wv{}class Av{}class sD{}class Rv{}class pu{_fromAPIResponse({apiResponse:e,isVertexAI:n}){const r=new pu;if(r.name=e.name,r.metadata=e.metadata,r.done=e.done,r.error=e.error,n){const i=e.response;if(i){const o=new Rv,s=i.videos;o.generatedVideos=s==null?void 0:s.map(u=>({video:{uri:u.gcsUri,videoBytes:u.bytesBase64Encoded?wf(u.bytesBase64Encoded):void 0,mimeType:u.mimeType}})),o.raiMediaFilteredCount=i.raiMediaFilteredCount,o.raiMediaFilteredReasons=i.raiMediaFilteredReasons,r.response=o}}else{const i=e.response;if(i){const o=new Rv,s=i.generateVideoResponse,u=s==null?void 0:s.generatedSamples;o.generatedVideos=u==null?void 0:u.map(c=>{const d=c.video;return{video:{uri:d==null?void 0:d.uri,videoBytes:d!=null&&d.encodedVideo?wf(d==null?void 0:d.encodedVideo):void 0,mimeType:c.encoding}}}),o.raiMediaFilteredCount=s==null?void 0:s.raiMediaFilteredCount,o.raiMediaFilteredReasons=s==null?void 0:s.raiMediaFilteredReasons,r.response=o}}return r}}class xv{}class Pv{}class kv{}class lD{}class aD{}class uD{}class Nv{}class cD{get text(){var e,n,r;let i="",o=!1;const s=[];for(const u of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[c,d]of Object.entries(u))c!=="text"&&c!=="thought"&&d!==null&&s.push(c);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;o=!0,i+=u.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?i:void 0}get data(){var e,n,r;let i="";const o=[];for(const s of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[u,c]of Object.entries(s))u!=="inlineData"&&c!==null&&o.push(u);s.inlineData&&typeof s.inlineData.data=="string"&&(i+=atob(s.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class dD{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Te(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function D0(t,e){const n=Te(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function V0(t){return Array.isArray(t)?t.map(e=>mu(e)):[mu(t)]}function mu(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function L0(t){const e=mu(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function U0(t){const e=mu(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Mv(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function F0(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Mv(e)):[Mv(t)]}function xf(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Dv(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Vv(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function pt(t){if(t==null)throw new Error("ContentUnion is required");return xf(t)?t:{role:"user",parts:F0(t)}}function b0(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=pt(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=pt(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>pt(n)):[pt(e)]}function Jt(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Dv(t)||Vv(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[pt(t)]}const e=[],n=[],r=xf(t[0]);for(const i of t){const o=xf(i);if(o!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(i);else{if(Dv(i)||Vv(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||e.push({role:"user",parts:F0(n)}),e}function fD(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(fr).includes(n[0].toUpperCase())?n[0].toUpperCase():fr.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(fr).includes(r.toUpperCase())?r.toUpperCase():fr.TYPE_UNSPECIFIED})}}function Xi(t){const e={},n=["items"],r=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&fD(t.type,e);for(const[s,u]of Object.entries(t))if(u!=null)if(s=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;e.type=Object.values(fr).includes(u.toUpperCase())?u.toUpperCase():fr.TYPE_UNSPECIFIED}else if(n.includes(s))e[s]=Xi(u);else if(r.includes(s)){const c=[];for(const d of u){if(d.type=="null"){e.nullable=!0;continue}c.push(Xi(d))}e[s]=c}else if(i.includes(s)){const c={};for(const[d,h]of Object.entries(u))c[d]=Xi(h);e[s]=c}else{if(s==="additionalProperties")continue;e[s]=u}return e}function vp(t){return Xi(t)}function _p(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Tp(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function wo(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Xi(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Xi(e.response));return t}function Ao(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function hD(t,e,n,r=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function Qn(t,e){if(typeof e!="string")throw new Error("name must be a string");return hD(t,e,"cachedContents")}function O0(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function yi(t){return wf(t)}function pD(t){return t!=null&&typeof t=="object"&&"name"in t}function mD(t){return t!=null&&typeof t=="object"&&"video"in t}function gD(t){return t!=null&&typeof t=="object"&&"uri"in t}function B0(t){var e;let n;if(pD(t)&&(n=t.name),!(gD(t)&&(n=t.uri,n===void 0))&&!(mD(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function q0(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function $0(t){for(const e of["models","tunedModels","publisherModels"])if(yD(t,e))return t[e];return[]}function yD(t,e){return t!==null&&typeof t=="object"&&e in t}function vD(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function _D(t,e={}){const n=[],r=new Set;for(const i of t){const o=i.name;if(r.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);r.add(o);const s=vD(i,e);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function G0(t,e){if(typeof e!="string"&&!Array.isArray(e)){if(t&&t.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function TD(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Ro(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function H0(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ED(t){const e={},n=l(t,["fps"]);n!=null&&a(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&a(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&a(e,["startOffset"],i),e}function CD(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["data"]);n!=null&&a(e,["data"],n);const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function ID(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function SD(t){const e={},n=l(t,["videoMetadata"]);n!=null&&a(e,["videoMetadata"],ED(n));const r=l(t,["thought"]);r!=null&&a(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&a(e,["inlineData"],CD(i));const o=l(t,["fileData"]);o!=null&&a(e,["fileData"],ID(o));const s=l(t,["thoughtSignature"]);s!=null&&a(e,["thoughtSignature"],s);const u=l(t,["codeExecutionResult"]);u!=null&&a(e,["codeExecutionResult"],u);const c=l(t,["executableCode"]);c!=null&&a(e,["executableCode"],c);const d=l(t,["functionCall"]);d!=null&&a(e,["functionCall"],d);const h=l(t,["functionResponse"]);h!=null&&a(e,["functionResponse"],h);const p=l(t,["text"]);return p!=null&&a(e,["text"],p),e}function z0(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>SD(o))),a(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&a(e,["role"],r),e}function wD(t){const e={},n=l(t,["anyOf"]);n!=null&&a(e,["anyOf"],n);const r=l(t,["default"]);r!=null&&a(e,["default"],r);const i=l(t,["description"]);i!=null&&a(e,["description"],i);const o=l(t,["enum"]);o!=null&&a(e,["enum"],o);const s=l(t,["example"]);s!=null&&a(e,["example"],s);const u=l(t,["format"]);u!=null&&a(e,["format"],u);const c=l(t,["items"]);c!=null&&a(e,["items"],c);const d=l(t,["maxItems"]);d!=null&&a(e,["maxItems"],d);const h=l(t,["maxLength"]);h!=null&&a(e,["maxLength"],h);const p=l(t,["maxProperties"]);p!=null&&a(e,["maxProperties"],p);const g=l(t,["maximum"]);g!=null&&a(e,["maximum"],g);const v=l(t,["minItems"]);v!=null&&a(e,["minItems"],v);const R=l(t,["minLength"]);R!=null&&a(e,["minLength"],R);const P=l(t,["minProperties"]);P!=null&&a(e,["minProperties"],P);const D=l(t,["minimum"]);D!=null&&a(e,["minimum"],D);const w=l(t,["nullable"]);w!=null&&a(e,["nullable"],w);const _=l(t,["pattern"]);_!=null&&a(e,["pattern"],_);const S=l(t,["properties"]);S!=null&&a(e,["properties"],S);const V=l(t,["propertyOrdering"]);V!=null&&a(e,["propertyOrdering"],V);const F=l(t,["required"]);F!=null&&a(e,["required"],F);const b=l(t,["title"]);b!=null&&a(e,["title"],b);const A=l(t,["type"]);return A!=null&&a(e,["type"],A),e}function AD(t){const e={};if(l(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=l(t,["category"]);n!=null&&a(e,["category"],n);const r=l(t,["threshold"]);return r!=null&&a(e,["threshold"],r),e}function RD(t){const e={},n=l(t,["behavior"]);n!=null&&a(e,["behavior"],n);const r=l(t,["description"]);r!=null&&a(e,["description"],r);const i=l(t,["name"]);i!=null&&a(e,["name"],i);const o=l(t,["parameters"]);o!=null&&a(e,["parameters"],o);const s=l(t,["parametersJsonSchema"]);s!=null&&a(e,["parametersJsonSchema"],s);const u=l(t,["response"]);u!=null&&a(e,["response"],u);const c=l(t,["responseJsonSchema"]);return c!=null&&a(e,["responseJsonSchema"],c),e}function xD(t){const e={},n=l(t,["startTime"]);n!=null&&a(e,["startTime"],n);const r=l(t,["endTime"]);return r!=null&&a(e,["endTime"],r),e}function PD(t){const e={},n=l(t,["timeRangeFilter"]);if(n!=null&&a(e,["timeRangeFilter"],xD(n)),l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function kD(t){const e={},n=l(t,["mode"]);n!=null&&a(e,["mode"],n);const r=l(t,["dynamicThreshold"]);return r!=null&&a(e,["dynamicThreshold"],r),e}function ND(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&a(e,["dynamicRetrievalConfig"],kD(n)),e}function MD(){return{}}function DD(t){const e={},n=l(t,["environment"]);return n!=null&&a(e,["environment"],n),e}function VD(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(d=>RD(d))),a(e,["functionDeclarations"],c)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(t,["googleSearch"]);r!=null&&a(e,["googleSearch"],PD(r));const i=l(t,["googleSearchRetrieval"]);if(i!=null&&a(e,["googleSearchRetrieval"],ND(i)),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(l(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");l(t,["urlContext"])!=null&&a(e,["urlContext"],MD());const s=l(t,["computerUse"]);s!=null&&a(e,["computerUse"],DD(s));const u=l(t,["codeExecution"]);return u!=null&&a(e,["codeExecution"],u),e}function LD(t){const e={},n=l(t,["mode"]);n!=null&&a(e,["mode"],n);const r=l(t,["allowedFunctionNames"]);return r!=null&&a(e,["allowedFunctionNames"],r),e}function UD(t){const e={},n=l(t,["latitude"]);n!=null&&a(e,["latitude"],n);const r=l(t,["longitude"]);return r!=null&&a(e,["longitude"],r),e}function FD(t){const e={},n=l(t,["latLng"]);n!=null&&a(e,["latLng"],UD(n));const r=l(t,["languageCode"]);return r!=null&&a(e,["languageCode"],r),e}function bD(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&a(e,["functionCallingConfig"],LD(n));const r=l(t,["retrievalConfig"]);return r!=null&&a(e,["retrievalConfig"],FD(r)),e}function OD(t){const e={},n=l(t,["voiceName"]);return n!=null&&a(e,["voiceName"],n),e}function W0(t){const e={},n=l(t,["prebuiltVoiceConfig"]);return n!=null&&a(e,["prebuiltVoiceConfig"],OD(n)),e}function BD(t){const e={},n=l(t,["speaker"]);n!=null&&a(e,["speaker"],n);const r=l(t,["voiceConfig"]);return r!=null&&a(e,["voiceConfig"],W0(r)),e}function qD(t){const e={},n=l(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>BD(i))),a(e,["speakerVoiceConfigs"],r)}return e}function $D(t){const e={},n=l(t,["voiceConfig"]);n!=null&&a(e,["voiceConfig"],W0(n));const r=l(t,["multiSpeakerVoiceConfig"]);r!=null&&a(e,["multiSpeakerVoiceConfig"],qD(r));const i=l(t,["languageCode"]);return i!=null&&a(e,["languageCode"],i),e}function GD(t){const e={},n=l(t,["includeThoughts"]);n!=null&&a(e,["includeThoughts"],n);const r=l(t,["thinkingBudget"]);return r!=null&&a(e,["thinkingBudget"],r),e}function HD(t,e,n){const r={},i=l(e,["systemInstruction"]);n!==void 0&&i!=null&&a(n,["systemInstruction"],z0(pt(i)));const o=l(e,["temperature"]);o!=null&&a(r,["temperature"],o);const s=l(e,["topP"]);s!=null&&a(r,["topP"],s);const u=l(e,["topK"]);u!=null&&a(r,["topK"],u);const c=l(e,["candidateCount"]);c!=null&&a(r,["candidateCount"],c);const d=l(e,["maxOutputTokens"]);d!=null&&a(r,["maxOutputTokens"],d);const h=l(e,["stopSequences"]);h!=null&&a(r,["stopSequences"],h);const p=l(e,["responseLogprobs"]);p!=null&&a(r,["responseLogprobs"],p);const g=l(e,["logprobs"]);g!=null&&a(r,["logprobs"],g);const v=l(e,["presencePenalty"]);v!=null&&a(r,["presencePenalty"],v);const R=l(e,["frequencyPenalty"]);R!=null&&a(r,["frequencyPenalty"],R);const P=l(e,["seed"]);P!=null&&a(r,["seed"],P);const D=l(e,["responseMimeType"]);D!=null&&a(r,["responseMimeType"],D);const w=l(e,["responseSchema"]);w!=null&&a(r,["responseSchema"],wD(vp(w)));const _=l(e,["responseJsonSchema"]);if(_!=null&&a(r,["responseJsonSchema"],_),l(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const S=l(e,["safetySettings"]);if(n!==void 0&&S!=null){let N=S;Array.isArray(N)&&(N=N.map(M=>AD(M))),a(n,["safetySettings"],N)}const V=l(e,["tools"]);if(n!==void 0&&V!=null){let N=Ao(V);Array.isArray(N)&&(N=N.map(M=>VD(wo(M)))),a(n,["tools"],N)}const F=l(e,["toolConfig"]);if(n!==void 0&&F!=null&&a(n,["toolConfig"],bD(F)),l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const b=l(e,["cachedContent"]);n!==void 0&&b!=null&&a(n,["cachedContent"],Qn(t,b));const A=l(e,["responseModalities"]);A!=null&&a(r,["responseModalities"],A);const E=l(e,["mediaResolution"]);E!=null&&a(r,["mediaResolution"],E);const I=l(e,["speechConfig"]);if(I!=null&&a(r,["speechConfig"],$D(_p(I))),l(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const x=l(e,["thinkingConfig"]);return x!=null&&a(r,["thinkingConfig"],GD(x)),r}function zD(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["request","model"],Te(t,r));const i=l(e,["contents"]);if(i!=null){let s=Jt(i);Array.isArray(s)&&(s=s.map(u=>z0(u))),a(n,["request","contents"],s)}const o=l(e,["config"]);return o!=null&&a(n,["request","generationConfig"],HD(t,o,n)),n}function WD(t,e){const n={};if(l(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(l(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=l(e,["fileName"]);r!=null&&a(n,["fileName"],r);const i=l(e,["inlinedRequests"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>zD(t,s))),a(n,["requests","requests"],o)}return n}function KD(t,e){const n={},r=l(t,["displayName"]);if(e!==void 0&&r!=null&&a(e,["batch","displayName"],r),l(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function Lv(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","model"],Te(t,r));const i=l(e,["src"]);i!=null&&a(n,["batch","inputConfig"],WD(t,G0(t,i)));const o=l(e,["config"]);return o!=null&&a(n,["config"],KD(o,n)),n}function JD(t,e){const n={},r=l(e,["name"]);r!=null&&a(n,["_url","name"],Ro(t,r));const i=l(e,["config"]);return i!=null&&a(n,["config"],i),n}function QD(t,e){const n={},r=l(e,["name"]);r!=null&&a(n,["_url","name"],Ro(t,r));const i=l(e,["config"]);return i!=null&&a(n,["config"],i),n}function YD(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&a(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);if(e!==void 0&&i!=null&&a(e,["_query","pageToken"],i),l(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function XD(t){const e={},n=l(t,["config"]);return n!=null&&a(e,["config"],YD(n,e)),e}function ZD(t,e){const n={},r=l(e,["name"]);r!=null&&a(n,["_url","name"],Ro(t,r));const i=l(e,["config"]);return i!=null&&a(n,["config"],i),n}function jD(t){const e={},n=l(t,["format"]);n!=null&&a(e,["instancesFormat"],n);const r=l(t,["gcsUri"]);r!=null&&a(e,["gcsSource","uris"],r);const i=l(t,["bigqueryUri"]);if(i!=null&&a(e,["bigquerySource","inputUri"],i),l(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function e1(t){const e={},n=l(t,["format"]);n!=null&&a(e,["predictionsFormat"],n);const r=l(t,["gcsUri"]);r!=null&&a(e,["gcsDestination","outputUriPrefix"],r);const i=l(t,["bigqueryUri"]);if(i!=null&&a(e,["bigqueryDestination","outputUri"],i),l(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function t1(t,e){const n={},r=l(t,["displayName"]);e!==void 0&&r!=null&&a(e,["displayName"],r);const i=l(t,["dest"]);return e!==void 0&&i!=null&&a(e,["outputConfig"],e1(TD(i))),n}function n1(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["model"],Te(t,r));const i=l(e,["src"]);i!=null&&a(n,["inputConfig"],jD(G0(t,i)));const o=l(e,["config"]);return o!=null&&a(n,["config"],t1(o,n)),n}function r1(t,e){const n={},r=l(e,["name"]);r!=null&&a(n,["_url","name"],Ro(t,r));const i=l(e,["config"]);return i!=null&&a(n,["config"],i),n}function i1(t,e){const n={},r=l(e,["name"]);r!=null&&a(n,["_url","name"],Ro(t,r));const i=l(e,["config"]);return i!=null&&a(n,["config"],i),n}function o1(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&a(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);e!==void 0&&i!=null&&a(e,["_query","pageToken"],i);const o=l(t,["filter"]);return e!==void 0&&o!=null&&a(e,["_query","filter"],o),n}function s1(t){const e={},n=l(t,["config"]);return n!=null&&a(e,["config"],o1(n,e)),e}function l1(t,e){const n={},r=l(e,["name"]);r!=null&&a(n,["_url","name"],Ro(t,r));const i=l(e,["config"]);return i!=null&&a(n,["config"],i),n}function a1(t){const e={},n=l(t,["fps"]);n!=null&&a(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&a(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&a(e,["startOffset"],i),e}function u1(t){const e={},n=l(t,["data"]);n!=null&&a(e,["data"],n);const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function c1(t){const e={},n=l(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function d1(t){const e={},n=l(t,["videoMetadata"]);n!=null&&a(e,["videoMetadata"],a1(n));const r=l(t,["thought"]);r!=null&&a(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&a(e,["inlineData"],u1(i));const o=l(t,["fileData"]);o!=null&&a(e,["fileData"],c1(o));const s=l(t,["thoughtSignature"]);s!=null&&a(e,["thoughtSignature"],s);const u=l(t,["codeExecutionResult"]);u!=null&&a(e,["codeExecutionResult"],u);const c=l(t,["executableCode"]);c!=null&&a(e,["executableCode"],c);const d=l(t,["functionCall"]);d!=null&&a(e,["functionCall"],d);const h=l(t,["functionResponse"]);h!=null&&a(e,["functionResponse"],h);const p=l(t,["text"]);return p!=null&&a(e,["text"],p),e}function f1(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>d1(o))),a(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&a(e,["role"],r),e}function h1(t){const e={},n=l(t,["citationSources"]);return n!=null&&a(e,["citations"],n),e}function p1(t){const e={},n=l(t,["retrievedUrl"]);n!=null&&a(e,["retrievedUrl"],n);const r=l(t,["urlRetrievalStatus"]);return r!=null&&a(e,["urlRetrievalStatus"],r),e}function m1(t){const e={},n=l(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>p1(i))),a(e,["urlMetadata"],r)}return e}function g1(t){const e={},n=l(t,["content"]);n!=null&&a(e,["content"],f1(n));const r=l(t,["citationMetadata"]);r!=null&&a(e,["citationMetadata"],h1(r));const i=l(t,["tokenCount"]);i!=null&&a(e,["tokenCount"],i);const o=l(t,["finishReason"]);o!=null&&a(e,["finishReason"],o);const s=l(t,["urlContextMetadata"]);s!=null&&a(e,["urlContextMetadata"],m1(s));const u=l(t,["avgLogprobs"]);u!=null&&a(e,["avgLogprobs"],u);const c=l(t,["groundingMetadata"]);c!=null&&a(e,["groundingMetadata"],c);const d=l(t,["index"]);d!=null&&a(e,["index"],d);const h=l(t,["logprobsResult"]);h!=null&&a(e,["logprobsResult"],h);const p=l(t,["safetyRatings"]);return p!=null&&a(e,["safetyRatings"],p),e}function y1(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>g1(d))),a(e,["candidates"],c)}const i=l(t,["modelVersion"]);i!=null&&a(e,["modelVersion"],i);const o=l(t,["promptFeedback"]);o!=null&&a(e,["promptFeedback"],o);const s=l(t,["responseId"]);s!=null&&a(e,["responseId"],s);const u=l(t,["usageMetadata"]);return u!=null&&a(e,["usageMetadata"],u),e}function K0(t){const e={},n=l(t,["details"]);n!=null&&a(e,["details"],n);const r=l(t,["code"]);r!=null&&a(e,["code"],r);const i=l(t,["message"]);return i!=null&&a(e,["message"],i),e}function v1(t){const e={},n=l(t,["response"]);n!=null&&a(e,["response"],y1(n));const r=l(t,["error"]);return r!=null&&a(e,["error"],K0(r)),e}function _1(t){const e={},n=l(t,["responsesFile"]);n!=null&&a(e,["fileName"],n);const r=l(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>v1(o))),a(e,["inlinedResponses"],i)}return e}function Ia(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const r=l(t,["metadata","displayName"]);r!=null&&a(e,["displayName"],r);const i=l(t,["metadata","state"]);i!=null&&a(e,["state"],H0(i));const o=l(t,["metadata","createTime"]);o!=null&&a(e,["createTime"],o);const s=l(t,["metadata","endTime"]);s!=null&&a(e,["endTime"],s);const u=l(t,["metadata","updateTime"]);u!=null&&a(e,["updateTime"],u);const c=l(t,["metadata","model"]);c!=null&&a(e,["model"],c);const d=l(t,["metadata","output"]);return d!=null&&a(e,["dest"],_1(d)),e}function T1(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&a(e,["nextPageToken"],r);const i=l(t,["operations"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Ia(s))),a(e,["batchJobs"],o)}return e}function E1(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["name"]);r!=null&&a(e,["name"],r);const i=l(t,["done"]);i!=null&&a(e,["done"],i);const o=l(t,["error"]);return o!=null&&a(e,["error"],K0(o)),e}function J0(t){const e={},n=l(t,["details"]);n!=null&&a(e,["details"],n);const r=l(t,["code"]);r!=null&&a(e,["code"],r);const i=l(t,["message"]);return i!=null&&a(e,["message"],i),e}function C1(t){const e={},n=l(t,["instancesFormat"]);n!=null&&a(e,["format"],n);const r=l(t,["gcsSource","uris"]);r!=null&&a(e,["gcsUri"],r);const i=l(t,["bigquerySource","inputUri"]);return i!=null&&a(e,["bigqueryUri"],i),e}function I1(t){const e={},n=l(t,["predictionsFormat"]);n!=null&&a(e,["format"],n);const r=l(t,["gcsDestination","outputUriPrefix"]);r!=null&&a(e,["gcsUri"],r);const i=l(t,["bigqueryDestination","outputUri"]);return i!=null&&a(e,["bigqueryUri"],i),e}function Pf(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const r=l(t,["displayName"]);r!=null&&a(e,["displayName"],r);const i=l(t,["state"]);i!=null&&a(e,["state"],H0(i));const o=l(t,["error"]);o!=null&&a(e,["error"],J0(o));const s=l(t,["createTime"]);s!=null&&a(e,["createTime"],s);const u=l(t,["startTime"]);u!=null&&a(e,["startTime"],u);const c=l(t,["endTime"]);c!=null&&a(e,["endTime"],c);const d=l(t,["updateTime"]);d!=null&&a(e,["updateTime"],d);const h=l(t,["model"]);h!=null&&a(e,["model"],h);const p=l(t,["inputConfig"]);p!=null&&a(e,["src"],C1(p));const g=l(t,["outputConfig"]);return g!=null&&a(e,["dest"],I1(g)),e}function S1(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&a(e,["nextPageToken"],r);const i=l(t,["batchPredictionJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Pf(s))),a(e,["batchJobs"],o)}return e}function w1(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["name"]);r!=null&&a(e,["name"],r);const i=l(t,["done"]);i!=null&&a(e,["done"],i);const o=l(t,["error"]);return o!=null&&a(e,["error"],J0(o)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var di;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(di||(di={}));class pl{constructor(e,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,i)}init(e,n,r){var i,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!r||Object.keys(r).length===0?s={config:{}}:typeof r=="object"?s=Object.assign({},r):s=r,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(o=(i=s.config)===null||i===void 0?void 0:i.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class A1 extends gi{constructor(e){super(),this.apiClient=e,this.create=async n=>{var r,i;if(this.apiClient.isVertexAI()){const s=Date.now().toString();if(Array.isArray(n.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(n.config=n.config||{},n.config.displayName===void 0&&(n.config.displayName="genaiBatchJob_${timestampStr}"),n.config.dest===void 0&&typeof n.src=="string")if(n.src.startsWith("gs://")&&n.src.endsWith(".jsonl"))n.config.dest=`${n.src.slice(0,-6)}/dest`;else if(n.src.startsWith("bq://"))n.config.dest=`${n.src}_dest_${s}`;else throw new Error("Unsupported source:"+n.src)}else if(Array.isArray(n.src)||typeof n.src!="string"&&n.src.inlinedRequests){let o="",s={};const u=Lv(this.apiClient,n);o=Y("{model}:batchGenerateContent",u._url),s=u._query;const h=u.batch.inputConfig.requests,p=h.requests,g=[];for(const R of p){const P=R;if(P.systemInstruction){const D=P.systemInstruction;delete P.systemInstruction;const w=P.request;w.systemInstruction=D,P.request=w}g.push(P)}return h.requests=g,delete u.config,delete u._url,delete u._query,this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=n.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=n.config)===null||i===void 0?void 0:i.abortSignal}).then(R=>R.json()).then(R=>Ia(R))}return await this.createInternal(n)},this.list=async(n={})=>new pl(di.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n)}async createInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=n1(this.apiClient,e);return u=Y("batchPredictionJobs",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>Pf(h))}else{const d=Lv(this.apiClient,e);return u=Y("{model}:batchGenerateContent",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>Ia(h))}}async get(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=r1(this.apiClient,e);return u=Y("batchPredictionJobs/{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>Pf(h))}else{const d=JD(this.apiClient,e);return u=Y("batches/{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>Ia(h))}}async cancel(e){var n,r,i,o;let s="",u={};if(this.apiClient.isVertexAI()){const c=i1(this.apiClient,e);s=Y("batchPredictionJobs/{name}:cancel",c._url),u=c._query,delete c.config,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const c=QD(this.apiClient,e);s=Y("batches/{name}:cancel",c._url),u=c._query,delete c.config,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=s1(e);return u=Y("batchPredictionJobs",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>{const p=S1(h),g=new Nv;return Object.assign(g,p),g})}else{const d=XD(e);return u=Y("batches",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>{const p=T1(h),g=new Nv;return Object.assign(g,p),g})}}async delete(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=l1(this.apiClient,e);return u=Y("batchPredictionJobs/{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>w1(h))}else{const d=ZD(this.apiClient,e);return u=Y("batches/{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>E1(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function R1(t){const e={},n=l(t,["fps"]);n!=null&&a(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&a(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&a(e,["startOffset"],i),e}function x1(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["data"]);n!=null&&a(e,["data"],n);const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function P1(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function k1(t){const e={},n=l(t,["videoMetadata"]);n!=null&&a(e,["videoMetadata"],R1(n));const r=l(t,["thought"]);r!=null&&a(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&a(e,["inlineData"],x1(i));const o=l(t,["fileData"]);o!=null&&a(e,["fileData"],P1(o));const s=l(t,["thoughtSignature"]);s!=null&&a(e,["thoughtSignature"],s);const u=l(t,["codeExecutionResult"]);u!=null&&a(e,["codeExecutionResult"],u);const c=l(t,["executableCode"]);c!=null&&a(e,["executableCode"],c);const d=l(t,["functionCall"]);d!=null&&a(e,["functionCall"],d);const h=l(t,["functionResponse"]);h!=null&&a(e,["functionResponse"],h);const p=l(t,["text"]);return p!=null&&a(e,["text"],p),e}function Uv(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>k1(o))),a(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&a(e,["role"],r),e}function N1(t){const e={},n=l(t,["behavior"]);n!=null&&a(e,["behavior"],n);const r=l(t,["description"]);r!=null&&a(e,["description"],r);const i=l(t,["name"]);i!=null&&a(e,["name"],i);const o=l(t,["parameters"]);o!=null&&a(e,["parameters"],o);const s=l(t,["parametersJsonSchema"]);s!=null&&a(e,["parametersJsonSchema"],s);const u=l(t,["response"]);u!=null&&a(e,["response"],u);const c=l(t,["responseJsonSchema"]);return c!=null&&a(e,["responseJsonSchema"],c),e}function M1(t){const e={},n=l(t,["startTime"]);n!=null&&a(e,["startTime"],n);const r=l(t,["endTime"]);return r!=null&&a(e,["endTime"],r),e}function D1(t){const e={},n=l(t,["timeRangeFilter"]);if(n!=null&&a(e,["timeRangeFilter"],M1(n)),l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function V1(t){const e={},n=l(t,["mode"]);n!=null&&a(e,["mode"],n);const r=l(t,["dynamicThreshold"]);return r!=null&&a(e,["dynamicThreshold"],r),e}function L1(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&a(e,["dynamicRetrievalConfig"],V1(n)),e}function U1(){return{}}function F1(t){const e={},n=l(t,["environment"]);return n!=null&&a(e,["environment"],n),e}function b1(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(d=>N1(d))),a(e,["functionDeclarations"],c)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(t,["googleSearch"]);r!=null&&a(e,["googleSearch"],D1(r));const i=l(t,["googleSearchRetrieval"]);if(i!=null&&a(e,["googleSearchRetrieval"],L1(i)),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(l(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");l(t,["urlContext"])!=null&&a(e,["urlContext"],U1());const s=l(t,["computerUse"]);s!=null&&a(e,["computerUse"],F1(s));const u=l(t,["codeExecution"]);return u!=null&&a(e,["codeExecution"],u),e}function O1(t){const e={},n=l(t,["mode"]);n!=null&&a(e,["mode"],n);const r=l(t,["allowedFunctionNames"]);return r!=null&&a(e,["allowedFunctionNames"],r),e}function B1(t){const e={},n=l(t,["latitude"]);n!=null&&a(e,["latitude"],n);const r=l(t,["longitude"]);return r!=null&&a(e,["longitude"],r),e}function q1(t){const e={},n=l(t,["latLng"]);n!=null&&a(e,["latLng"],B1(n));const r=l(t,["languageCode"]);return r!=null&&a(e,["languageCode"],r),e}function $1(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&a(e,["functionCallingConfig"],O1(n));const r=l(t,["retrievalConfig"]);return r!=null&&a(e,["retrievalConfig"],q1(r)),e}function G1(t,e){const n={},r=l(t,["ttl"]);e!==void 0&&r!=null&&a(e,["ttl"],r);const i=l(t,["expireTime"]);e!==void 0&&i!=null&&a(e,["expireTime"],i);const o=l(t,["displayName"]);e!==void 0&&o!=null&&a(e,["displayName"],o);const s=l(t,["contents"]);if(e!==void 0&&s!=null){let h=Jt(s);Array.isArray(h)&&(h=h.map(p=>Uv(p))),a(e,["contents"],h)}const u=l(t,["systemInstruction"]);e!==void 0&&u!=null&&a(e,["systemInstruction"],Uv(pt(u)));const c=l(t,["tools"]);if(e!==void 0&&c!=null){let h=c;Array.isArray(h)&&(h=h.map(p=>b1(p))),a(e,["tools"],h)}const d=l(t,["toolConfig"]);if(e!==void 0&&d!=null&&a(e,["toolConfig"],$1(d)),l(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function H1(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["model"],D0(t,r));const i=l(e,["config"]);return i!=null&&a(n,["config"],G1(i,n)),n}function z1(t,e){const n={},r=l(e,["name"]);r!=null&&a(n,["_url","name"],Qn(t,r));const i=l(e,["config"]);return i!=null&&a(n,["config"],i),n}function W1(t,e){const n={},r=l(e,["name"]);r!=null&&a(n,["_url","name"],Qn(t,r));const i=l(e,["config"]);return i!=null&&a(n,["config"],i),n}function K1(t,e){const n={},r=l(t,["ttl"]);e!==void 0&&r!=null&&a(e,["ttl"],r);const i=l(t,["expireTime"]);return e!==void 0&&i!=null&&a(e,["expireTime"],i),n}function J1(t,e){const n={},r=l(e,["name"]);r!=null&&a(n,["_url","name"],Qn(t,r));const i=l(e,["config"]);return i!=null&&a(n,["config"],K1(i,n)),n}function Q1(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&a(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);return e!==void 0&&i!=null&&a(e,["_query","pageToken"],i),n}function Y1(t){const e={},n=l(t,["config"]);return n!=null&&a(e,["config"],Q1(n,e)),e}function X1(t){const e={},n=l(t,["fps"]);n!=null&&a(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&a(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&a(e,["startOffset"],i),e}function Z1(t){const e={},n=l(t,["displayName"]);n!=null&&a(e,["displayName"],n);const r=l(t,["data"]);r!=null&&a(e,["data"],r);const i=l(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function j1(t){const e={},n=l(t,["displayName"]);n!=null&&a(e,["displayName"],n);const r=l(t,["fileUri"]);r!=null&&a(e,["fileUri"],r);const i=l(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function eV(t){const e={},n=l(t,["videoMetadata"]);n!=null&&a(e,["videoMetadata"],X1(n));const r=l(t,["thought"]);r!=null&&a(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&a(e,["inlineData"],Z1(i));const o=l(t,["fileData"]);o!=null&&a(e,["fileData"],j1(o));const s=l(t,["thoughtSignature"]);s!=null&&a(e,["thoughtSignature"],s);const u=l(t,["codeExecutionResult"]);u!=null&&a(e,["codeExecutionResult"],u);const c=l(t,["executableCode"]);c!=null&&a(e,["executableCode"],c);const d=l(t,["functionCall"]);d!=null&&a(e,["functionCall"],d);const h=l(t,["functionResponse"]);h!=null&&a(e,["functionResponse"],h);const p=l(t,["text"]);return p!=null&&a(e,["text"],p),e}function Fv(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>eV(o))),a(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&a(e,["role"],r),e}function tV(t){const e={};if(l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(t,["description"]);n!=null&&a(e,["description"],n);const r=l(t,["name"]);r!=null&&a(e,["name"],r);const i=l(t,["parameters"]);i!=null&&a(e,["parameters"],i);const o=l(t,["parametersJsonSchema"]);o!=null&&a(e,["parametersJsonSchema"],o);const s=l(t,["response"]);s!=null&&a(e,["response"],s);const u=l(t,["responseJsonSchema"]);return u!=null&&a(e,["responseJsonSchema"],u),e}function nV(t){const e={},n=l(t,["startTime"]);n!=null&&a(e,["startTime"],n);const r=l(t,["endTime"]);return r!=null&&a(e,["endTime"],r),e}function rV(t){const e={},n=l(t,["timeRangeFilter"]);n!=null&&a(e,["timeRangeFilter"],nV(n));const r=l(t,["excludeDomains"]);return r!=null&&a(e,["excludeDomains"],r),e}function iV(t){const e={},n=l(t,["mode"]);n!=null&&a(e,["mode"],n);const r=l(t,["dynamicThreshold"]);return r!=null&&a(e,["dynamicThreshold"],r),e}function oV(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&a(e,["dynamicRetrievalConfig"],iV(n)),e}function sV(t){const e={},n=l(t,["excludeDomains"]);return n!=null&&a(e,["excludeDomains"],n),e}function lV(t){const e={},n=l(t,["apiKeyString"]);return n!=null&&a(e,["apiKeyString"],n),e}function aV(t){const e={},n=l(t,["apiKeyConfig"]);n!=null&&a(e,["apiKeyConfig"],lV(n));const r=l(t,["authType"]);r!=null&&a(e,["authType"],r);const i=l(t,["googleServiceAccountConfig"]);i!=null&&a(e,["googleServiceAccountConfig"],i);const o=l(t,["httpBasicAuthConfig"]);o!=null&&a(e,["httpBasicAuthConfig"],o);const s=l(t,["oauthConfig"]);s!=null&&a(e,["oauthConfig"],s);const u=l(t,["oidcConfig"]);return u!=null&&a(e,["oidcConfig"],u),e}function uV(t){const e={},n=l(t,["authConfig"]);return n!=null&&a(e,["authConfig"],aV(n)),e}function cV(){return{}}function dV(t){const e={},n=l(t,["environment"]);return n!=null&&a(e,["environment"],n),e}function fV(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(g=>tV(g))),a(e,["functionDeclarations"],p)}const r=l(t,["retrieval"]);r!=null&&a(e,["retrieval"],r);const i=l(t,["googleSearch"]);i!=null&&a(e,["googleSearch"],rV(i));const o=l(t,["googleSearchRetrieval"]);o!=null&&a(e,["googleSearchRetrieval"],oV(o));const s=l(t,["enterpriseWebSearch"]);s!=null&&a(e,["enterpriseWebSearch"],sV(s));const u=l(t,["googleMaps"]);u!=null&&a(e,["googleMaps"],uV(u)),l(t,["urlContext"])!=null&&a(e,["urlContext"],cV());const d=l(t,["computerUse"]);d!=null&&a(e,["computerUse"],dV(d));const h=l(t,["codeExecution"]);return h!=null&&a(e,["codeExecution"],h),e}function hV(t){const e={},n=l(t,["mode"]);n!=null&&a(e,["mode"],n);const r=l(t,["allowedFunctionNames"]);return r!=null&&a(e,["allowedFunctionNames"],r),e}function pV(t){const e={},n=l(t,["latitude"]);n!=null&&a(e,["latitude"],n);const r=l(t,["longitude"]);return r!=null&&a(e,["longitude"],r),e}function mV(t){const e={},n=l(t,["latLng"]);n!=null&&a(e,["latLng"],pV(n));const r=l(t,["languageCode"]);return r!=null&&a(e,["languageCode"],r),e}function gV(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&a(e,["functionCallingConfig"],hV(n));const r=l(t,["retrievalConfig"]);return r!=null&&a(e,["retrievalConfig"],mV(r)),e}function yV(t,e){const n={},r=l(t,["ttl"]);e!==void 0&&r!=null&&a(e,["ttl"],r);const i=l(t,["expireTime"]);e!==void 0&&i!=null&&a(e,["expireTime"],i);const o=l(t,["displayName"]);e!==void 0&&o!=null&&a(e,["displayName"],o);const s=l(t,["contents"]);if(e!==void 0&&s!=null){let p=Jt(s);Array.isArray(p)&&(p=p.map(g=>Fv(g))),a(e,["contents"],p)}const u=l(t,["systemInstruction"]);e!==void 0&&u!=null&&a(e,["systemInstruction"],Fv(pt(u)));const c=l(t,["tools"]);if(e!==void 0&&c!=null){let p=c;Array.isArray(p)&&(p=p.map(g=>fV(g))),a(e,["tools"],p)}const d=l(t,["toolConfig"]);e!==void 0&&d!=null&&a(e,["toolConfig"],gV(d));const h=l(t,["kmsKeyName"]);return e!==void 0&&h!=null&&a(e,["encryption_spec","kmsKeyName"],h),n}function vV(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["model"],D0(t,r));const i=l(e,["config"]);return i!=null&&a(n,["config"],yV(i,n)),n}function _V(t,e){const n={},r=l(e,["name"]);r!=null&&a(n,["_url","name"],Qn(t,r));const i=l(e,["config"]);return i!=null&&a(n,["config"],i),n}function TV(t,e){const n={},r=l(e,["name"]);r!=null&&a(n,["_url","name"],Qn(t,r));const i=l(e,["config"]);return i!=null&&a(n,["config"],i),n}function EV(t,e){const n={},r=l(t,["ttl"]);e!==void 0&&r!=null&&a(e,["ttl"],r);const i=l(t,["expireTime"]);return e!==void 0&&i!=null&&a(e,["expireTime"],i),n}function CV(t,e){const n={},r=l(e,["name"]);r!=null&&a(n,["_url","name"],Qn(t,r));const i=l(e,["config"]);return i!=null&&a(n,["config"],EV(i,n)),n}function IV(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&a(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);return e!==void 0&&i!=null&&a(e,["_query","pageToken"],i),n}function SV(t){const e={},n=l(t,["config"]);return n!=null&&a(e,["config"],IV(n,e)),e}function Sa(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const r=l(t,["displayName"]);r!=null&&a(e,["displayName"],r);const i=l(t,["model"]);i!=null&&a(e,["model"],i);const o=l(t,["createTime"]);o!=null&&a(e,["createTime"],o);const s=l(t,["updateTime"]);s!=null&&a(e,["updateTime"],s);const u=l(t,["expireTime"]);u!=null&&a(e,["expireTime"],u);const c=l(t,["usageMetadata"]);return c!=null&&a(e,["usageMetadata"],c),e}function wV(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function AV(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&a(e,["nextPageToken"],r);const i=l(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Sa(s))),a(e,["cachedContents"],o)}return e}function wa(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const r=l(t,["displayName"]);r!=null&&a(e,["displayName"],r);const i=l(t,["model"]);i!=null&&a(e,["model"],i);const o=l(t,["createTime"]);o!=null&&a(e,["createTime"],o);const s=l(t,["updateTime"]);s!=null&&a(e,["updateTime"],s);const u=l(t,["expireTime"]);u!=null&&a(e,["expireTime"],u);const c=l(t,["usageMetadata"]);return c!=null&&a(e,["usageMetadata"],c),e}function RV(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function xV(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&a(e,["nextPageToken"],r);const i=l(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>wa(s))),a(e,["cachedContents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class PV extends gi{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new pl(di.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=vV(this.apiClient,e);return u=Y("cachedContents",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>wa(h))}else{const d=H1(this.apiClient,e);return u=Y("cachedContents",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>Sa(h))}}async get(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=_V(this.apiClient,e);return u=Y("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>wa(h))}else{const d=z1(this.apiClient,e);return u=Y("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>Sa(h))}}async delete(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=TV(this.apiClient,e);return u=Y("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>{const p=RV(h),g=new Pv;return Object.assign(g,p),g})}else{const d=W1(this.apiClient,e);return u=Y("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>{const p=wV(h),g=new Pv;return Object.assign(g,p),g})}}async update(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=CV(this.apiClient,e);return u=Y("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>wa(h))}else{const d=J1(this.apiClient,e);return u=Y("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>Sa(h))}}async listInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=SV(e);return u=Y("cachedContents",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>{const p=xV(h),g=new kv;return Object.assign(g,p),g})}else{const d=Y1(e);return u=Y("cachedContents",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>{const p=AV(h),g=new kv;return Object.assign(g,p),g})}}}function bv(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function xe(t){return this instanceof xe?(this.v=t,this):new xe(t)}function Zi(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(v){return function(R){return Promise.resolve(R).then(v,p)}}function u(v,R){r[v]&&(i[v]=function(P){return new Promise(function(D,w){o.push([v,P,D,w])>1||c(v,P)})},R&&(i[v]=R(i[v])))}function c(v,R){try{d(r[v](R))}catch(P){g(o[0][3],P)}}function d(v){v.value instanceof xe?Promise.resolve(v.value.v).then(h,p):g(o[0][2],v)}function h(v){c("next",v)}function p(v){c("throw",v)}function g(v,R){v(R),o.shift(),o.length&&c(o[0][0],o[0][1])}}function ws(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof bv=="function"?bv(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(u,c){s=t[o](s),i(u,c,s.done,s.value)})}}function i(o,s,u,c){Promise.resolve(c).then(function(d){o({value:d,done:u})},s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kV(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:Q0(n)}function Q0(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function NV(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Ov(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const i=[];let o=!0;for(;r<n&&t[r].role==="model";)i.push(t[r]),o&&!Q0(t[r])&&(o=!1),r++;o?e.push(...i):e.pop()}return e}class MV{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new DV(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class DV{constructor(e,n,r,i={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=i,this.history=o,this.sendPromise=Promise.resolve(),NV(o)}async sendMessage(e){var n;await this.sendPromise;const r=pt(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,s,u;const c=await i,d=(s=(o=c.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content,h=c.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let g=[];h!=null&&(g=(u=h.slice(p))!==null&&u!==void 0?u:[]);const v=d?[d]:[];this.recordHistory(r,v,g)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;const r=pt(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const o=await i;return this.processStreamResponse(o,r)}getHistory(e=!1){const n=e?Ov(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var r,i;return Zi(this,arguments,function*(){var s,u,c,d;const h=[];try{for(var p=!0,g=ws(e),v;v=yield xe(g.next()),s=v.done,!s;p=!0){d=v.value,p=!1;const R=d;if(kV(R)){const P=(i=(r=R.candidates)===null||r===void 0?void 0:r[0])===null||i===void 0?void 0:i.content;P!==void 0&&h.push(P)}yield yield xe(R)}}catch(R){u={error:R}}finally{try{!p&&!s&&(c=g.return)&&(yield xe(c.call(g)))}finally{if(u)throw u.error}}this.recordHistory(n,h)})}recordHistory(e,n,r){let i=[];n.length>0&&n.every(o=>o.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...Ov(r)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ju extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,ju.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function VV(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&a(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);return e!==void 0&&i!=null&&a(e,["_query","pageToken"],i),n}function LV(t){const e={},n=l(t,["config"]);return n!=null&&a(e,["config"],VV(n,e)),e}function UV(t){const e={},n=l(t,["details"]);n!=null&&a(e,["details"],n);const r=l(t,["message"]);r!=null&&a(e,["message"],r);const i=l(t,["code"]);return i!=null&&a(e,["code"],i),e}function FV(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const r=l(t,["displayName"]);r!=null&&a(e,["displayName"],r);const i=l(t,["mimeType"]);i!=null&&a(e,["mimeType"],i);const o=l(t,["sizeBytes"]);o!=null&&a(e,["sizeBytes"],o);const s=l(t,["createTime"]);s!=null&&a(e,["createTime"],s);const u=l(t,["expirationTime"]);u!=null&&a(e,["expirationTime"],u);const c=l(t,["updateTime"]);c!=null&&a(e,["updateTime"],c);const d=l(t,["sha256Hash"]);d!=null&&a(e,["sha256Hash"],d);const h=l(t,["uri"]);h!=null&&a(e,["uri"],h);const p=l(t,["downloadUri"]);p!=null&&a(e,["downloadUri"],p);const g=l(t,["state"]);g!=null&&a(e,["state"],g);const v=l(t,["source"]);v!=null&&a(e,["source"],v);const R=l(t,["videoMetadata"]);R!=null&&a(e,["videoMetadata"],R);const P=l(t,["error"]);return P!=null&&a(e,["error"],UV(P)),e}function bV(t){const e={},n=l(t,["file"]);n!=null&&a(e,["file"],FV(n));const r=l(t,["config"]);return r!=null&&a(e,["config"],r),e}function OV(t){const e={},n=l(t,["name"]);n!=null&&a(e,["_url","file"],B0(n));const r=l(t,["config"]);return r!=null&&a(e,["config"],r),e}function BV(t){const e={},n=l(t,["name"]);n!=null&&a(e,["_url","file"],B0(n));const r=l(t,["config"]);return r!=null&&a(e,["config"],r),e}function qV(t){const e={},n=l(t,["details"]);n!=null&&a(e,["details"],n);const r=l(t,["message"]);r!=null&&a(e,["message"],r);const i=l(t,["code"]);return i!=null&&a(e,["code"],i),e}function kf(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const r=l(t,["displayName"]);r!=null&&a(e,["displayName"],r);const i=l(t,["mimeType"]);i!=null&&a(e,["mimeType"],i);const o=l(t,["sizeBytes"]);o!=null&&a(e,["sizeBytes"],o);const s=l(t,["createTime"]);s!=null&&a(e,["createTime"],s);const u=l(t,["expirationTime"]);u!=null&&a(e,["expirationTime"],u);const c=l(t,["updateTime"]);c!=null&&a(e,["updateTime"],c);const d=l(t,["sha256Hash"]);d!=null&&a(e,["sha256Hash"],d);const h=l(t,["uri"]);h!=null&&a(e,["uri"],h);const p=l(t,["downloadUri"]);p!=null&&a(e,["downloadUri"],p);const g=l(t,["state"]);g!=null&&a(e,["state"],g);const v=l(t,["source"]);v!=null&&a(e,["source"],v);const R=l(t,["videoMetadata"]);R!=null&&a(e,["videoMetadata"],R);const P=l(t,["error"]);return P!=null&&a(e,["error"],qV(P)),e}function $V(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&a(e,["nextPageToken"],r);const i=l(t,["files"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>kf(s))),a(e,["files"],o)}return e}function GV(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function HV(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zV extends gi{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new pl(di.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>kf(n))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=LV(e);return o=Y("files",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>{const d=$V(c),h=new lD;return Object.assign(h,d),h})}}async createInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=bV(e);return o=Y("upload/v1beta/files",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const d=GV(c),h=new aD;return Object.assign(h,d),h})}}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=OV(e);return o=Y("files/{file}",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>kf(c))}}async delete(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=BV(e);return o=Y("files/{file}",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>{const d=HV(c),h=new uD;return Object.assign(h,d),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function WV(t){const e={},n=l(t,["voiceName"]);return n!=null&&a(e,["voiceName"],n),e}function Y0(t){const e={},n=l(t,["prebuiltVoiceConfig"]);return n!=null&&a(e,["prebuiltVoiceConfig"],WV(n)),e}function KV(t){const e={},n=l(t,["speaker"]);n!=null&&a(e,["speaker"],n);const r=l(t,["voiceConfig"]);return r!=null&&a(e,["voiceConfig"],Y0(r)),e}function JV(t){const e={},n=l(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>KV(i))),a(e,["speakerVoiceConfigs"],r)}return e}function QV(t){const e={},n=l(t,["voiceConfig"]);n!=null&&a(e,["voiceConfig"],Y0(n));const r=l(t,["multiSpeakerVoiceConfig"]);r!=null&&a(e,["multiSpeakerVoiceConfig"],JV(r));const i=l(t,["languageCode"]);return i!=null&&a(e,["languageCode"],i),e}function YV(t){const e={},n=l(t,["fps"]);n!=null&&a(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&a(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&a(e,["startOffset"],i),e}function XV(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["data"]);n!=null&&a(e,["data"],n);const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function ZV(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function jV(t){const e={},n=l(t,["videoMetadata"]);n!=null&&a(e,["videoMetadata"],YV(n));const r=l(t,["thought"]);r!=null&&a(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&a(e,["inlineData"],XV(i));const o=l(t,["fileData"]);o!=null&&a(e,["fileData"],ZV(o));const s=l(t,["thoughtSignature"]);s!=null&&a(e,["thoughtSignature"],s);const u=l(t,["codeExecutionResult"]);u!=null&&a(e,["codeExecutionResult"],u);const c=l(t,["executableCode"]);c!=null&&a(e,["executableCode"],c);const d=l(t,["functionCall"]);d!=null&&a(e,["functionCall"],d);const h=l(t,["functionResponse"]);h!=null&&a(e,["functionResponse"],h);const p=l(t,["text"]);return p!=null&&a(e,["text"],p),e}function eL(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>jV(o))),a(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&a(e,["role"],r),e}function tL(t){const e={},n=l(t,["behavior"]);n!=null&&a(e,["behavior"],n);const r=l(t,["description"]);r!=null&&a(e,["description"],r);const i=l(t,["name"]);i!=null&&a(e,["name"],i);const o=l(t,["parameters"]);o!=null&&a(e,["parameters"],o);const s=l(t,["parametersJsonSchema"]);s!=null&&a(e,["parametersJsonSchema"],s);const u=l(t,["response"]);u!=null&&a(e,["response"],u);const c=l(t,["responseJsonSchema"]);return c!=null&&a(e,["responseJsonSchema"],c),e}function nL(t){const e={},n=l(t,["startTime"]);n!=null&&a(e,["startTime"],n);const r=l(t,["endTime"]);return r!=null&&a(e,["endTime"],r),e}function rL(t){const e={},n=l(t,["timeRangeFilter"]);if(n!=null&&a(e,["timeRangeFilter"],nL(n)),l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function iL(t){const e={},n=l(t,["mode"]);n!=null&&a(e,["mode"],n);const r=l(t,["dynamicThreshold"]);return r!=null&&a(e,["dynamicThreshold"],r),e}function oL(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&a(e,["dynamicRetrievalConfig"],iL(n)),e}function sL(){return{}}function lL(t){const e={},n=l(t,["environment"]);return n!=null&&a(e,["environment"],n),e}function aL(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(d=>tL(d))),a(e,["functionDeclarations"],c)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(t,["googleSearch"]);r!=null&&a(e,["googleSearch"],rL(r));const i=l(t,["googleSearchRetrieval"]);if(i!=null&&a(e,["googleSearchRetrieval"],oL(i)),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(l(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");l(t,["urlContext"])!=null&&a(e,["urlContext"],sL());const s=l(t,["computerUse"]);s!=null&&a(e,["computerUse"],lL(s));const u=l(t,["codeExecution"]);return u!=null&&a(e,["codeExecution"],u),e}function uL(t){const e={},n=l(t,["handle"]);if(n!=null&&a(e,["handle"],n),l(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Bv(){return{}}function cL(t){const e={},n=l(t,["disabled"]);n!=null&&a(e,["disabled"],n);const r=l(t,["startOfSpeechSensitivity"]);r!=null&&a(e,["startOfSpeechSensitivity"],r);const i=l(t,["endOfSpeechSensitivity"]);i!=null&&a(e,["endOfSpeechSensitivity"],i);const o=l(t,["prefixPaddingMs"]);o!=null&&a(e,["prefixPaddingMs"],o);const s=l(t,["silenceDurationMs"]);return s!=null&&a(e,["silenceDurationMs"],s),e}function dL(t){const e={},n=l(t,["automaticActivityDetection"]);n!=null&&a(e,["automaticActivityDetection"],cL(n));const r=l(t,["activityHandling"]);r!=null&&a(e,["activityHandling"],r);const i=l(t,["turnCoverage"]);return i!=null&&a(e,["turnCoverage"],i),e}function fL(t){const e={},n=l(t,["targetTokens"]);return n!=null&&a(e,["targetTokens"],n),e}function hL(t){const e={},n=l(t,["triggerTokens"]);n!=null&&a(e,["triggerTokens"],n);const r=l(t,["slidingWindow"]);return r!=null&&a(e,["slidingWindow"],fL(r)),e}function pL(t){const e={},n=l(t,["proactiveAudio"]);return n!=null&&a(e,["proactiveAudio"],n),e}function mL(t,e){const n={},r=l(t,["generationConfig"]);e!==void 0&&r!=null&&a(e,["setup","generationConfig"],r);const i=l(t,["responseModalities"]);e!==void 0&&i!=null&&a(e,["setup","generationConfig","responseModalities"],i);const o=l(t,["temperature"]);e!==void 0&&o!=null&&a(e,["setup","generationConfig","temperature"],o);const s=l(t,["topP"]);e!==void 0&&s!=null&&a(e,["setup","generationConfig","topP"],s);const u=l(t,["topK"]);e!==void 0&&u!=null&&a(e,["setup","generationConfig","topK"],u);const c=l(t,["maxOutputTokens"]);e!==void 0&&c!=null&&a(e,["setup","generationConfig","maxOutputTokens"],c);const d=l(t,["mediaResolution"]);e!==void 0&&d!=null&&a(e,["setup","generationConfig","mediaResolution"],d);const h=l(t,["seed"]);e!==void 0&&h!=null&&a(e,["setup","generationConfig","seed"],h);const p=l(t,["speechConfig"]);e!==void 0&&p!=null&&a(e,["setup","generationConfig","speechConfig"],QV(Tp(p)));const g=l(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&a(e,["setup","generationConfig","enableAffectiveDialog"],g);const v=l(t,["systemInstruction"]);e!==void 0&&v!=null&&a(e,["setup","systemInstruction"],eL(pt(v)));const R=l(t,["tools"]);if(e!==void 0&&R!=null){let F=Ao(R);Array.isArray(F)&&(F=F.map(b=>aL(wo(b)))),a(e,["setup","tools"],F)}const P=l(t,["sessionResumption"]);e!==void 0&&P!=null&&a(e,["setup","sessionResumption"],uL(P));const D=l(t,["inputAudioTranscription"]);e!==void 0&&D!=null&&a(e,["setup","inputAudioTranscription"],Bv());const w=l(t,["outputAudioTranscription"]);e!==void 0&&w!=null&&a(e,["setup","outputAudioTranscription"],Bv());const _=l(t,["realtimeInputConfig"]);e!==void 0&&_!=null&&a(e,["setup","realtimeInputConfig"],dL(_));const S=l(t,["contextWindowCompression"]);e!==void 0&&S!=null&&a(e,["setup","contextWindowCompression"],hL(S));const V=l(t,["proactivity"]);return e!==void 0&&V!=null&&a(e,["setup","proactivity"],pL(V)),n}function gL(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["setup","model"],Te(t,r));const i=l(e,["config"]);return i!=null&&a(n,["config"],mL(i,n)),n}function yL(){return{}}function vL(){return{}}function _L(t){const e={},n=l(t,["media"]);n!=null&&a(e,["mediaChunks"],V0(n));const r=l(t,["audio"]);r!=null&&a(e,["audio"],U0(r));const i=l(t,["audioStreamEnd"]);i!=null&&a(e,["audioStreamEnd"],i);const o=l(t,["video"]);o!=null&&a(e,["video"],L0(o));const s=l(t,["text"]);return s!=null&&a(e,["text"],s),l(t,["activityStart"])!=null&&a(e,["activityStart"],yL()),l(t,["activityEnd"])!=null&&a(e,["activityEnd"],vL()),e}function X0(t){const e={},n=l(t,["text"]);n!=null&&a(e,["text"],n);const r=l(t,["weight"]);return r!=null&&a(e,["weight"],r),e}function TL(t){const e={},n=l(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>X0(i))),a(e,["weightedPrompts"],r)}return e}function Z0(t){const e={},n=l(t,["temperature"]);n!=null&&a(e,["temperature"],n);const r=l(t,["topK"]);r!=null&&a(e,["topK"],r);const i=l(t,["seed"]);i!=null&&a(e,["seed"],i);const o=l(t,["guidance"]);o!=null&&a(e,["guidance"],o);const s=l(t,["bpm"]);s!=null&&a(e,["bpm"],s);const u=l(t,["density"]);u!=null&&a(e,["density"],u);const c=l(t,["brightness"]);c!=null&&a(e,["brightness"],c);const d=l(t,["scale"]);d!=null&&a(e,["scale"],d);const h=l(t,["muteBass"]);h!=null&&a(e,["muteBass"],h);const p=l(t,["muteDrums"]);p!=null&&a(e,["muteDrums"],p);const g=l(t,["onlyBassAndDrums"]);g!=null&&a(e,["onlyBassAndDrums"],g);const v=l(t,["musicGenerationMode"]);return v!=null&&a(e,["musicGenerationMode"],v),e}function EL(t){const e={},n=l(t,["musicGenerationConfig"]);return n!=null&&a(e,["musicGenerationConfig"],Z0(n)),e}function j0(t){const e={},n=l(t,["model"]);return n!=null&&a(e,["model"],n),e}function eI(t){const e={},n=l(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>X0(i))),a(e,["weightedPrompts"],r)}return e}function Nf(t){const e={},n=l(t,["setup"]);n!=null&&a(e,["setup"],j0(n));const r=l(t,["clientContent"]);r!=null&&a(e,["clientContent"],eI(r));const i=l(t,["musicGenerationConfig"]);i!=null&&a(e,["musicGenerationConfig"],Z0(i));const o=l(t,["playbackControl"]);return o!=null&&a(e,["playbackControl"],o),e}function CL(t){const e={},n=l(t,["voiceName"]);return n!=null&&a(e,["voiceName"],n),e}function IL(t){const e={},n=l(t,["prebuiltVoiceConfig"]);return n!=null&&a(e,["prebuiltVoiceConfig"],CL(n)),e}function SL(t){const e={},n=l(t,["voiceConfig"]);if(n!=null&&a(e,["voiceConfig"],IL(n)),l(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=l(t,["languageCode"]);return r!=null&&a(e,["languageCode"],r),e}function wL(t){const e={},n=l(t,["fps"]);n!=null&&a(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&a(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&a(e,["startOffset"],i),e}function AL(t){const e={},n=l(t,["displayName"]);n!=null&&a(e,["displayName"],n);const r=l(t,["data"]);r!=null&&a(e,["data"],r);const i=l(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function RL(t){const e={},n=l(t,["displayName"]);n!=null&&a(e,["displayName"],n);const r=l(t,["fileUri"]);r!=null&&a(e,["fileUri"],r);const i=l(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function xL(t){const e={},n=l(t,["videoMetadata"]);n!=null&&a(e,["videoMetadata"],wL(n));const r=l(t,["thought"]);r!=null&&a(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&a(e,["inlineData"],AL(i));const o=l(t,["fileData"]);o!=null&&a(e,["fileData"],RL(o));const s=l(t,["thoughtSignature"]);s!=null&&a(e,["thoughtSignature"],s);const u=l(t,["codeExecutionResult"]);u!=null&&a(e,["codeExecutionResult"],u);const c=l(t,["executableCode"]);c!=null&&a(e,["executableCode"],c);const d=l(t,["functionCall"]);d!=null&&a(e,["functionCall"],d);const h=l(t,["functionResponse"]);h!=null&&a(e,["functionResponse"],h);const p=l(t,["text"]);return p!=null&&a(e,["text"],p),e}function PL(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>xL(o))),a(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&a(e,["role"],r),e}function kL(t){const e={};if(l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(t,["description"]);n!=null&&a(e,["description"],n);const r=l(t,["name"]);r!=null&&a(e,["name"],r);const i=l(t,["parameters"]);i!=null&&a(e,["parameters"],i);const o=l(t,["parametersJsonSchema"]);o!=null&&a(e,["parametersJsonSchema"],o);const s=l(t,["response"]);s!=null&&a(e,["response"],s);const u=l(t,["responseJsonSchema"]);return u!=null&&a(e,["responseJsonSchema"],u),e}function NL(t){const e={},n=l(t,["startTime"]);n!=null&&a(e,["startTime"],n);const r=l(t,["endTime"]);return r!=null&&a(e,["endTime"],r),e}function ML(t){const e={},n=l(t,["timeRangeFilter"]);n!=null&&a(e,["timeRangeFilter"],NL(n));const r=l(t,["excludeDomains"]);return r!=null&&a(e,["excludeDomains"],r),e}function DL(t){const e={},n=l(t,["mode"]);n!=null&&a(e,["mode"],n);const r=l(t,["dynamicThreshold"]);return r!=null&&a(e,["dynamicThreshold"],r),e}function VL(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&a(e,["dynamicRetrievalConfig"],DL(n)),e}function LL(t){const e={},n=l(t,["excludeDomains"]);return n!=null&&a(e,["excludeDomains"],n),e}function UL(t){const e={},n=l(t,["apiKeyString"]);return n!=null&&a(e,["apiKeyString"],n),e}function FL(t){const e={},n=l(t,["apiKeyConfig"]);n!=null&&a(e,["apiKeyConfig"],UL(n));const r=l(t,["authType"]);r!=null&&a(e,["authType"],r);const i=l(t,["googleServiceAccountConfig"]);i!=null&&a(e,["googleServiceAccountConfig"],i);const o=l(t,["httpBasicAuthConfig"]);o!=null&&a(e,["httpBasicAuthConfig"],o);const s=l(t,["oauthConfig"]);s!=null&&a(e,["oauthConfig"],s);const u=l(t,["oidcConfig"]);return u!=null&&a(e,["oidcConfig"],u),e}function bL(t){const e={},n=l(t,["authConfig"]);return n!=null&&a(e,["authConfig"],FL(n)),e}function OL(){return{}}function BL(t){const e={},n=l(t,["environment"]);return n!=null&&a(e,["environment"],n),e}function qL(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(g=>kL(g))),a(e,["functionDeclarations"],p)}const r=l(t,["retrieval"]);r!=null&&a(e,["retrieval"],r);const i=l(t,["googleSearch"]);i!=null&&a(e,["googleSearch"],ML(i));const o=l(t,["googleSearchRetrieval"]);o!=null&&a(e,["googleSearchRetrieval"],VL(o));const s=l(t,["enterpriseWebSearch"]);s!=null&&a(e,["enterpriseWebSearch"],LL(s));const u=l(t,["googleMaps"]);u!=null&&a(e,["googleMaps"],bL(u)),l(t,["urlContext"])!=null&&a(e,["urlContext"],OL());const d=l(t,["computerUse"]);d!=null&&a(e,["computerUse"],BL(d));const h=l(t,["codeExecution"]);return h!=null&&a(e,["codeExecution"],h),e}function $L(t){const e={},n=l(t,["handle"]);n!=null&&a(e,["handle"],n);const r=l(t,["transparent"]);return r!=null&&a(e,["transparent"],r),e}function qv(){return{}}function GL(t){const e={},n=l(t,["disabled"]);n!=null&&a(e,["disabled"],n);const r=l(t,["startOfSpeechSensitivity"]);r!=null&&a(e,["startOfSpeechSensitivity"],r);const i=l(t,["endOfSpeechSensitivity"]);i!=null&&a(e,["endOfSpeechSensitivity"],i);const o=l(t,["prefixPaddingMs"]);o!=null&&a(e,["prefixPaddingMs"],o);const s=l(t,["silenceDurationMs"]);return s!=null&&a(e,["silenceDurationMs"],s),e}function HL(t){const e={},n=l(t,["automaticActivityDetection"]);n!=null&&a(e,["automaticActivityDetection"],GL(n));const r=l(t,["activityHandling"]);r!=null&&a(e,["activityHandling"],r);const i=l(t,["turnCoverage"]);return i!=null&&a(e,["turnCoverage"],i),e}function zL(t){const e={},n=l(t,["targetTokens"]);return n!=null&&a(e,["targetTokens"],n),e}function WL(t){const e={},n=l(t,["triggerTokens"]);n!=null&&a(e,["triggerTokens"],n);const r=l(t,["slidingWindow"]);return r!=null&&a(e,["slidingWindow"],zL(r)),e}function KL(t){const e={},n=l(t,["proactiveAudio"]);return n!=null&&a(e,["proactiveAudio"],n),e}function JL(t,e){const n={},r=l(t,["generationConfig"]);e!==void 0&&r!=null&&a(e,["setup","generationConfig"],r);const i=l(t,["responseModalities"]);e!==void 0&&i!=null&&a(e,["setup","generationConfig","responseModalities"],i);const o=l(t,["temperature"]);e!==void 0&&o!=null&&a(e,["setup","generationConfig","temperature"],o);const s=l(t,["topP"]);e!==void 0&&s!=null&&a(e,["setup","generationConfig","topP"],s);const u=l(t,["topK"]);e!==void 0&&u!=null&&a(e,["setup","generationConfig","topK"],u);const c=l(t,["maxOutputTokens"]);e!==void 0&&c!=null&&a(e,["setup","generationConfig","maxOutputTokens"],c);const d=l(t,["mediaResolution"]);e!==void 0&&d!=null&&a(e,["setup","generationConfig","mediaResolution"],d);const h=l(t,["seed"]);e!==void 0&&h!=null&&a(e,["setup","generationConfig","seed"],h);const p=l(t,["speechConfig"]);e!==void 0&&p!=null&&a(e,["setup","generationConfig","speechConfig"],SL(Tp(p)));const g=l(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&a(e,["setup","generationConfig","enableAffectiveDialog"],g);const v=l(t,["systemInstruction"]);e!==void 0&&v!=null&&a(e,["setup","systemInstruction"],PL(pt(v)));const R=l(t,["tools"]);if(e!==void 0&&R!=null){let F=Ao(R);Array.isArray(F)&&(F=F.map(b=>qL(wo(b)))),a(e,["setup","tools"],F)}const P=l(t,["sessionResumption"]);e!==void 0&&P!=null&&a(e,["setup","sessionResumption"],$L(P));const D=l(t,["inputAudioTranscription"]);e!==void 0&&D!=null&&a(e,["setup","inputAudioTranscription"],qv());const w=l(t,["outputAudioTranscription"]);e!==void 0&&w!=null&&a(e,["setup","outputAudioTranscription"],qv());const _=l(t,["realtimeInputConfig"]);e!==void 0&&_!=null&&a(e,["setup","realtimeInputConfig"],HL(_));const S=l(t,["contextWindowCompression"]);e!==void 0&&S!=null&&a(e,["setup","contextWindowCompression"],WL(S));const V=l(t,["proactivity"]);return e!==void 0&&V!=null&&a(e,["setup","proactivity"],KL(V)),n}function QL(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["setup","model"],Te(t,r));const i=l(e,["config"]);return i!=null&&a(n,["config"],JL(i,n)),n}function YL(){return{}}function XL(){return{}}function ZL(t){const e={},n=l(t,["media"]);n!=null&&a(e,["mediaChunks"],V0(n));const r=l(t,["audio"]);r!=null&&a(e,["audio"],U0(r));const i=l(t,["audioStreamEnd"]);i!=null&&a(e,["audioStreamEnd"],i);const o=l(t,["video"]);o!=null&&a(e,["video"],L0(o));const s=l(t,["text"]);return s!=null&&a(e,["text"],s),l(t,["activityStart"])!=null&&a(e,["activityStart"],YL()),l(t,["activityEnd"])!=null&&a(e,["activityEnd"],XL()),e}function jL(){return{}}function e2(t){const e={},n=l(t,["fps"]);n!=null&&a(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&a(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&a(e,["startOffset"],i),e}function t2(t){const e={},n=l(t,["data"]);n!=null&&a(e,["data"],n);const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function n2(t){const e={},n=l(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function r2(t){const e={},n=l(t,["videoMetadata"]);n!=null&&a(e,["videoMetadata"],e2(n));const r=l(t,["thought"]);r!=null&&a(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&a(e,["inlineData"],t2(i));const o=l(t,["fileData"]);o!=null&&a(e,["fileData"],n2(o));const s=l(t,["thoughtSignature"]);s!=null&&a(e,["thoughtSignature"],s);const u=l(t,["codeExecutionResult"]);u!=null&&a(e,["codeExecutionResult"],u);const c=l(t,["executableCode"]);c!=null&&a(e,["executableCode"],c);const d=l(t,["functionCall"]);d!=null&&a(e,["functionCall"],d);const h=l(t,["functionResponse"]);h!=null&&a(e,["functionResponse"],h);const p=l(t,["text"]);return p!=null&&a(e,["text"],p),e}function i2(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>r2(o))),a(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&a(e,["role"],r),e}function $v(t){const e={},n=l(t,["text"]);n!=null&&a(e,["text"],n);const r=l(t,["finished"]);return r!=null&&a(e,["finished"],r),e}function o2(t){const e={},n=l(t,["retrievedUrl"]);n!=null&&a(e,["retrievedUrl"],n);const r=l(t,["urlRetrievalStatus"]);return r!=null&&a(e,["urlRetrievalStatus"],r),e}function s2(t){const e={},n=l(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>o2(i))),a(e,["urlMetadata"],r)}return e}function l2(t){const e={},n=l(t,["modelTurn"]);n!=null&&a(e,["modelTurn"],i2(n));const r=l(t,["turnComplete"]);r!=null&&a(e,["turnComplete"],r);const i=l(t,["interrupted"]);i!=null&&a(e,["interrupted"],i);const o=l(t,["groundingMetadata"]);o!=null&&a(e,["groundingMetadata"],o);const s=l(t,["generationComplete"]);s!=null&&a(e,["generationComplete"],s);const u=l(t,["inputTranscription"]);u!=null&&a(e,["inputTranscription"],$v(u));const c=l(t,["outputTranscription"]);c!=null&&a(e,["outputTranscription"],$v(c));const d=l(t,["urlContextMetadata"]);return d!=null&&a(e,["urlContextMetadata"],s2(d)),e}function a2(t){const e={},n=l(t,["id"]);n!=null&&a(e,["id"],n);const r=l(t,["args"]);r!=null&&a(e,["args"],r);const i=l(t,["name"]);return i!=null&&a(e,["name"],i),e}function u2(t){const e={},n=l(t,["functionCalls"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>a2(i))),a(e,["functionCalls"],r)}return e}function c2(t){const e={},n=l(t,["ids"]);return n!=null&&a(e,["ids"],n),e}function ea(t){const e={},n=l(t,["modality"]);n!=null&&a(e,["modality"],n);const r=l(t,["tokenCount"]);return r!=null&&a(e,["tokenCount"],r),e}function d2(t){const e={},n=l(t,["promptTokenCount"]);n!=null&&a(e,["promptTokenCount"],n);const r=l(t,["cachedContentTokenCount"]);r!=null&&a(e,["cachedContentTokenCount"],r);const i=l(t,["responseTokenCount"]);i!=null&&a(e,["responseTokenCount"],i);const o=l(t,["toolUsePromptTokenCount"]);o!=null&&a(e,["toolUsePromptTokenCount"],o);const s=l(t,["thoughtsTokenCount"]);s!=null&&a(e,["thoughtsTokenCount"],s);const u=l(t,["totalTokenCount"]);u!=null&&a(e,["totalTokenCount"],u);const c=l(t,["promptTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(v=>ea(v))),a(e,["promptTokensDetails"],g)}const d=l(t,["cacheTokensDetails"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(v=>ea(v))),a(e,["cacheTokensDetails"],g)}const h=l(t,["responseTokensDetails"]);if(h!=null){let g=h;Array.isArray(g)&&(g=g.map(v=>ea(v))),a(e,["responseTokensDetails"],g)}const p=l(t,["toolUsePromptTokensDetails"]);if(p!=null){let g=p;Array.isArray(g)&&(g=g.map(v=>ea(v))),a(e,["toolUsePromptTokensDetails"],g)}return e}function f2(t){const e={},n=l(t,["timeLeft"]);return n!=null&&a(e,["timeLeft"],n),e}function h2(t){const e={},n=l(t,["newHandle"]);n!=null&&a(e,["newHandle"],n);const r=l(t,["resumable"]);r!=null&&a(e,["resumable"],r);const i=l(t,["lastConsumedClientMessageIndex"]);return i!=null&&a(e,["lastConsumedClientMessageIndex"],i),e}function p2(t){const e={};l(t,["setupComplete"])!=null&&a(e,["setupComplete"],jL());const r=l(t,["serverContent"]);r!=null&&a(e,["serverContent"],l2(r));const i=l(t,["toolCall"]);i!=null&&a(e,["toolCall"],u2(i));const o=l(t,["toolCallCancellation"]);o!=null&&a(e,["toolCallCancellation"],c2(o));const s=l(t,["usageMetadata"]);s!=null&&a(e,["usageMetadata"],d2(s));const u=l(t,["goAway"]);u!=null&&a(e,["goAway"],f2(u));const c=l(t,["sessionResumptionUpdate"]);return c!=null&&a(e,["sessionResumptionUpdate"],h2(c)),e}function m2(){return{}}function g2(t){const e={},n=l(t,["text"]);n!=null&&a(e,["text"],n);const r=l(t,["weight"]);return r!=null&&a(e,["weight"],r),e}function y2(t){const e={},n=l(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>g2(i))),a(e,["weightedPrompts"],r)}return e}function v2(t){const e={},n=l(t,["temperature"]);n!=null&&a(e,["temperature"],n);const r=l(t,["topK"]);r!=null&&a(e,["topK"],r);const i=l(t,["seed"]);i!=null&&a(e,["seed"],i);const o=l(t,["guidance"]);o!=null&&a(e,["guidance"],o);const s=l(t,["bpm"]);s!=null&&a(e,["bpm"],s);const u=l(t,["density"]);u!=null&&a(e,["density"],u);const c=l(t,["brightness"]);c!=null&&a(e,["brightness"],c);const d=l(t,["scale"]);d!=null&&a(e,["scale"],d);const h=l(t,["muteBass"]);h!=null&&a(e,["muteBass"],h);const p=l(t,["muteDrums"]);p!=null&&a(e,["muteDrums"],p);const g=l(t,["onlyBassAndDrums"]);g!=null&&a(e,["onlyBassAndDrums"],g);const v=l(t,["musicGenerationMode"]);return v!=null&&a(e,["musicGenerationMode"],v),e}function _2(t){const e={},n=l(t,["clientContent"]);n!=null&&a(e,["clientContent"],y2(n));const r=l(t,["musicGenerationConfig"]);return r!=null&&a(e,["musicGenerationConfig"],v2(r)),e}function T2(t){const e={},n=l(t,["data"]);n!=null&&a(e,["data"],n);const r=l(t,["mimeType"]);r!=null&&a(e,["mimeType"],r);const i=l(t,["sourceMetadata"]);return i!=null&&a(e,["sourceMetadata"],_2(i)),e}function E2(t){const e={},n=l(t,["audioChunks"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>T2(i))),a(e,["audioChunks"],r)}return e}function C2(t){const e={},n=l(t,["text"]);n!=null&&a(e,["text"],n);const r=l(t,["filteredReason"]);return r!=null&&a(e,["filteredReason"],r),e}function I2(t){const e={};l(t,["setupComplete"])!=null&&a(e,["setupComplete"],m2());const r=l(t,["serverContent"]);r!=null&&a(e,["serverContent"],E2(r));const i=l(t,["filteredPrompt"]);return i!=null&&a(e,["filteredPrompt"],C2(i)),e}function S2(t){const e={},n=l(t,["sessionId"]);return n!=null&&a(e,["sessionId"],n),e}function w2(t){const e={},n=l(t,["fps"]);n!=null&&a(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&a(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&a(e,["startOffset"],i),e}function A2(t){const e={},n=l(t,["displayName"]);n!=null&&a(e,["displayName"],n);const r=l(t,["data"]);r!=null&&a(e,["data"],r);const i=l(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function R2(t){const e={},n=l(t,["displayName"]);n!=null&&a(e,["displayName"],n);const r=l(t,["fileUri"]);r!=null&&a(e,["fileUri"],r);const i=l(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function x2(t){const e={},n=l(t,["videoMetadata"]);n!=null&&a(e,["videoMetadata"],w2(n));const r=l(t,["thought"]);r!=null&&a(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&a(e,["inlineData"],A2(i));const o=l(t,["fileData"]);o!=null&&a(e,["fileData"],R2(o));const s=l(t,["thoughtSignature"]);s!=null&&a(e,["thoughtSignature"],s);const u=l(t,["codeExecutionResult"]);u!=null&&a(e,["codeExecutionResult"],u);const c=l(t,["executableCode"]);c!=null&&a(e,["executableCode"],c);const d=l(t,["functionCall"]);d!=null&&a(e,["functionCall"],d);const h=l(t,["functionResponse"]);h!=null&&a(e,["functionResponse"],h);const p=l(t,["text"]);return p!=null&&a(e,["text"],p),e}function P2(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>x2(o))),a(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&a(e,["role"],r),e}function Gv(t){const e={},n=l(t,["text"]);n!=null&&a(e,["text"],n);const r=l(t,["finished"]);return r!=null&&a(e,["finished"],r),e}function k2(t){const e={},n=l(t,["modelTurn"]);n!=null&&a(e,["modelTurn"],P2(n));const r=l(t,["turnComplete"]);r!=null&&a(e,["turnComplete"],r);const i=l(t,["interrupted"]);i!=null&&a(e,["interrupted"],i);const o=l(t,["groundingMetadata"]);o!=null&&a(e,["groundingMetadata"],o);const s=l(t,["generationComplete"]);s!=null&&a(e,["generationComplete"],s);const u=l(t,["inputTranscription"]);u!=null&&a(e,["inputTranscription"],Gv(u));const c=l(t,["outputTranscription"]);return c!=null&&a(e,["outputTranscription"],Gv(c)),e}function N2(t){const e={},n=l(t,["args"]);n!=null&&a(e,["args"],n);const r=l(t,["name"]);return r!=null&&a(e,["name"],r),e}function M2(t){const e={},n=l(t,["functionCalls"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>N2(i))),a(e,["functionCalls"],r)}return e}function D2(t){const e={},n=l(t,["ids"]);return n!=null&&a(e,["ids"],n),e}function ta(t){const e={},n=l(t,["modality"]);n!=null&&a(e,["modality"],n);const r=l(t,["tokenCount"]);return r!=null&&a(e,["tokenCount"],r),e}function V2(t){const e={},n=l(t,["promptTokenCount"]);n!=null&&a(e,["promptTokenCount"],n);const r=l(t,["cachedContentTokenCount"]);r!=null&&a(e,["cachedContentTokenCount"],r);const i=l(t,["candidatesTokenCount"]);i!=null&&a(e,["responseTokenCount"],i);const o=l(t,["toolUsePromptTokenCount"]);o!=null&&a(e,["toolUsePromptTokenCount"],o);const s=l(t,["thoughtsTokenCount"]);s!=null&&a(e,["thoughtsTokenCount"],s);const u=l(t,["totalTokenCount"]);u!=null&&a(e,["totalTokenCount"],u);const c=l(t,["promptTokensDetails"]);if(c!=null){let v=c;Array.isArray(v)&&(v=v.map(R=>ta(R))),a(e,["promptTokensDetails"],v)}const d=l(t,["cacheTokensDetails"]);if(d!=null){let v=d;Array.isArray(v)&&(v=v.map(R=>ta(R))),a(e,["cacheTokensDetails"],v)}const h=l(t,["candidatesTokensDetails"]);if(h!=null){let v=h;Array.isArray(v)&&(v=v.map(R=>ta(R))),a(e,["responseTokensDetails"],v)}const p=l(t,["toolUsePromptTokensDetails"]);if(p!=null){let v=p;Array.isArray(v)&&(v=v.map(R=>ta(R))),a(e,["toolUsePromptTokensDetails"],v)}const g=l(t,["trafficType"]);return g!=null&&a(e,["trafficType"],g),e}function L2(t){const e={},n=l(t,["timeLeft"]);return n!=null&&a(e,["timeLeft"],n),e}function U2(t){const e={},n=l(t,["newHandle"]);n!=null&&a(e,["newHandle"],n);const r=l(t,["resumable"]);r!=null&&a(e,["resumable"],r);const i=l(t,["lastConsumedClientMessageIndex"]);return i!=null&&a(e,["lastConsumedClientMessageIndex"],i),e}function F2(t){const e={},n=l(t,["setupComplete"]);n!=null&&a(e,["setupComplete"],S2(n));const r=l(t,["serverContent"]);r!=null&&a(e,["serverContent"],k2(r));const i=l(t,["toolCall"]);i!=null&&a(e,["toolCall"],M2(i));const o=l(t,["toolCallCancellation"]);o!=null&&a(e,["toolCallCancellation"],D2(o));const s=l(t,["usageMetadata"]);s!=null&&a(e,["usageMetadata"],V2(s));const u=l(t,["goAway"]);u!=null&&a(e,["goAway"],L2(u));const c=l(t,["sessionResumptionUpdate"]);return c!=null&&a(e,["sessionResumptionUpdate"],U2(c)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function b2(t){const e={},n=l(t,["fps"]);n!=null&&a(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&a(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&a(e,["startOffset"],i),e}function O2(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["data"]);n!=null&&a(e,["data"],n);const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function B2(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function q2(t){const e={},n=l(t,["videoMetadata"]);n!=null&&a(e,["videoMetadata"],b2(n));const r=l(t,["thought"]);r!=null&&a(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&a(e,["inlineData"],O2(i));const o=l(t,["fileData"]);o!=null&&a(e,["fileData"],B2(o));const s=l(t,["thoughtSignature"]);s!=null&&a(e,["thoughtSignature"],s);const u=l(t,["codeExecutionResult"]);u!=null&&a(e,["codeExecutionResult"],u);const c=l(t,["executableCode"]);c!=null&&a(e,["executableCode"],c);const d=l(t,["functionCall"]);d!=null&&a(e,["functionCall"],d);const h=l(t,["functionResponse"]);h!=null&&a(e,["functionResponse"],h);const p=l(t,["text"]);return p!=null&&a(e,["text"],p),e}function ec(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>q2(o))),a(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&a(e,["role"],r),e}function $2(t){const e={},n=l(t,["anyOf"]);n!=null&&a(e,["anyOf"],n);const r=l(t,["default"]);r!=null&&a(e,["default"],r);const i=l(t,["description"]);i!=null&&a(e,["description"],i);const o=l(t,["enum"]);o!=null&&a(e,["enum"],o);const s=l(t,["example"]);s!=null&&a(e,["example"],s);const u=l(t,["format"]);u!=null&&a(e,["format"],u);const c=l(t,["items"]);c!=null&&a(e,["items"],c);const d=l(t,["maxItems"]);d!=null&&a(e,["maxItems"],d);const h=l(t,["maxLength"]);h!=null&&a(e,["maxLength"],h);const p=l(t,["maxProperties"]);p!=null&&a(e,["maxProperties"],p);const g=l(t,["maximum"]);g!=null&&a(e,["maximum"],g);const v=l(t,["minItems"]);v!=null&&a(e,["minItems"],v);const R=l(t,["minLength"]);R!=null&&a(e,["minLength"],R);const P=l(t,["minProperties"]);P!=null&&a(e,["minProperties"],P);const D=l(t,["minimum"]);D!=null&&a(e,["minimum"],D);const w=l(t,["nullable"]);w!=null&&a(e,["nullable"],w);const _=l(t,["pattern"]);_!=null&&a(e,["pattern"],_);const S=l(t,["properties"]);S!=null&&a(e,["properties"],S);const V=l(t,["propertyOrdering"]);V!=null&&a(e,["propertyOrdering"],V);const F=l(t,["required"]);F!=null&&a(e,["required"],F);const b=l(t,["title"]);b!=null&&a(e,["title"],b);const A=l(t,["type"]);return A!=null&&a(e,["type"],A),e}function G2(t){const e={};if(l(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=l(t,["category"]);n!=null&&a(e,["category"],n);const r=l(t,["threshold"]);return r!=null&&a(e,["threshold"],r),e}function H2(t){const e={},n=l(t,["behavior"]);n!=null&&a(e,["behavior"],n);const r=l(t,["description"]);r!=null&&a(e,["description"],r);const i=l(t,["name"]);i!=null&&a(e,["name"],i);const o=l(t,["parameters"]);o!=null&&a(e,["parameters"],o);const s=l(t,["parametersJsonSchema"]);s!=null&&a(e,["parametersJsonSchema"],s);const u=l(t,["response"]);u!=null&&a(e,["response"],u);const c=l(t,["responseJsonSchema"]);return c!=null&&a(e,["responseJsonSchema"],c),e}function z2(t){const e={},n=l(t,["startTime"]);n!=null&&a(e,["startTime"],n);const r=l(t,["endTime"]);return r!=null&&a(e,["endTime"],r),e}function W2(t){const e={},n=l(t,["timeRangeFilter"]);if(n!=null&&a(e,["timeRangeFilter"],z2(n)),l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function K2(t){const e={},n=l(t,["mode"]);n!=null&&a(e,["mode"],n);const r=l(t,["dynamicThreshold"]);return r!=null&&a(e,["dynamicThreshold"],r),e}function J2(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&a(e,["dynamicRetrievalConfig"],K2(n)),e}function Q2(){return{}}function Y2(t){const e={},n=l(t,["environment"]);return n!=null&&a(e,["environment"],n),e}function X2(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(d=>H2(d))),a(e,["functionDeclarations"],c)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(t,["googleSearch"]);r!=null&&a(e,["googleSearch"],W2(r));const i=l(t,["googleSearchRetrieval"]);if(i!=null&&a(e,["googleSearchRetrieval"],J2(i)),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(l(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");l(t,["urlContext"])!=null&&a(e,["urlContext"],Q2());const s=l(t,["computerUse"]);s!=null&&a(e,["computerUse"],Y2(s));const u=l(t,["codeExecution"]);return u!=null&&a(e,["codeExecution"],u),e}function Z2(t){const e={},n=l(t,["mode"]);n!=null&&a(e,["mode"],n);const r=l(t,["allowedFunctionNames"]);return r!=null&&a(e,["allowedFunctionNames"],r),e}function j2(t){const e={},n=l(t,["latitude"]);n!=null&&a(e,["latitude"],n);const r=l(t,["longitude"]);return r!=null&&a(e,["longitude"],r),e}function eU(t){const e={},n=l(t,["latLng"]);n!=null&&a(e,["latLng"],j2(n));const r=l(t,["languageCode"]);return r!=null&&a(e,["languageCode"],r),e}function tU(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&a(e,["functionCallingConfig"],Z2(n));const r=l(t,["retrievalConfig"]);return r!=null&&a(e,["retrievalConfig"],eU(r)),e}function nU(t){const e={},n=l(t,["voiceName"]);return n!=null&&a(e,["voiceName"],n),e}function tI(t){const e={},n=l(t,["prebuiltVoiceConfig"]);return n!=null&&a(e,["prebuiltVoiceConfig"],nU(n)),e}function rU(t){const e={},n=l(t,["speaker"]);n!=null&&a(e,["speaker"],n);const r=l(t,["voiceConfig"]);return r!=null&&a(e,["voiceConfig"],tI(r)),e}function iU(t){const e={},n=l(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>rU(i))),a(e,["speakerVoiceConfigs"],r)}return e}function oU(t){const e={},n=l(t,["voiceConfig"]);n!=null&&a(e,["voiceConfig"],tI(n));const r=l(t,["multiSpeakerVoiceConfig"]);r!=null&&a(e,["multiSpeakerVoiceConfig"],iU(r));const i=l(t,["languageCode"]);return i!=null&&a(e,["languageCode"],i),e}function sU(t){const e={},n=l(t,["includeThoughts"]);n!=null&&a(e,["includeThoughts"],n);const r=l(t,["thinkingBudget"]);return r!=null&&a(e,["thinkingBudget"],r),e}function lU(t,e,n){const r={},i=l(e,["systemInstruction"]);n!==void 0&&i!=null&&a(n,["systemInstruction"],ec(pt(i)));const o=l(e,["temperature"]);o!=null&&a(r,["temperature"],o);const s=l(e,["topP"]);s!=null&&a(r,["topP"],s);const u=l(e,["topK"]);u!=null&&a(r,["topK"],u);const c=l(e,["candidateCount"]);c!=null&&a(r,["candidateCount"],c);const d=l(e,["maxOutputTokens"]);d!=null&&a(r,["maxOutputTokens"],d);const h=l(e,["stopSequences"]);h!=null&&a(r,["stopSequences"],h);const p=l(e,["responseLogprobs"]);p!=null&&a(r,["responseLogprobs"],p);const g=l(e,["logprobs"]);g!=null&&a(r,["logprobs"],g);const v=l(e,["presencePenalty"]);v!=null&&a(r,["presencePenalty"],v);const R=l(e,["frequencyPenalty"]);R!=null&&a(r,["frequencyPenalty"],R);const P=l(e,["seed"]);P!=null&&a(r,["seed"],P);const D=l(e,["responseMimeType"]);D!=null&&a(r,["responseMimeType"],D);const w=l(e,["responseSchema"]);w!=null&&a(r,["responseSchema"],$2(vp(w)));const _=l(e,["responseJsonSchema"]);if(_!=null&&a(r,["responseJsonSchema"],_),l(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const S=l(e,["safetySettings"]);if(n!==void 0&&S!=null){let N=S;Array.isArray(N)&&(N=N.map(M=>G2(M))),a(n,["safetySettings"],N)}const V=l(e,["tools"]);if(n!==void 0&&V!=null){let N=Ao(V);Array.isArray(N)&&(N=N.map(M=>X2(wo(M)))),a(n,["tools"],N)}const F=l(e,["toolConfig"]);if(n!==void 0&&F!=null&&a(n,["toolConfig"],tU(F)),l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const b=l(e,["cachedContent"]);n!==void 0&&b!=null&&a(n,["cachedContent"],Qn(t,b));const A=l(e,["responseModalities"]);A!=null&&a(r,["responseModalities"],A);const E=l(e,["mediaResolution"]);E!=null&&a(r,["mediaResolution"],E);const I=l(e,["speechConfig"]);if(I!=null&&a(r,["speechConfig"],oU(_p(I))),l(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const x=l(e,["thinkingConfig"]);return x!=null&&a(r,["thinkingConfig"],sU(x)),r}function Hv(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","model"],Te(t,r));const i=l(e,["contents"]);if(i!=null){let s=Jt(i);Array.isArray(s)&&(s=s.map(u=>ec(u))),a(n,["contents"],s)}const o=l(e,["config"]);return o!=null&&a(n,["generationConfig"],lU(t,o,n)),n}function aU(t,e){const n={},r=l(t,["taskType"]);e!==void 0&&r!=null&&a(e,["requests[]","taskType"],r);const i=l(t,["title"]);e!==void 0&&i!=null&&a(e,["requests[]","title"],i);const o=l(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&a(e,["requests[]","outputDimensionality"],o),l(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(l(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function uU(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","model"],Te(t,r));const i=l(e,["contents"]);i!=null&&a(n,["requests[]","content"],b0(t,i));const o=l(e,["config"]);o!=null&&a(n,["config"],aU(o,n));const s=l(e,["model"]);return s!==void 0&&a(n,["requests[]","model"],Te(t,s)),n}function cU(t,e){const n={};if(l(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=l(t,["numberOfImages"]);e!==void 0&&r!=null&&a(e,["parameters","sampleCount"],r);const i=l(t,["aspectRatio"]);e!==void 0&&i!=null&&a(e,["parameters","aspectRatio"],i);const o=l(t,["guidanceScale"]);if(e!==void 0&&o!=null&&a(e,["parameters","guidanceScale"],o),l(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=l(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&a(e,["parameters","safetySetting"],s);const u=l(t,["personGeneration"]);e!==void 0&&u!=null&&a(e,["parameters","personGeneration"],u);const c=l(t,["includeSafetyAttributes"]);e!==void 0&&c!=null&&a(e,["parameters","includeSafetyAttributes"],c);const d=l(t,["includeRaiReason"]);e!==void 0&&d!=null&&a(e,["parameters","includeRaiReason"],d);const h=l(t,["language"]);e!==void 0&&h!=null&&a(e,["parameters","language"],h);const p=l(t,["outputMimeType"]);e!==void 0&&p!=null&&a(e,["parameters","outputOptions","mimeType"],p);const g=l(t,["outputCompressionQuality"]);if(e!==void 0&&g!=null&&a(e,["parameters","outputOptions","compressionQuality"],g),l(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");const v=l(t,["imageSize"]);if(e!==void 0&&v!=null&&a(e,["parameters","sampleImageSize"],v),l(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function dU(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","model"],Te(t,r));const i=l(e,["prompt"]);i!=null&&a(n,["instances[0]","prompt"],i);const o=l(e,["config"]);return o!=null&&a(n,["config"],cU(o,n)),n}function fU(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","name"],Te(t,r));const i=l(e,["config"]);return i!=null&&a(n,["config"],i),n}function hU(t,e,n){const r={},i=l(e,["pageSize"]);n!==void 0&&i!=null&&a(n,["_query","pageSize"],i);const o=l(e,["pageToken"]);n!==void 0&&o!=null&&a(n,["_query","pageToken"],o);const s=l(e,["filter"]);n!==void 0&&s!=null&&a(n,["_query","filter"],s);const u=l(e,["queryBase"]);return n!==void 0&&u!=null&&a(n,["_url","models_url"],q0(t,u)),r}function pU(t,e){const n={},r=l(e,["config"]);return r!=null&&a(n,["config"],hU(t,r,n)),n}function mU(t,e){const n={},r=l(t,["displayName"]);e!==void 0&&r!=null&&a(e,["displayName"],r);const i=l(t,["description"]);e!==void 0&&i!=null&&a(e,["description"],i);const o=l(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&a(e,["defaultCheckpointId"],o),n}function gU(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","name"],Te(t,r));const i=l(e,["config"]);return i!=null&&a(n,["config"],mU(i,n)),n}function yU(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","name"],Te(t,r));const i=l(e,["config"]);return i!=null&&a(n,["config"],i),n}function vU(t){const e={};if(l(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(l(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(l(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function _U(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","model"],Te(t,r));const i=l(e,["contents"]);if(i!=null){let s=Jt(i);Array.isArray(s)&&(s=s.map(u=>ec(u))),a(n,["contents"],s)}const o=l(e,["config"]);return o!=null&&a(n,["config"],vU(o)),n}function nI(t){const e={};if(l(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=l(t,["imageBytes"]);n!=null&&a(e,["bytesBase64Encoded"],yi(n));const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function TU(t,e){const n={},r=l(t,["prompt"]);e!==void 0&&r!=null&&a(e,["instances[0]","prompt"],r);const i=l(t,["image"]);if(e!==void 0&&i!=null&&a(e,["instances[0]","image"],nI(i)),l(t,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");return n}function EU(t,e){const n={},r=l(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&a(e,["parameters","sampleCount"],r),l(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=l(t,["durationSeconds"]);if(e!==void 0&&i!=null&&a(e,["parameters","durationSeconds"],i),l(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=l(t,["aspectRatio"]);if(e!==void 0&&o!=null&&a(e,["parameters","aspectRatio"],o),l(t,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const s=l(t,["personGeneration"]);if(e!==void 0&&s!=null&&a(e,["parameters","personGeneration"],s),l(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const u=l(t,["negativePrompt"]);e!==void 0&&u!=null&&a(e,["parameters","negativePrompt"],u);const c=l(t,["enhancePrompt"]);if(e!==void 0&&c!=null&&a(e,["parameters","enhancePrompt"],c),l(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(l(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(l(t,["referenceImages"])!==void 0)throw new Error("referenceImages parameter is not supported in Gemini API.");if(l(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function CU(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","model"],Te(t,r));const i=l(e,["prompt"]);i!=null&&a(n,["instances[0]","prompt"],i);const o=l(e,["image"]);if(o!=null&&a(n,["instances[0]","image"],nI(o)),l(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const s=l(e,["source"]);s!=null&&a(n,["config"],TU(s,n));const u=l(e,["config"]);return u!=null&&a(n,["config"],EU(u,n)),n}function IU(t){const e={},n=l(t,["fps"]);n!=null&&a(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&a(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&a(e,["startOffset"],i),e}function SU(t){const e={},n=l(t,["displayName"]);n!=null&&a(e,["displayName"],n);const r=l(t,["data"]);r!=null&&a(e,["data"],r);const i=l(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function wU(t){const e={},n=l(t,["displayName"]);n!=null&&a(e,["displayName"],n);const r=l(t,["fileUri"]);r!=null&&a(e,["fileUri"],r);const i=l(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function AU(t){const e={},n=l(t,["videoMetadata"]);n!=null&&a(e,["videoMetadata"],IU(n));const r=l(t,["thought"]);r!=null&&a(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&a(e,["inlineData"],SU(i));const o=l(t,["fileData"]);o!=null&&a(e,["fileData"],wU(o));const s=l(t,["thoughtSignature"]);s!=null&&a(e,["thoughtSignature"],s);const u=l(t,["codeExecutionResult"]);u!=null&&a(e,["codeExecutionResult"],u);const c=l(t,["executableCode"]);c!=null&&a(e,["executableCode"],c);const d=l(t,["functionCall"]);d!=null&&a(e,["functionCall"],d);const h=l(t,["functionResponse"]);h!=null&&a(e,["functionResponse"],h);const p=l(t,["text"]);return p!=null&&a(e,["text"],p),e}function xo(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>AU(o))),a(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&a(e,["role"],r),e}function RU(t){const e={},n=l(t,["anyOf"]);n!=null&&a(e,["anyOf"],n);const r=l(t,["default"]);r!=null&&a(e,["default"],r);const i=l(t,["description"]);i!=null&&a(e,["description"],i);const o=l(t,["enum"]);o!=null&&a(e,["enum"],o);const s=l(t,["example"]);s!=null&&a(e,["example"],s);const u=l(t,["format"]);u!=null&&a(e,["format"],u);const c=l(t,["items"]);c!=null&&a(e,["items"],c);const d=l(t,["maxItems"]);d!=null&&a(e,["maxItems"],d);const h=l(t,["maxLength"]);h!=null&&a(e,["maxLength"],h);const p=l(t,["maxProperties"]);p!=null&&a(e,["maxProperties"],p);const g=l(t,["maximum"]);g!=null&&a(e,["maximum"],g);const v=l(t,["minItems"]);v!=null&&a(e,["minItems"],v);const R=l(t,["minLength"]);R!=null&&a(e,["minLength"],R);const P=l(t,["minProperties"]);P!=null&&a(e,["minProperties"],P);const D=l(t,["minimum"]);D!=null&&a(e,["minimum"],D);const w=l(t,["nullable"]);w!=null&&a(e,["nullable"],w);const _=l(t,["pattern"]);_!=null&&a(e,["pattern"],_);const S=l(t,["properties"]);S!=null&&a(e,["properties"],S);const V=l(t,["propertyOrdering"]);V!=null&&a(e,["propertyOrdering"],V);const F=l(t,["required"]);F!=null&&a(e,["required"],F);const b=l(t,["title"]);b!=null&&a(e,["title"],b);const A=l(t,["type"]);return A!=null&&a(e,["type"],A),e}function xU(t){const e={},n=l(t,["featureSelectionPreference"]);return n!=null&&a(e,["featureSelectionPreference"],n),e}function PU(t){const e={},n=l(t,["method"]);n!=null&&a(e,["method"],n);const r=l(t,["category"]);r!=null&&a(e,["category"],r);const i=l(t,["threshold"]);return i!=null&&a(e,["threshold"],i),e}function kU(t){const e={};if(l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(t,["description"]);n!=null&&a(e,["description"],n);const r=l(t,["name"]);r!=null&&a(e,["name"],r);const i=l(t,["parameters"]);i!=null&&a(e,["parameters"],i);const o=l(t,["parametersJsonSchema"]);o!=null&&a(e,["parametersJsonSchema"],o);const s=l(t,["response"]);s!=null&&a(e,["response"],s);const u=l(t,["responseJsonSchema"]);return u!=null&&a(e,["responseJsonSchema"],u),e}function NU(t){const e={},n=l(t,["startTime"]);n!=null&&a(e,["startTime"],n);const r=l(t,["endTime"]);return r!=null&&a(e,["endTime"],r),e}function MU(t){const e={},n=l(t,["timeRangeFilter"]);n!=null&&a(e,["timeRangeFilter"],NU(n));const r=l(t,["excludeDomains"]);return r!=null&&a(e,["excludeDomains"],r),e}function DU(t){const e={},n=l(t,["mode"]);n!=null&&a(e,["mode"],n);const r=l(t,["dynamicThreshold"]);return r!=null&&a(e,["dynamicThreshold"],r),e}function VU(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&a(e,["dynamicRetrievalConfig"],DU(n)),e}function LU(t){const e={},n=l(t,["excludeDomains"]);return n!=null&&a(e,["excludeDomains"],n),e}function UU(t){const e={},n=l(t,["apiKeyString"]);return n!=null&&a(e,["apiKeyString"],n),e}function FU(t){const e={},n=l(t,["apiKeyConfig"]);n!=null&&a(e,["apiKeyConfig"],UU(n));const r=l(t,["authType"]);r!=null&&a(e,["authType"],r);const i=l(t,["googleServiceAccountConfig"]);i!=null&&a(e,["googleServiceAccountConfig"],i);const o=l(t,["httpBasicAuthConfig"]);o!=null&&a(e,["httpBasicAuthConfig"],o);const s=l(t,["oauthConfig"]);s!=null&&a(e,["oauthConfig"],s);const u=l(t,["oidcConfig"]);return u!=null&&a(e,["oidcConfig"],u),e}function bU(t){const e={},n=l(t,["authConfig"]);return n!=null&&a(e,["authConfig"],FU(n)),e}function OU(){return{}}function BU(t){const e={},n=l(t,["environment"]);return n!=null&&a(e,["environment"],n),e}function rI(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(g=>kU(g))),a(e,["functionDeclarations"],p)}const r=l(t,["retrieval"]);r!=null&&a(e,["retrieval"],r);const i=l(t,["googleSearch"]);i!=null&&a(e,["googleSearch"],MU(i));const o=l(t,["googleSearchRetrieval"]);o!=null&&a(e,["googleSearchRetrieval"],VU(o));const s=l(t,["enterpriseWebSearch"]);s!=null&&a(e,["enterpriseWebSearch"],LU(s));const u=l(t,["googleMaps"]);u!=null&&a(e,["googleMaps"],bU(u)),l(t,["urlContext"])!=null&&a(e,["urlContext"],OU());const d=l(t,["computerUse"]);d!=null&&a(e,["computerUse"],BU(d));const h=l(t,["codeExecution"]);return h!=null&&a(e,["codeExecution"],h),e}function qU(t){const e={},n=l(t,["mode"]);n!=null&&a(e,["mode"],n);const r=l(t,["allowedFunctionNames"]);return r!=null&&a(e,["allowedFunctionNames"],r),e}function $U(t){const e={},n=l(t,["latitude"]);n!=null&&a(e,["latitude"],n);const r=l(t,["longitude"]);return r!=null&&a(e,["longitude"],r),e}function GU(t){const e={},n=l(t,["latLng"]);n!=null&&a(e,["latLng"],$U(n));const r=l(t,["languageCode"]);return r!=null&&a(e,["languageCode"],r),e}function HU(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&a(e,["functionCallingConfig"],qU(n));const r=l(t,["retrievalConfig"]);return r!=null&&a(e,["retrievalConfig"],GU(r)),e}function zU(t){const e={},n=l(t,["voiceName"]);return n!=null&&a(e,["voiceName"],n),e}function WU(t){const e={},n=l(t,["prebuiltVoiceConfig"]);return n!=null&&a(e,["prebuiltVoiceConfig"],zU(n)),e}function KU(t){const e={},n=l(t,["voiceConfig"]);if(n!=null&&a(e,["voiceConfig"],WU(n)),l(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const r=l(t,["languageCode"]);return r!=null&&a(e,["languageCode"],r),e}function JU(t){const e={},n=l(t,["includeThoughts"]);n!=null&&a(e,["includeThoughts"],n);const r=l(t,["thinkingBudget"]);return r!=null&&a(e,["thinkingBudget"],r),e}function QU(t,e,n){const r={},i=l(e,["systemInstruction"]);n!==void 0&&i!=null&&a(n,["systemInstruction"],xo(pt(i)));const o=l(e,["temperature"]);o!=null&&a(r,["temperature"],o);const s=l(e,["topP"]);s!=null&&a(r,["topP"],s);const u=l(e,["topK"]);u!=null&&a(r,["topK"],u);const c=l(e,["candidateCount"]);c!=null&&a(r,["candidateCount"],c);const d=l(e,["maxOutputTokens"]);d!=null&&a(r,["maxOutputTokens"],d);const h=l(e,["stopSequences"]);h!=null&&a(r,["stopSequences"],h);const p=l(e,["responseLogprobs"]);p!=null&&a(r,["responseLogprobs"],p);const g=l(e,["logprobs"]);g!=null&&a(r,["logprobs"],g);const v=l(e,["presencePenalty"]);v!=null&&a(r,["presencePenalty"],v);const R=l(e,["frequencyPenalty"]);R!=null&&a(r,["frequencyPenalty"],R);const P=l(e,["seed"]);P!=null&&a(r,["seed"],P);const D=l(e,["responseMimeType"]);D!=null&&a(r,["responseMimeType"],D);const w=l(e,["responseSchema"]);w!=null&&a(r,["responseSchema"],RU(vp(w)));const _=l(e,["responseJsonSchema"]);_!=null&&a(r,["responseJsonSchema"],_);const S=l(e,["routingConfig"]);S!=null&&a(r,["routingConfig"],S);const V=l(e,["modelSelectionConfig"]);V!=null&&a(r,["modelConfig"],xU(V));const F=l(e,["safetySettings"]);if(n!==void 0&&F!=null){let Oe=F;Array.isArray(Oe)&&(Oe=Oe.map(Nt=>PU(Nt))),a(n,["safetySettings"],Oe)}const b=l(e,["tools"]);if(n!==void 0&&b!=null){let Oe=Ao(b);Array.isArray(Oe)&&(Oe=Oe.map(Nt=>rI(wo(Nt)))),a(n,["tools"],Oe)}const A=l(e,["toolConfig"]);n!==void 0&&A!=null&&a(n,["toolConfig"],HU(A));const E=l(e,["labels"]);n!==void 0&&E!=null&&a(n,["labels"],E);const I=l(e,["cachedContent"]);n!==void 0&&I!=null&&a(n,["cachedContent"],Qn(t,I));const x=l(e,["responseModalities"]);x!=null&&a(r,["responseModalities"],x);const N=l(e,["mediaResolution"]);N!=null&&a(r,["mediaResolution"],N);const M=l(e,["speechConfig"]);M!=null&&a(r,["speechConfig"],KU(_p(M)));const k=l(e,["audioTimestamp"]);k!=null&&a(r,["audioTimestamp"],k);const He=l(e,["thinkingConfig"]);return He!=null&&a(r,["thinkingConfig"],JU(He)),r}function zv(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","model"],Te(t,r));const i=l(e,["contents"]);if(i!=null){let s=Jt(i);Array.isArray(s)&&(s=s.map(u=>xo(u))),a(n,["contents"],s)}const o=l(e,["config"]);return o!=null&&a(n,["generationConfig"],QU(t,o,n)),n}function YU(t,e){const n={},r=l(t,["taskType"]);e!==void 0&&r!=null&&a(e,["instances[]","task_type"],r);const i=l(t,["title"]);e!==void 0&&i!=null&&a(e,["instances[]","title"],i);const o=l(t,["outputDimensionality"]);e!==void 0&&o!=null&&a(e,["parameters","outputDimensionality"],o);const s=l(t,["mimeType"]);e!==void 0&&s!=null&&a(e,["instances[]","mimeType"],s);const u=l(t,["autoTruncate"]);return e!==void 0&&u!=null&&a(e,["parameters","autoTruncate"],u),n}function XU(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","model"],Te(t,r));const i=l(e,["contents"]);i!=null&&a(n,["instances[]","content"],b0(t,i));const o=l(e,["config"]);return o!=null&&a(n,["config"],YU(o,n)),n}function ZU(t,e){const n={},r=l(t,["outputGcsUri"]);e!==void 0&&r!=null&&a(e,["parameters","storageUri"],r);const i=l(t,["negativePrompt"]);e!==void 0&&i!=null&&a(e,["parameters","negativePrompt"],i);const o=l(t,["numberOfImages"]);e!==void 0&&o!=null&&a(e,["parameters","sampleCount"],o);const s=l(t,["aspectRatio"]);e!==void 0&&s!=null&&a(e,["parameters","aspectRatio"],s);const u=l(t,["guidanceScale"]);e!==void 0&&u!=null&&a(e,["parameters","guidanceScale"],u);const c=l(t,["seed"]);e!==void 0&&c!=null&&a(e,["parameters","seed"],c);const d=l(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&a(e,["parameters","safetySetting"],d);const h=l(t,["personGeneration"]);e!==void 0&&h!=null&&a(e,["parameters","personGeneration"],h);const p=l(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&a(e,["parameters","includeSafetyAttributes"],p);const g=l(t,["includeRaiReason"]);e!==void 0&&g!=null&&a(e,["parameters","includeRaiReason"],g);const v=l(t,["language"]);e!==void 0&&v!=null&&a(e,["parameters","language"],v);const R=l(t,["outputMimeType"]);e!==void 0&&R!=null&&a(e,["parameters","outputOptions","mimeType"],R);const P=l(t,["outputCompressionQuality"]);e!==void 0&&P!=null&&a(e,["parameters","outputOptions","compressionQuality"],P);const D=l(t,["addWatermark"]);e!==void 0&&D!=null&&a(e,["parameters","addWatermark"],D);const w=l(t,["imageSize"]);e!==void 0&&w!=null&&a(e,["parameters","sampleImageSize"],w);const _=l(t,["enhancePrompt"]);return e!==void 0&&_!=null&&a(e,["parameters","enhancePrompt"],_),n}function jU(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","model"],Te(t,r));const i=l(e,["prompt"]);i!=null&&a(n,["instances[0]","prompt"],i);const o=l(e,["config"]);return o!=null&&a(n,["config"],ZU(o,n)),n}function wn(t){const e={},n=l(t,["gcsUri"]);n!=null&&a(e,["gcsUri"],n);const r=l(t,["imageBytes"]);r!=null&&a(e,["bytesBase64Encoded"],yi(r));const i=l(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function eF(t){const e={},n=l(t,["maskMode"]);n!=null&&a(e,["maskMode"],n);const r=l(t,["segmentationClasses"]);r!=null&&a(e,["maskClasses"],r);const i=l(t,["maskDilation"]);return i!=null&&a(e,["dilation"],i),e}function tF(t){const e={},n=l(t,["controlType"]);n!=null&&a(e,["controlType"],n);const r=l(t,["enableControlImageComputation"]);return r!=null&&a(e,["computeControl"],r),e}function nF(t){const e={},n=l(t,["styleDescription"]);return n!=null&&a(e,["styleDescription"],n),e}function rF(t){const e={},n=l(t,["subjectType"]);n!=null&&a(e,["subjectType"],n);const r=l(t,["subjectDescription"]);return r!=null&&a(e,["subjectDescription"],r),e}function iF(t){const e={},n=l(t,["referenceImage"]);n!=null&&a(e,["referenceImage"],wn(n));const r=l(t,["referenceId"]);r!=null&&a(e,["referenceId"],r);const i=l(t,["referenceType"]);i!=null&&a(e,["referenceType"],i);const o=l(t,["maskImageConfig"]);o!=null&&a(e,["maskImageConfig"],eF(o));const s=l(t,["controlImageConfig"]);s!=null&&a(e,["controlImageConfig"],tF(s));const u=l(t,["styleImageConfig"]);u!=null&&a(e,["styleImageConfig"],nF(u));const c=l(t,["subjectImageConfig"]);return c!=null&&a(e,["subjectImageConfig"],rF(c)),e}function oF(t,e){const n={},r=l(t,["outputGcsUri"]);e!==void 0&&r!=null&&a(e,["parameters","storageUri"],r);const i=l(t,["negativePrompt"]);e!==void 0&&i!=null&&a(e,["parameters","negativePrompt"],i);const o=l(t,["numberOfImages"]);e!==void 0&&o!=null&&a(e,["parameters","sampleCount"],o);const s=l(t,["aspectRatio"]);e!==void 0&&s!=null&&a(e,["parameters","aspectRatio"],s);const u=l(t,["guidanceScale"]);e!==void 0&&u!=null&&a(e,["parameters","guidanceScale"],u);const c=l(t,["seed"]);e!==void 0&&c!=null&&a(e,["parameters","seed"],c);const d=l(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&a(e,["parameters","safetySetting"],d);const h=l(t,["personGeneration"]);e!==void 0&&h!=null&&a(e,["parameters","personGeneration"],h);const p=l(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&a(e,["parameters","includeSafetyAttributes"],p);const g=l(t,["includeRaiReason"]);e!==void 0&&g!=null&&a(e,["parameters","includeRaiReason"],g);const v=l(t,["language"]);e!==void 0&&v!=null&&a(e,["parameters","language"],v);const R=l(t,["outputMimeType"]);e!==void 0&&R!=null&&a(e,["parameters","outputOptions","mimeType"],R);const P=l(t,["outputCompressionQuality"]);e!==void 0&&P!=null&&a(e,["parameters","outputOptions","compressionQuality"],P);const D=l(t,["addWatermark"]);e!==void 0&&D!=null&&a(e,["parameters","addWatermark"],D);const w=l(t,["editMode"]);e!==void 0&&w!=null&&a(e,["parameters","editMode"],w);const _=l(t,["baseSteps"]);return e!==void 0&&_!=null&&a(e,["parameters","editConfig","baseSteps"],_),n}function sF(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","model"],Te(t,r));const i=l(e,["prompt"]);i!=null&&a(n,["instances[0]","prompt"],i);const o=l(e,["referenceImages"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(c=>iF(c))),a(n,["instances[0]","referenceImages"],u)}const s=l(e,["config"]);return s!=null&&a(n,["config"],oF(s,n)),n}function lF(t,e){const n={},r=l(t,["outputGcsUri"]);e!==void 0&&r!=null&&a(e,["parameters","storageUri"],r);const i=l(t,["includeRaiReason"]);e!==void 0&&i!=null&&a(e,["parameters","includeRaiReason"],i);const o=l(t,["outputMimeType"]);e!==void 0&&o!=null&&a(e,["parameters","outputOptions","mimeType"],o);const s=l(t,["outputCompressionQuality"]);e!==void 0&&s!=null&&a(e,["parameters","outputOptions","compressionQuality"],s);const u=l(t,["enhanceInputImage"]);e!==void 0&&u!=null&&a(e,["parameters","upscaleConfig","enhanceInputImage"],u);const c=l(t,["imagePreservationFactor"]);e!==void 0&&c!=null&&a(e,["parameters","upscaleConfig","imagePreservationFactor"],c);const d=l(t,["numberOfImages"]);e!==void 0&&d!=null&&a(e,["parameters","sampleCount"],d);const h=l(t,["mode"]);return e!==void 0&&h!=null&&a(e,["parameters","mode"],h),n}function aF(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","model"],Te(t,r));const i=l(e,["image"]);i!=null&&a(n,["instances[0]","image"],wn(i));const o=l(e,["upscaleFactor"]);o!=null&&a(n,["parameters","upscaleConfig","upscaleFactor"],o);const s=l(e,["config"]);return s!=null&&a(n,["config"],lF(s,n)),n}function uF(t){const e={},n=l(t,["productImage"]);return n!=null&&a(e,["image"],wn(n)),e}function cF(t,e){const n={},r=l(t,["prompt"]);e!==void 0&&r!=null&&a(e,["instances[0]","prompt"],r);const i=l(t,["personImage"]);e!==void 0&&i!=null&&a(e,["instances[0]","personImage","image"],wn(i));const o=l(t,["productImages"]);if(e!==void 0&&o!=null){let s=o;Array.isArray(s)&&(s=s.map(u=>uF(u))),a(e,["instances[0]","productImages"],s)}return n}function dF(t,e){const n={},r=l(t,["numberOfImages"]);e!==void 0&&r!=null&&a(e,["parameters","sampleCount"],r);const i=l(t,["baseSteps"]);e!==void 0&&i!=null&&a(e,["parameters","editConfig","baseSteps"],i);const o=l(t,["outputGcsUri"]);e!==void 0&&o!=null&&a(e,["parameters","storageUri"],o);const s=l(t,["seed"]);e!==void 0&&s!=null&&a(e,["parameters","seed"],s);const u=l(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&a(e,["parameters","safetySetting"],u);const c=l(t,["personGeneration"]);e!==void 0&&c!=null&&a(e,["parameters","personGeneration"],c);const d=l(t,["addWatermark"]);e!==void 0&&d!=null&&a(e,["parameters","addWatermark"],d);const h=l(t,["outputMimeType"]);e!==void 0&&h!=null&&a(e,["parameters","outputOptions","mimeType"],h);const p=l(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&a(e,["parameters","outputOptions","compressionQuality"],p);const g=l(t,["enhancePrompt"]);return e!==void 0&&g!=null&&a(e,["parameters","enhancePrompt"],g),n}function fF(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","model"],Te(t,r));const i=l(e,["source"]);i!=null&&a(n,["config"],cF(i,n));const o=l(e,["config"]);return o!=null&&a(n,["config"],dF(o,n)),n}function hF(t){const e={},n=l(t,["image"]);return n!=null&&a(e,["image"],wn(n)),e}function pF(t,e){const n={},r=l(t,["prompt"]);e!==void 0&&r!=null&&a(e,["instances[0]","prompt"],r);const i=l(t,["image"]);e!==void 0&&i!=null&&a(e,["instances[0]","image"],wn(i));const o=l(t,["scribbleImage"]);return e!==void 0&&o!=null&&a(e,["instances[0]","scribble"],hF(o)),n}function mF(t,e){const n={},r=l(t,["mode"]);e!==void 0&&r!=null&&a(e,["parameters","mode"],r);const i=l(t,["maxPredictions"]);e!==void 0&&i!=null&&a(e,["parameters","maxPredictions"],i);const o=l(t,["confidenceThreshold"]);e!==void 0&&o!=null&&a(e,["parameters","confidenceThreshold"],o);const s=l(t,["maskDilation"]);e!==void 0&&s!=null&&a(e,["parameters","maskDilation"],s);const u=l(t,["binaryColorThreshold"]);return e!==void 0&&u!=null&&a(e,["parameters","binaryColorThreshold"],u),n}function gF(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","model"],Te(t,r));const i=l(e,["source"]);i!=null&&a(n,["config"],pF(i,n));const o=l(e,["config"]);return o!=null&&a(n,["config"],mF(o,n)),n}function yF(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","name"],Te(t,r));const i=l(e,["config"]);return i!=null&&a(n,["config"],i),n}function vF(t,e,n){const r={},i=l(e,["pageSize"]);n!==void 0&&i!=null&&a(n,["_query","pageSize"],i);const o=l(e,["pageToken"]);n!==void 0&&o!=null&&a(n,["_query","pageToken"],o);const s=l(e,["filter"]);n!==void 0&&s!=null&&a(n,["_query","filter"],s);const u=l(e,["queryBase"]);return n!==void 0&&u!=null&&a(n,["_url","models_url"],q0(t,u)),r}function _F(t,e){const n={},r=l(e,["config"]);return r!=null&&a(n,["config"],vF(t,r,n)),n}function TF(t,e){const n={},r=l(t,["displayName"]);e!==void 0&&r!=null&&a(e,["displayName"],r);const i=l(t,["description"]);e!==void 0&&i!=null&&a(e,["description"],i);const o=l(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&a(e,["defaultCheckpointId"],o),n}function EF(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","model"],Te(t,r));const i=l(e,["config"]);return i!=null&&a(n,["config"],TF(i,n)),n}function CF(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","name"],Te(t,r));const i=l(e,["config"]);return i!=null&&a(n,["config"],i),n}function IF(t,e){const n={},r=l(t,["systemInstruction"]);e!==void 0&&r!=null&&a(e,["systemInstruction"],xo(pt(r)));const i=l(t,["tools"]);if(e!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(u=>rI(u))),a(e,["tools"],s)}const o=l(t,["generationConfig"]);return e!==void 0&&o!=null&&a(e,["generationConfig"],o),n}function SF(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","model"],Te(t,r));const i=l(e,["contents"]);if(i!=null){let s=Jt(i);Array.isArray(s)&&(s=s.map(u=>xo(u))),a(n,["contents"],s)}const o=l(e,["config"]);return o!=null&&a(n,["config"],IF(o,n)),n}function wF(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","model"],Te(t,r));const i=l(e,["contents"]);if(i!=null){let s=Jt(i);Array.isArray(s)&&(s=s.map(u=>xo(u))),a(n,["contents"],s)}const o=l(e,["config"]);return o!=null&&a(n,["config"],o),n}function iI(t){const e={},n=l(t,["uri"]);n!=null&&a(e,["gcsUri"],n);const r=l(t,["videoBytes"]);r!=null&&a(e,["bytesBase64Encoded"],yi(r));const i=l(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function AF(t,e){const n={},r=l(t,["prompt"]);e!==void 0&&r!=null&&a(e,["instances[0]","prompt"],r);const i=l(t,["image"]);e!==void 0&&i!=null&&a(e,["instances[0]","image"],wn(i));const o=l(t,["video"]);return e!==void 0&&o!=null&&a(e,["instances[0]","video"],iI(o)),n}function RF(t){const e={},n=l(t,["image"]);n!=null&&a(e,["image"],wn(n));const r=l(t,["referenceType"]);return r!=null&&a(e,["referenceType"],r),e}function xF(t,e){const n={},r=l(t,["numberOfVideos"]);e!==void 0&&r!=null&&a(e,["parameters","sampleCount"],r);const i=l(t,["outputGcsUri"]);e!==void 0&&i!=null&&a(e,["parameters","storageUri"],i);const o=l(t,["fps"]);e!==void 0&&o!=null&&a(e,["parameters","fps"],o);const s=l(t,["durationSeconds"]);e!==void 0&&s!=null&&a(e,["parameters","durationSeconds"],s);const u=l(t,["seed"]);e!==void 0&&u!=null&&a(e,["parameters","seed"],u);const c=l(t,["aspectRatio"]);e!==void 0&&c!=null&&a(e,["parameters","aspectRatio"],c);const d=l(t,["resolution"]);e!==void 0&&d!=null&&a(e,["parameters","resolution"],d);const h=l(t,["personGeneration"]);e!==void 0&&h!=null&&a(e,["parameters","personGeneration"],h);const p=l(t,["pubsubTopic"]);e!==void 0&&p!=null&&a(e,["parameters","pubsubTopic"],p);const g=l(t,["negativePrompt"]);e!==void 0&&g!=null&&a(e,["parameters","negativePrompt"],g);const v=l(t,["enhancePrompt"]);e!==void 0&&v!=null&&a(e,["parameters","enhancePrompt"],v);const R=l(t,["generateAudio"]);e!==void 0&&R!=null&&a(e,["parameters","generateAudio"],R);const P=l(t,["lastFrame"]);e!==void 0&&P!=null&&a(e,["instances[0]","lastFrame"],wn(P));const D=l(t,["referenceImages"]);if(e!==void 0&&D!=null){let _=D;Array.isArray(_)&&(_=_.map(S=>RF(S))),a(e,["instances[0]","referenceImages"],_)}const w=l(t,["compressionQuality"]);return e!==void 0&&w!=null&&a(e,["parameters","compressionQuality"],w),n}function PF(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["_url","model"],Te(t,r));const i=l(e,["prompt"]);i!=null&&a(n,["instances[0]","prompt"],i);const o=l(e,["image"]);o!=null&&a(n,["instances[0]","image"],wn(o));const s=l(e,["video"]);s!=null&&a(n,["instances[0]","video"],iI(s));const u=l(e,["source"]);u!=null&&a(n,["config"],AF(u,n));const c=l(e,["config"]);return c!=null&&a(n,["config"],xF(c,n)),n}function kF(t){const e={},n=l(t,["fps"]);n!=null&&a(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&a(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&a(e,["startOffset"],i),e}function NF(t){const e={},n=l(t,["data"]);n!=null&&a(e,["data"],n);const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function MF(t){const e={},n=l(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function DF(t){const e={},n=l(t,["videoMetadata"]);n!=null&&a(e,["videoMetadata"],kF(n));const r=l(t,["thought"]);r!=null&&a(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&a(e,["inlineData"],NF(i));const o=l(t,["fileData"]);o!=null&&a(e,["fileData"],MF(o));const s=l(t,["thoughtSignature"]);s!=null&&a(e,["thoughtSignature"],s);const u=l(t,["codeExecutionResult"]);u!=null&&a(e,["codeExecutionResult"],u);const c=l(t,["executableCode"]);c!=null&&a(e,["executableCode"],c);const d=l(t,["functionCall"]);d!=null&&a(e,["functionCall"],d);const h=l(t,["functionResponse"]);h!=null&&a(e,["functionResponse"],h);const p=l(t,["text"]);return p!=null&&a(e,["text"],p),e}function VF(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>DF(o))),a(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&a(e,["role"],r),e}function LF(t){const e={},n=l(t,["citationSources"]);return n!=null&&a(e,["citations"],n),e}function UF(t){const e={},n=l(t,["retrievedUrl"]);n!=null&&a(e,["retrievedUrl"],n);const r=l(t,["urlRetrievalStatus"]);return r!=null&&a(e,["urlRetrievalStatus"],r),e}function FF(t){const e={},n=l(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>UF(i))),a(e,["urlMetadata"],r)}return e}function bF(t){const e={},n=l(t,["content"]);n!=null&&a(e,["content"],VF(n));const r=l(t,["citationMetadata"]);r!=null&&a(e,["citationMetadata"],LF(r));const i=l(t,["tokenCount"]);i!=null&&a(e,["tokenCount"],i);const o=l(t,["finishReason"]);o!=null&&a(e,["finishReason"],o);const s=l(t,["urlContextMetadata"]);s!=null&&a(e,["urlContextMetadata"],FF(s));const u=l(t,["avgLogprobs"]);u!=null&&a(e,["avgLogprobs"],u);const c=l(t,["groundingMetadata"]);c!=null&&a(e,["groundingMetadata"],c);const d=l(t,["index"]);d!=null&&a(e,["index"],d);const h=l(t,["logprobsResult"]);h!=null&&a(e,["logprobsResult"],h);const p=l(t,["safetyRatings"]);return p!=null&&a(e,["safetyRatings"],p),e}function Wv(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>bF(d))),a(e,["candidates"],c)}const i=l(t,["modelVersion"]);i!=null&&a(e,["modelVersion"],i);const o=l(t,["promptFeedback"]);o!=null&&a(e,["promptFeedback"],o);const s=l(t,["responseId"]);s!=null&&a(e,["responseId"],s);const u=l(t,["usageMetadata"]);return u!=null&&a(e,["usageMetadata"],u),e}function OF(t){const e={},n=l(t,["values"]);return n!=null&&a(e,["values"],n),e}function BF(){return{}}function qF(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>OF(s))),a(e,["embeddings"],o)}return l(t,["metadata"])!=null&&a(e,["metadata"],BF()),e}function $F(t){const e={},n=l(t,["bytesBase64Encoded"]);n!=null&&a(e,["imageBytes"],yi(n));const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function oI(t){const e={},n=l(t,["safetyAttributes","categories"]);n!=null&&a(e,["categories"],n);const r=l(t,["safetyAttributes","scores"]);r!=null&&a(e,["scores"],r);const i=l(t,["contentType"]);return i!=null&&a(e,["contentType"],i),e}function GF(t){const e={},n=l(t,["_self"]);n!=null&&a(e,["image"],$F(n));const r=l(t,["raiFilteredReason"]);r!=null&&a(e,["raiFilteredReason"],r);const i=l(t,["_self"]);return i!=null&&a(e,["safetyAttributes"],oI(i)),e}function HF(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>GF(s))),a(e,["generatedImages"],o)}const i=l(t,["positivePromptSafetyAttributes"]);return i!=null&&a(e,["positivePromptSafetyAttributes"],oI(i)),e}function zF(t){const e={},n=l(t,["baseModel"]);n!=null&&a(e,["baseModel"],n);const r=l(t,["createTime"]);r!=null&&a(e,["createTime"],r);const i=l(t,["updateTime"]);return i!=null&&a(e,["updateTime"],i),e}function Mf(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const r=l(t,["displayName"]);r!=null&&a(e,["displayName"],r);const i=l(t,["description"]);i!=null&&a(e,["description"],i);const o=l(t,["version"]);o!=null&&a(e,["version"],o);const s=l(t,["_self"]);s!=null&&a(e,["tunedModelInfo"],zF(s));const u=l(t,["inputTokenLimit"]);u!=null&&a(e,["inputTokenLimit"],u);const c=l(t,["outputTokenLimit"]);c!=null&&a(e,["outputTokenLimit"],c);const d=l(t,["supportedGenerationMethods"]);return d!=null&&a(e,["supportedActions"],d),e}function WF(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&a(e,["nextPageToken"],r);const i=l(t,["_self"]);if(i!=null){let o=$0(i);Array.isArray(o)&&(o=o.map(s=>Mf(s))),a(e,["models"],o)}return e}function KF(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function JF(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["totalTokens"]);r!=null&&a(e,["totalTokens"],r);const i=l(t,["cachedContentTokenCount"]);return i!=null&&a(e,["cachedContentTokenCount"],i),e}function QF(t){const e={},n=l(t,["video","uri"]);n!=null&&a(e,["uri"],n);const r=l(t,["video","encodedVideo"]);r!=null&&a(e,["videoBytes"],yi(r));const i=l(t,["encoding"]);return i!=null&&a(e,["mimeType"],i),e}function YF(t){const e={},n=l(t,["_self"]);return n!=null&&a(e,["video"],QF(n)),e}function XF(t){const e={},n=l(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>YF(s))),a(e,["generatedVideos"],o)}const r=l(t,["raiMediaFilteredCount"]);r!=null&&a(e,["raiMediaFilteredCount"],r);const i=l(t,["raiMediaFilteredReasons"]);return i!=null&&a(e,["raiMediaFilteredReasons"],i),e}function ZF(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const r=l(t,["metadata"]);r!=null&&a(e,["metadata"],r);const i=l(t,["done"]);i!=null&&a(e,["done"],i);const o=l(t,["error"]);o!=null&&a(e,["error"],o);const s=l(t,["response","generateVideoResponse"]);return s!=null&&a(e,["response"],XF(s)),e}function jF(t){const e={},n=l(t,["fps"]);n!=null&&a(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&a(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&a(e,["startOffset"],i),e}function e4(t){const e={},n=l(t,["displayName"]);n!=null&&a(e,["displayName"],n);const r=l(t,["data"]);r!=null&&a(e,["data"],r);const i=l(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function t4(t){const e={},n=l(t,["displayName"]);n!=null&&a(e,["displayName"],n);const r=l(t,["fileUri"]);r!=null&&a(e,["fileUri"],r);const i=l(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function n4(t){const e={},n=l(t,["videoMetadata"]);n!=null&&a(e,["videoMetadata"],jF(n));const r=l(t,["thought"]);r!=null&&a(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&a(e,["inlineData"],e4(i));const o=l(t,["fileData"]);o!=null&&a(e,["fileData"],t4(o));const s=l(t,["thoughtSignature"]);s!=null&&a(e,["thoughtSignature"],s);const u=l(t,["codeExecutionResult"]);u!=null&&a(e,["codeExecutionResult"],u);const c=l(t,["executableCode"]);c!=null&&a(e,["executableCode"],c);const d=l(t,["functionCall"]);d!=null&&a(e,["functionCall"],d);const h=l(t,["functionResponse"]);h!=null&&a(e,["functionResponse"],h);const p=l(t,["text"]);return p!=null&&a(e,["text"],p),e}function r4(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>n4(o))),a(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&a(e,["role"],r),e}function i4(t){const e={},n=l(t,["citations"]);return n!=null&&a(e,["citations"],n),e}function o4(t){const e={},n=l(t,["retrievedUrl"]);n!=null&&a(e,["retrievedUrl"],n);const r=l(t,["urlRetrievalStatus"]);return r!=null&&a(e,["urlRetrievalStatus"],r),e}function s4(t){const e={},n=l(t,["urlMetadata"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>o4(i))),a(e,["urlMetadata"],r)}return e}function l4(t){const e={},n=l(t,["content"]);n!=null&&a(e,["content"],r4(n));const r=l(t,["citationMetadata"]);r!=null&&a(e,["citationMetadata"],i4(r));const i=l(t,["finishMessage"]);i!=null&&a(e,["finishMessage"],i);const o=l(t,["finishReason"]);o!=null&&a(e,["finishReason"],o);const s=l(t,["urlContextMetadata"]);s!=null&&a(e,["urlContextMetadata"],s4(s));const u=l(t,["avgLogprobs"]);u!=null&&a(e,["avgLogprobs"],u);const c=l(t,["groundingMetadata"]);c!=null&&a(e,["groundingMetadata"],c);const d=l(t,["index"]);d!=null&&a(e,["index"],d);const h=l(t,["logprobsResult"]);h!=null&&a(e,["logprobsResult"],h);const p=l(t,["safetyRatings"]);return p!=null&&a(e,["safetyRatings"],p),e}function Kv(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["candidates"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(h=>l4(h))),a(e,["candidates"],d)}const i=l(t,["createTime"]);i!=null&&a(e,["createTime"],i);const o=l(t,["modelVersion"]);o!=null&&a(e,["modelVersion"],o);const s=l(t,["promptFeedback"]);s!=null&&a(e,["promptFeedback"],s);const u=l(t,["responseId"]);u!=null&&a(e,["responseId"],u);const c=l(t,["usageMetadata"]);return c!=null&&a(e,["usageMetadata"],c),e}function a4(t){const e={},n=l(t,["truncated"]);n!=null&&a(e,["truncated"],n);const r=l(t,["token_count"]);return r!=null&&a(e,["tokenCount"],r),e}function u4(t){const e={},n=l(t,["values"]);n!=null&&a(e,["values"],n);const r=l(t,["statistics"]);return r!=null&&a(e,["statistics"],a4(r)),e}function c4(t){const e={},n=l(t,["billableCharacterCount"]);return n!=null&&a(e,["billableCharacterCount"],n),e}function d4(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["predictions[]","embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>u4(s))),a(e,["embeddings"],o)}const i=l(t,["metadata"]);return i!=null&&a(e,["metadata"],c4(i)),e}function sI(t){const e={},n=l(t,["gcsUri"]);n!=null&&a(e,["gcsUri"],n);const r=l(t,["bytesBase64Encoded"]);r!=null&&a(e,["imageBytes"],yi(r));const i=l(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function lI(t){const e={},n=l(t,["safetyAttributes","categories"]);n!=null&&a(e,["categories"],n);const r=l(t,["safetyAttributes","scores"]);r!=null&&a(e,["scores"],r);const i=l(t,["contentType"]);return i!=null&&a(e,["contentType"],i),e}function tc(t){const e={},n=l(t,["_self"]);n!=null&&a(e,["image"],sI(n));const r=l(t,["raiFilteredReason"]);r!=null&&a(e,["raiFilteredReason"],r);const i=l(t,["_self"]);i!=null&&a(e,["safetyAttributes"],lI(i));const o=l(t,["prompt"]);return o!=null&&a(e,["enhancedPrompt"],o),e}function f4(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>tc(s))),a(e,["generatedImages"],o)}const i=l(t,["positivePromptSafetyAttributes"]);return i!=null&&a(e,["positivePromptSafetyAttributes"],lI(i)),e}function h4(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>tc(o))),a(e,["generatedImages"],i)}return e}function p4(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>tc(o))),a(e,["generatedImages"],i)}return e}function m4(t){const e={},n=l(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>tc(i))),a(e,["generatedImages"],r)}return e}function g4(t){const e={},n=l(t,["label"]);n!=null&&a(e,["label"],n);const r=l(t,["score"]);return r!=null&&a(e,["score"],r),e}function y4(t){const e={},n=l(t,["_self"]);n!=null&&a(e,["mask"],sI(n));const r=l(t,["labels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>g4(o))),a(e,["labels"],i)}return e}function v4(t){const e={},n=l(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>y4(i))),a(e,["generatedMasks"],r)}return e}function _4(t){const e={},n=l(t,["endpoint"]);n!=null&&a(e,["name"],n);const r=l(t,["deployedModelId"]);return r!=null&&a(e,["deployedModelId"],r),e}function T4(t){const e={},n=l(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&a(e,["baseModel"],n);const r=l(t,["createTime"]);r!=null&&a(e,["createTime"],r);const i=l(t,["updateTime"]);return i!=null&&a(e,["updateTime"],i),e}function E4(t){const e={},n=l(t,["checkpointId"]);n!=null&&a(e,["checkpointId"],n);const r=l(t,["epoch"]);r!=null&&a(e,["epoch"],r);const i=l(t,["step"]);return i!=null&&a(e,["step"],i),e}function Df(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const r=l(t,["displayName"]);r!=null&&a(e,["displayName"],r);const i=l(t,["description"]);i!=null&&a(e,["description"],i);const o=l(t,["versionId"]);o!=null&&a(e,["version"],o);const s=l(t,["deployedModels"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(g=>_4(g))),a(e,["endpoints"],p)}const u=l(t,["labels"]);u!=null&&a(e,["labels"],u);const c=l(t,["_self"]);c!=null&&a(e,["tunedModelInfo"],T4(c));const d=l(t,["defaultCheckpointId"]);d!=null&&a(e,["defaultCheckpointId"],d);const h=l(t,["checkpoints"]);if(h!=null){let p=h;Array.isArray(p)&&(p=p.map(g=>E4(g))),a(e,["checkpoints"],p)}return e}function C4(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&a(e,["nextPageToken"],r);const i=l(t,["_self"]);if(i!=null){let o=$0(i);Array.isArray(o)&&(o=o.map(s=>Df(s))),a(e,["models"],o)}return e}function I4(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function S4(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["totalTokens"]);return r!=null&&a(e,["totalTokens"],r),e}function w4(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["tokensInfo"]);return r!=null&&a(e,["tokensInfo"],r),e}function A4(t){const e={},n=l(t,["gcsUri"]);n!=null&&a(e,["uri"],n);const r=l(t,["bytesBase64Encoded"]);r!=null&&a(e,["videoBytes"],yi(r));const i=l(t,["mimeType"]);return i!=null&&a(e,["mimeType"],i),e}function R4(t){const e={},n=l(t,["_self"]);return n!=null&&a(e,["video"],A4(n)),e}function x4(t){const e={},n=l(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>R4(s))),a(e,["generatedVideos"],o)}const r=l(t,["raiMediaFilteredCount"]);r!=null&&a(e,["raiMediaFilteredCount"],r);const i=l(t,["raiMediaFilteredReasons"]);return i!=null&&a(e,["raiMediaFilteredReasons"],i),e}function P4(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const r=l(t,["metadata"]);r!=null&&a(e,["metadata"],r);const i=l(t,["done"]);i!=null&&a(e,["done"],i);const o=l(t,["error"]);o!=null&&a(e,["error"],o);const s=l(t,["response"]);return s!=null&&a(e,["response"],x4(s)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const k4="Content-Type",N4="X-Server-Timeout",M4="User-Agent",Vf="x-goog-api-client",D4="1.16.0",V4=`google-genai-sdk/${D4}`,L4="v1beta1",U4="v1beta",Jv=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class F4{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:L4,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:U4,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[s,u]of Object.entries(e.queryParams))i.searchParams.append(s,String(u));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,e.abortSignal),this.unaryApiCall(i,o,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[i,o]of Object.entries(n))typeof o=="object"?r[i]=Object.assign(Object.assign({},r[i]),o):o!==void 0&&(r[i]=o);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,e.abortSignal),this.streamApiCall(i,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r){if(n&&n.timeout||r){const i=new AbortController,o=i.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const s=setTimeout(()=>i.abort(),n.timeout);s&&typeof s.unref=="function"&&s.unref()}r&&r.addEventListener("abort",()=>{i.abort()}),e.signal=o}return n&&n.extraBody!==null&&b4(e,n.extraBody),e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await Qv(i),new Rf(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await Qv(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){var n;return Zi(this,arguments,function*(){const i=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),o=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let s="";for(;;){const{done:u,value:c}=yield xe(i.read());if(u){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const d=o.decode(c,{stream:!0});try{const p=JSON.parse(d);if("error"in p){const g=JSON.parse(JSON.stringify(p.error)),v=g.status,R=g.code,P=`got status: ${v}. ${JSON.stringify(p)}`;if(R>=400&&R<600)throw new ju({message:P,status:R})}}catch(p){if(p.name==="ApiError")throw p}s+=d;let h=s.match(Jv);for(;h;){const p=h[1];try{const g=new Response(p,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield xe(new Rf(g)),s=s.slice(h[0].length),h=s.match(Jv)}catch(g){throw new Error(`exception parsing stream chunk ${p}. ${g}`)}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=V4+" "+this.clientOptions.userAgentExtra;return e[M4]=n,e[Vf]=n,e[k4]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[r,i]of Object.entries(e.headers))n.append(r,i);e.timeout&&e.timeout>0&&n.append(N4,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var r;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const o=this.clientOptions.uploader,s=await o.stat(e);i.sizeBytes=String(s.size);const u=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:s.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=u;const c=await this.fetchUploadUrl(i,n);return o.upload(e,c,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var r;let i={};n!=null&&n.httpOptions?i=n.httpOptions:i={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const o={file:e},s=await this.request({path:Y("upload/v1beta/files",o._url),body:JSON.stringify(o),httpMethod:"POST",httpOptions:i});if(!s||!(s!=null&&s.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const u=(r=s==null?void 0:s.headers)===null||r===void 0?void 0:r["x-goog-upload-url"];if(u===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return u}}async function Qv(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const i=JSON.stringify(r);throw n>=400&&n<600?new ju({message:i,status:n}):new Error(i)}}function b4(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const o=JSON.parse(t.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(o,s){const u=Object.assign({},o);for(const c in s)if(Object.prototype.hasOwnProperty.call(s,c)){const d=s[c],h=u[c];d&&typeof d=="object"&&!Array.isArray(d)&&h&&typeof h=="object"&&!Array.isArray(h)?u[c]=r(h,d):(h&&d&&typeof h!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof h}, New type: ${typeof d}. Overwriting.`),u[c]=d)}return u}const i=r(n,e);t.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const O4="mcp_used/unknown";let B4=!1;function aI(t){for(const e of t)if(q4(e)||typeof e=="object"&&"inputSchema"in e)return!0;return B4}function uI(t){var e;const n=(e=t[Vf])!==null&&e!==void 0?e:"";t[Vf]=(n+` ${O4}`).trimStart()}function q4(t){return t!==null&&typeof t=="object"&&t instanceof Ep}function $4(t,e=100){return Zi(this,arguments,function*(){let r,i=0;for(;i<e;){const o=yield xe(t.listTools({cursor:r}));for(const s of o.tools)yield yield xe(s),i++;if(!o.nextCursor)break;r=o.nextCursor}})}class Ep{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Ep(e,n)}async initialize(){var e,n,r,i;if(this.mcpTools.length>0)return;const o={},s=[];for(const h of this.mcpClients)try{for(var u=!0,c=(n=void 0,ws($4(h))),d;d=await c.next(),e=d.done,!e;u=!0){i=d.value,u=!1;const p=i;s.push(p);const g=p.name;if(o[g])throw new Error(`Duplicate function name ${g} found in MCP tools. Please ensure function names are unique.`);o[g]=h}}catch(p){n={error:p}}finally{try{!u&&!e&&(r=c.return)&&await r.call(c)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),_D(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const s=await i.callTool({name:r.name,arguments:r.args},void 0,o);n.push({functionResponse:{name:r.name,response:s.isError?{error:s}:s}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function G4(t,e,n){const r=new dD;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data);const o=I2(i);Object.assign(r,o),e(r)}class H4{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),s=K4(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),c=`${i}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${u}`;let d=()=>{};const h=new Promise(S=>{d=S}),p=e.callbacks,g=function(){d({})},v=this.apiClient,R={onopen:g,onmessage:S=>{G4(v,p.onmessage,S)},onerror:(n=p==null?void 0:p.onerror)!==null&&n!==void 0?n:function(S){},onclose:(r=p==null?void 0:p.onclose)!==null&&r!==void 0?r:function(S){}},P=this.webSocketFactory.create(c,W4(s),R);P.connect(),await h;const D=Te(this.apiClient,e.model),w=j0({model:D}),_=Nf({setup:w});return P.send(JSON.stringify(_)),new z4(P,this.apiClient)}}class z4{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=TL(e),r=eI(n);this.conn.send(JSON.stringify({clientContent:r}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=EL(e),r=Nf(n);this.conn.send(JSON.stringify(r))}sendPlaybackControl(e){const n=Nf({playbackControl:e});this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Bi.PLAY)}pause(){this.sendPlaybackControl(Bi.PAUSE)}stop(){this.sendPlaybackControl(Bi.STOP)}resetContext(){this.sendPlaybackControl(Bi.RESET_CONTEXT)}close(){this.conn.close()}}function W4(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function K4(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const J4="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Q4(t,e,n){const r=new cD;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const o=JSON.parse(i);if(t.isVertexAI()){const s=F2(o);Object.assign(r,s)}else{const s=p2(o);Object.assign(r,s)}e(r)}class Y4{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new H4(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,i,o,s,u;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let h;const p=this.apiClient.getHeaders();e.config&&e.config.tools&&aI(e.config.tools)&&uI(p);const g=eb(p);if(this.apiClient.isVertexAI())h=`${c}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(g);else{const I=this.apiClient.getApiKey();let x="BidiGenerateContent",N="key";I!=null&&I.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),x="BidiGenerateContentConstrained",N="access_token"),h=`${c}/ws/google.ai.generativelanguage.${d}.GenerativeService.${x}?${N}=${I}`}let v=()=>{};const R=new Promise(I=>{v=I}),P=e.callbacks,D=function(){var I;(I=P==null?void 0:P.onopen)===null||I===void 0||I.call(P),v({})},w=this.apiClient,_={onopen:D,onmessage:I=>{Q4(w,P.onmessage,I)},onerror:(n=P==null?void 0:P.onerror)!==null&&n!==void 0?n:function(I){},onclose:(r=P==null?void 0:P.onclose)!==null&&r!==void 0?r:function(I){}},S=this.webSocketFactory.create(h,j4(g),_);S.connect(),await R;let V=Te(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&V.startsWith("publishers/")){const I=this.apiClient.getProject(),x=this.apiClient.getLocation();V=`projects/${I}/locations/${x}/`+V}let F={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[hu.AUDIO]}:e.config.responseModalities=[hu.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const b=(u=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&u!==void 0?u:[],A=[];for(const I of b)if(this.isCallableTool(I)){const x=I;A.push(await x.tool())}else A.push(I);A.length>0&&(e.config.tools=A);const E={model:V,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?F=QL(this.apiClient,E):F=gL(this.apiClient,E),delete F.config,S.send(JSON.stringify(F)),new Z4(S,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const X4={turnComplete:!0};class Z4{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=Jt(n.turns),e.isVertexAI()?r=r.map(i=>xo(i)):r=r.map(i=>ec(i))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const o of r){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(J4)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},X4),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:ZL(e)}:n={realtimeInput:_L(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function j4(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function eb(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Yv=10;function Xv(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const s of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(ji(s)){i=!0;break}if(!i)return!0;const o=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function ji(t){return"callTool"in t&&typeof t.callTool=="function"}function tb(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>ji(i)))!==null&&r!==void 0?r:!1}function nb(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>!ji(i)))!==null&&r!==void 0?r:!1}function Zv(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rb extends gi{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,i,o,s,u;const c=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!tb(n)||Xv(n.config))return await this.generateContentInternal(c);if(nb(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let d,h;const p=Jt(c.contents),g=(o=(i=(r=c.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:Yv;let v=0;for(;v<g&&(d=await this.generateContentInternal(c),!(!d.functionCalls||d.functionCalls.length===0));){const R=d.candidates[0].content,P=[];for(const D of(u=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&u!==void 0?u:[])if(ji(D)){const _=await D.callTool(d.functionCalls);P.push(..._)}v++,h={role:"user",parts:P},c.contents=Jt(c.contents),c.contents.push(R),c.contents.push(h),Zv(c.config)&&(p.push(R),p.push(h))}return Zv(c.config)&&(d.automaticFunctionCallingHistory=p),d},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),Xv(n.config)){const r=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(r)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let o;const s=[];if(r!=null&&r.generatedImages)for(const c of r.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((i=c==null?void 0:c.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?o=c==null?void 0:c.safetyAttributes:s.push(c);let u;return o?u={generatedImages:s,positivePromptSafetyAttributes:o,sdkHttpResponse:r.sdkHttpResponse}:u={generatedImages:s,sdkHttpResponse:r.sdkHttpResponse},u}),this.list=async n=>{var r;const s={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((r=s.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new pl(di.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(s),s)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>{if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,i;const o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;const s=await Promise.all(o.map(async c=>ji(c)?await c.tool():c)),u={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:s})};if(u.config.tools=s,e.config&&e.config.tools&&aI(e.config.tools)){const c=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let d=Object.assign({},c);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),uI(d),u.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:d})}return u}async initAfcToolsMap(e){var n,r,i;const o=new Map;for(const s of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(ji(s)){const u=s,c=await u.tool();for(const d of(i=c.functionDeclarations)!==null&&i!==void 0?i:[]){if(!d.name)throw new Error("Function declaration name is required.");if(o.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);o.set(d.name,u)}}return o}async processAfcStream(e){var n,r,i;const o=(i=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:Yv;let s=!1,u=0;const c=await this.initAfcToolsMap(e);return function(d,h,p){var g,v;return Zi(this,arguments,function*(){for(var R,P,D,w;u<o;){s&&(u++,s=!1);const F=yield xe(d.processParamsMaybeAddMcpUsage(p)),b=yield xe(d.generateContentStreamInternal(F)),A=[],E=[];try{for(var _=!0,S=(P=void 0,ws(b)),V;V=yield xe(S.next()),R=V.done,!R;_=!0){w=V.value,_=!1;const I=w;if(yield yield xe(I),I.candidates&&(!((g=I.candidates[0])===null||g===void 0)&&g.content)){E.push(I.candidates[0].content);for(const x of(v=I.candidates[0].content.parts)!==null&&v!==void 0?v:[])if(u<o&&x.functionCall){if(!x.functionCall.name)throw new Error("Function call name was not returned by the model.");if(h.has(x.functionCall.name)){const N=yield xe(h.get(x.functionCall.name).callTool([x.functionCall]));A.push(...N)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${h.keys()}, mising tool: ${x.functionCall.name}`)}}}}catch(I){P={error:I}}finally{try{!_&&!R&&(D=S.return)&&(yield xe(D.call(S)))}finally{if(P)throw P.error}}if(A.length>0){s=!0;const I=new ts;I.candidates=[{content:{role:"user",parts:A}}],yield yield xe(I);const x=[];x.push(...E),x.push({role:"user",parts:A});const N=Jt(p.contents).concat(x);p.contents=N}else break}})}(this,c,e)}async generateContentInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=zv(this.apiClient,e);return u=Y("{model}:generateContent",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>{const p=Kv(h),g=new ts;return Object.assign(g,p),g})}else{const d=Hv(this.apiClient,e);return u=Y("{model}:generateContent",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>{const p=Wv(h),g=new ts;return Object.assign(g,p),g})}}async generateContentStreamInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=zv(this.apiClient,e);return u=Y("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.requestStream({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),s.then(function(p){return Zi(this,arguments,function*(){var g,v,R,P;try{for(var D=!0,w=ws(p),_;_=yield xe(w.next()),g=_.done,!g;D=!0){P=_.value,D=!1;const S=P,V=Kv(yield xe(S.json()));V.sdkHttpResponse={headers:S.headers};const F=new ts;Object.assign(F,V),yield yield xe(F)}}catch(S){v={error:S}}finally{try{!D&&!g&&(R=w.return)&&(yield xe(R.call(w)))}finally{if(v)throw v.error}}})})}else{const d=Hv(this.apiClient,e);return u=Y("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.requestStream({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),s.then(function(p){return Zi(this,arguments,function*(){var g,v,R,P;try{for(var D=!0,w=ws(p),_;_=yield xe(w.next()),g=_.done,!g;D=!0){P=_.value,D=!1;const S=P,V=Wv(yield xe(S.json()));V.sdkHttpResponse={headers:S.headers};const F=new ts;Object.assign(F,V),yield yield xe(F)}}catch(S){v={error:S}}finally{try{!D&&!g&&(R=w.return)&&(yield xe(R.call(w)))}finally{if(v)throw v.error}}})})}}async embedContent(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=XU(this.apiClient,e);return u=Y("{model}:predict",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>{const p=d4(h),g=new Cv;return Object.assign(g,p),g})}else{const d=uU(this.apiClient,e);return u=Y("{model}:batchEmbedContents",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>{const p=qF(h),g=new Cv;return Object.assign(g,p),g})}}async generateImagesInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=jU(this.apiClient,e);return u=Y("{model}:predict",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>{const p=f4(h),g=new Iv;return Object.assign(g,p),g})}else{const d=dU(this.apiClient,e);return u=Y("{model}:predict",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>{const p=HF(h),g=new Iv;return Object.assign(g,p),g})}}async editImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const u=sF(this.apiClient,e);return o=Y("{model}:predict",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>{const d=h4(c),h=new nD;return Object.assign(h,d),h})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const u=aF(this.apiClient,e);return o=Y("{model}:predict",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>{const d=p4(c),h=new rD;return Object.assign(h,d),h})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const u=fF(this.apiClient,e);return o=Y("{model}:predict",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const d=m4(c),h=new iD;return Object.assign(h,d),h})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const u=gF(this.apiClient,e);return o=Y("{model}:predict",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const d=v4(c),h=new oD;return Object.assign(h,d),h})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=yF(this.apiClient,e);return u=Y("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>Df(h))}else{const d=fU(this.apiClient,e);return u=Y("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>Mf(h))}}async listInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=_F(this.apiClient,e);return u=Y("{models_url}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>{const p=C4(h),g=new Sv;return Object.assign(g,p),g})}else{const d=pU(this.apiClient,e);return u=Y("{models_url}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>{const p=WF(h),g=new Sv;return Object.assign(g,p),g})}}async update(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=EF(this.apiClient,e);return u=Y("{model}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>Df(h))}else{const d=gU(this.apiClient,e);return u=Y("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>Mf(h))}}async delete(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=CF(this.apiClient,e);return u=Y("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>{const p=I4(h),g=new wv;return Object.assign(g,p),g})}else{const d=yU(this.apiClient,e);return u=Y("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>{const p=KF(h),g=new wv;return Object.assign(g,p),g})}}async countTokens(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=SF(this.apiClient,e);return u=Y("{model}:countTokens",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>{const p=S4(h),g=new Av;return Object.assign(g,p),g})}else{const d=_U(this.apiClient,e);return u=Y("{model}:countTokens",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>{const p=JF(h),g=new Av;return Object.assign(g,p),g})}}async computeTokens(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const u=wF(this.apiClient,e);return o=Y("{model}:computeTokens",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>{const d=w4(c),h=new sD;return Object.assign(h,d),h})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=PF(this.apiClient,e);return u=Y("{model}:predictLongRunning",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>{const p=P4(h),g=new pu;return Object.assign(g,p),g})}else{const d=CU(this.apiClient,e);return u=Y("{model}:predictLongRunning",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>{const p=ZF(h),g=new pu;return Object.assign(g,p),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ib(t){const e={},n=l(t,["operationName"]);n!=null&&a(e,["_url","operationName"],n);const r=l(t,["config"]);return r!=null&&a(e,["config"],r),e}function ob(t){const e={},n=l(t,["operationName"]);n!=null&&a(e,["operationName"],n);const r=l(t,["resourceName"]);r!=null&&a(e,["_url","resourceName"],r);const i=l(t,["config"]);return i!=null&&a(e,["config"],i),e}function sb(t){const e={},n=l(t,["operationName"]);n!=null&&a(e,["_url","operationName"],n);const r=l(t,["config"]);return r!=null&&a(e,["config"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lb extends gi{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=sb(e);return u=Y("{operationName}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s}else{const d=ib(e);return u=Y("{operationName}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s}}async fetchPredictVideosOperationInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const u=ob(e);return o=Y("{resourceName}:fetchPredictOperation",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ab(t){const e={},n=l(t,["voiceName"]);return n!=null&&a(e,["voiceName"],n),e}function cI(t){const e={},n=l(t,["prebuiltVoiceConfig"]);return n!=null&&a(e,["prebuiltVoiceConfig"],ab(n)),e}function ub(t){const e={},n=l(t,["speaker"]);n!=null&&a(e,["speaker"],n);const r=l(t,["voiceConfig"]);return r!=null&&a(e,["voiceConfig"],cI(r)),e}function cb(t){const e={},n=l(t,["speakerVoiceConfigs"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>ub(i))),a(e,["speakerVoiceConfigs"],r)}return e}function db(t){const e={},n=l(t,["voiceConfig"]);n!=null&&a(e,["voiceConfig"],cI(n));const r=l(t,["multiSpeakerVoiceConfig"]);r!=null&&a(e,["multiSpeakerVoiceConfig"],cb(r));const i=l(t,["languageCode"]);return i!=null&&a(e,["languageCode"],i),e}function fb(t){const e={},n=l(t,["fps"]);n!=null&&a(e,["fps"],n);const r=l(t,["endOffset"]);r!=null&&a(e,["endOffset"],r);const i=l(t,["startOffset"]);return i!=null&&a(e,["startOffset"],i),e}function hb(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["data"]);n!=null&&a(e,["data"],n);const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function pb(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function mb(t){const e={},n=l(t,["videoMetadata"]);n!=null&&a(e,["videoMetadata"],fb(n));const r=l(t,["thought"]);r!=null&&a(e,["thought"],r);const i=l(t,["inlineData"]);i!=null&&a(e,["inlineData"],hb(i));const o=l(t,["fileData"]);o!=null&&a(e,["fileData"],pb(o));const s=l(t,["thoughtSignature"]);s!=null&&a(e,["thoughtSignature"],s);const u=l(t,["codeExecutionResult"]);u!=null&&a(e,["codeExecutionResult"],u);const c=l(t,["executableCode"]);c!=null&&a(e,["executableCode"],c);const d=l(t,["functionCall"]);d!=null&&a(e,["functionCall"],d);const h=l(t,["functionResponse"]);h!=null&&a(e,["functionResponse"],h);const p=l(t,["text"]);return p!=null&&a(e,["text"],p),e}function gb(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>mb(o))),a(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&a(e,["role"],r),e}function yb(t){const e={},n=l(t,["behavior"]);n!=null&&a(e,["behavior"],n);const r=l(t,["description"]);r!=null&&a(e,["description"],r);const i=l(t,["name"]);i!=null&&a(e,["name"],i);const o=l(t,["parameters"]);o!=null&&a(e,["parameters"],o);const s=l(t,["parametersJsonSchema"]);s!=null&&a(e,["parametersJsonSchema"],s);const u=l(t,["response"]);u!=null&&a(e,["response"],u);const c=l(t,["responseJsonSchema"]);return c!=null&&a(e,["responseJsonSchema"],c),e}function vb(t){const e={},n=l(t,["startTime"]);n!=null&&a(e,["startTime"],n);const r=l(t,["endTime"]);return r!=null&&a(e,["endTime"],r),e}function _b(t){const e={},n=l(t,["timeRangeFilter"]);if(n!=null&&a(e,["timeRangeFilter"],vb(n)),l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Tb(t){const e={},n=l(t,["mode"]);n!=null&&a(e,["mode"],n);const r=l(t,["dynamicThreshold"]);return r!=null&&a(e,["dynamicThreshold"],r),e}function Eb(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&a(e,["dynamicRetrievalConfig"],Tb(n)),e}function Cb(){return{}}function Ib(t){const e={},n=l(t,["environment"]);return n!=null&&a(e,["environment"],n),e}function Sb(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(d=>yb(d))),a(e,["functionDeclarations"],c)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(t,["googleSearch"]);r!=null&&a(e,["googleSearch"],_b(r));const i=l(t,["googleSearchRetrieval"]);if(i!=null&&a(e,["googleSearchRetrieval"],Eb(i)),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(l(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");l(t,["urlContext"])!=null&&a(e,["urlContext"],Cb());const s=l(t,["computerUse"]);s!=null&&a(e,["computerUse"],Ib(s));const u=l(t,["codeExecution"]);return u!=null&&a(e,["codeExecution"],u),e}function wb(t){const e={},n=l(t,["handle"]);if(n!=null&&a(e,["handle"],n),l(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function jv(){return{}}function Ab(t){const e={},n=l(t,["disabled"]);n!=null&&a(e,["disabled"],n);const r=l(t,["startOfSpeechSensitivity"]);r!=null&&a(e,["startOfSpeechSensitivity"],r);const i=l(t,["endOfSpeechSensitivity"]);i!=null&&a(e,["endOfSpeechSensitivity"],i);const o=l(t,["prefixPaddingMs"]);o!=null&&a(e,["prefixPaddingMs"],o);const s=l(t,["silenceDurationMs"]);return s!=null&&a(e,["silenceDurationMs"],s),e}function Rb(t){const e={},n=l(t,["automaticActivityDetection"]);n!=null&&a(e,["automaticActivityDetection"],Ab(n));const r=l(t,["activityHandling"]);r!=null&&a(e,["activityHandling"],r);const i=l(t,["turnCoverage"]);return i!=null&&a(e,["turnCoverage"],i),e}function xb(t){const e={},n=l(t,["targetTokens"]);return n!=null&&a(e,["targetTokens"],n),e}function Pb(t){const e={},n=l(t,["triggerTokens"]);n!=null&&a(e,["triggerTokens"],n);const r=l(t,["slidingWindow"]);return r!=null&&a(e,["slidingWindow"],xb(r)),e}function kb(t){const e={},n=l(t,["proactiveAudio"]);return n!=null&&a(e,["proactiveAudio"],n),e}function Nb(t,e){const n={},r=l(t,["generationConfig"]);e!==void 0&&r!=null&&a(e,["setup","generationConfig"],r);const i=l(t,["responseModalities"]);e!==void 0&&i!=null&&a(e,["setup","generationConfig","responseModalities"],i);const o=l(t,["temperature"]);e!==void 0&&o!=null&&a(e,["setup","generationConfig","temperature"],o);const s=l(t,["topP"]);e!==void 0&&s!=null&&a(e,["setup","generationConfig","topP"],s);const u=l(t,["topK"]);e!==void 0&&u!=null&&a(e,["setup","generationConfig","topK"],u);const c=l(t,["maxOutputTokens"]);e!==void 0&&c!=null&&a(e,["setup","generationConfig","maxOutputTokens"],c);const d=l(t,["mediaResolution"]);e!==void 0&&d!=null&&a(e,["setup","generationConfig","mediaResolution"],d);const h=l(t,["seed"]);e!==void 0&&h!=null&&a(e,["setup","generationConfig","seed"],h);const p=l(t,["speechConfig"]);e!==void 0&&p!=null&&a(e,["setup","generationConfig","speechConfig"],db(Tp(p)));const g=l(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&a(e,["setup","generationConfig","enableAffectiveDialog"],g);const v=l(t,["systemInstruction"]);e!==void 0&&v!=null&&a(e,["setup","systemInstruction"],gb(pt(v)));const R=l(t,["tools"]);if(e!==void 0&&R!=null){let F=Ao(R);Array.isArray(F)&&(F=F.map(b=>Sb(wo(b)))),a(e,["setup","tools"],F)}const P=l(t,["sessionResumption"]);e!==void 0&&P!=null&&a(e,["setup","sessionResumption"],wb(P));const D=l(t,["inputAudioTranscription"]);e!==void 0&&D!=null&&a(e,["setup","inputAudioTranscription"],jv());const w=l(t,["outputAudioTranscription"]);e!==void 0&&w!=null&&a(e,["setup","outputAudioTranscription"],jv());const _=l(t,["realtimeInputConfig"]);e!==void 0&&_!=null&&a(e,["setup","realtimeInputConfig"],Rb(_));const S=l(t,["contextWindowCompression"]);e!==void 0&&S!=null&&a(e,["setup","contextWindowCompression"],Pb(S));const V=l(t,["proactivity"]);return e!==void 0&&V!=null&&a(e,["setup","proactivity"],kb(V)),n}function Mb(t,e){const n={},r=l(e,["model"]);r!=null&&a(n,["setup","model"],Te(t,r));const i=l(e,["config"]);return i!=null&&a(n,["config"],Nb(i,n)),n}function Db(t,e,n){const r={},i=l(e,["expireTime"]);n!==void 0&&i!=null&&a(n,["expireTime"],i);const o=l(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&a(n,["newSessionExpireTime"],o);const s=l(e,["uses"]);n!==void 0&&s!=null&&a(n,["uses"],s);const u=l(e,["liveConnectConstraints"]);n!==void 0&&u!=null&&a(n,["bidiGenerateContentSetup"],Mb(t,u));const c=l(e,["lockAdditionalFields"]);return n!==void 0&&c!=null&&a(n,["fieldMask"],c),r}function Vb(t,e){const n={},r=l(e,["config"]);return r!=null&&a(n,["config"],Db(t,r,n)),n}function Lb(t){const e={},n=l(t,["name"]);return n!=null&&a(e,["name"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ub(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(o=>`${n}.${o}`);e.push(...i)}else e.push(n)}return e.join(",")}function Fb(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const o=r.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,n=o):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const i=t.fieldMask;if(n){const o=Ub(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?t.fieldMask=o:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];i.length>0&&(u=i.map(d=>s.includes(d)?`generationConfig.${d}`:d));const c=[];o&&c.push(o),u.length>0&&c.push(...u),c.length>0?t.fieldMask=c.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}class bb extends gi{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=Vb(this.apiClient,e);o=Y("auth_tokens",u._url),s=u._query,delete u.config,delete u._url,delete u._query;const c=Fb(u,e.config);return i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>Lb(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ob(t){const e={},n=l(t,["name"]);n!=null&&a(e,["_url","name"],n);const r=l(t,["config"]);return r!=null&&a(e,["config"],r),e}function Bb(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&a(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);e!==void 0&&i!=null&&a(e,["_query","pageToken"],i);const o=l(t,["filter"]);return e!==void 0&&o!=null&&a(e,["_query","filter"],o),n}function qb(t){const e={},n=l(t,["config"]);return n!=null&&a(e,["config"],Bb(n,e)),e}function $b(t){const e={},n=l(t,["name"]);n!=null&&a(e,["_url","name"],n);const r=l(t,["config"]);return r!=null&&a(e,["config"],r),e}function Gb(t){const e={},n=l(t,["textInput"]);n!=null&&a(e,["textInput"],n);const r=l(t,["output"]);return r!=null&&a(e,["output"],r),e}function Hb(t){const e={};if(l(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=l(t,["examples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Gb(i))),a(e,["examples","examples"],r)}return e}function zb(t,e){const n={};if(l(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=l(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&a(e,["displayName"],r),l(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const i=l(t,["epochCount"]);e!==void 0&&i!=null&&a(e,["tuningTask","hyperparameters","epochCount"],i);const o=l(t,["learningRateMultiplier"]);if(o!=null&&a(n,["tuningTask","hyperparameters","learningRateMultiplier"],o),l(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(l(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(l(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const s=l(t,["batchSize"]);e!==void 0&&s!=null&&a(e,["tuningTask","hyperparameters","batchSize"],s);const u=l(t,["learningRate"]);return e!==void 0&&u!=null&&a(e,["tuningTask","hyperparameters","learningRate"],u),n}function Wb(t){const e={},n=l(t,["baseModel"]);n!=null&&a(e,["baseModel"],n);const r=l(t,["preTunedModel"]);r!=null&&a(e,["preTunedModel"],r);const i=l(t,["trainingDataset"]);i!=null&&a(e,["tuningTask","trainingData"],Hb(i));const o=l(t,["config"]);return o!=null&&a(e,["config"],zb(o,e)),e}function Kb(t){const e={},n=l(t,["name"]);n!=null&&a(e,["_url","name"],n);const r=l(t,["config"]);return r!=null&&a(e,["config"],r),e}function Jb(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&a(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);e!==void 0&&i!=null&&a(e,["_query","pageToken"],i);const o=l(t,["filter"]);return e!==void 0&&o!=null&&a(e,["_query","filter"],o),n}function Qb(t){const e={},n=l(t,["config"]);return n!=null&&a(e,["config"],Jb(n,e)),e}function Yb(t){const e={},n=l(t,["name"]);n!=null&&a(e,["_url","name"],n);const r=l(t,["config"]);return r!=null&&a(e,["config"],r),e}function Xb(t,e){const n={},r=l(t,["gcsUri"]);e!==void 0&&r!=null&&a(e,["supervisedTuningSpec","trainingDatasetUri"],r);const i=l(t,["vertexDatasetResource"]);if(e!==void 0&&i!=null&&a(e,["supervisedTuningSpec","trainingDatasetUri"],i),l(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function Zb(t,e){const n={},r=l(t,["gcsUri"]);r!=null&&a(n,["validationDatasetUri"],r);const i=l(t,["vertexDatasetResource"]);return e!==void 0&&i!=null&&a(e,["supervisedTuningSpec","trainingDatasetUri"],i),n}function jb(t,e){const n={},r=l(t,["validationDataset"]);e!==void 0&&r!=null&&a(e,["supervisedTuningSpec"],Zb(r,n));const i=l(t,["tunedModelDisplayName"]);e!==void 0&&i!=null&&a(e,["tunedModelDisplayName"],i);const o=l(t,["description"]);e!==void 0&&o!=null&&a(e,["description"],o);const s=l(t,["epochCount"]);e!==void 0&&s!=null&&a(e,["supervisedTuningSpec","hyperParameters","epochCount"],s);const u=l(t,["learningRateMultiplier"]);e!==void 0&&u!=null&&a(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],u);const c=l(t,["exportLastCheckpointOnly"]);e!==void 0&&c!=null&&a(e,["supervisedTuningSpec","exportLastCheckpointOnly"],c);const d=l(t,["preTunedModelCheckpointId"]);d!=null&&a(n,["preTunedModel","checkpointId"],d);const h=l(t,["adapterSize"]);if(e!==void 0&&h!=null&&a(e,["supervisedTuningSpec","hyperParameters","adapterSize"],h),l(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(l(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return n}function eO(t){const e={},n=l(t,["baseModel"]);n!=null&&a(e,["baseModel"],n);const r=l(t,["preTunedModel"]);r!=null&&a(e,["preTunedModel"],r);const i=l(t,["trainingDataset"]);i!=null&&a(e,["supervisedTuningSpec","trainingDatasetUri"],Xb(i,e));const o=l(t,["config"]);return o!=null&&a(e,["config"],jb(o,e)),e}function tO(t){const e={},n=l(t,["name"]);n!=null&&a(e,["model"],n);const r=l(t,["name"]);return r!=null&&a(e,["endpoint"],r),e}function dI(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["name"]);r!=null&&a(e,["name"],r);const i=l(t,["state"]);i!=null&&a(e,["state"],O0(i));const o=l(t,["createTime"]);o!=null&&a(e,["createTime"],o);const s=l(t,["tuningTask","startTime"]);s!=null&&a(e,["startTime"],s);const u=l(t,["tuningTask","completeTime"]);u!=null&&a(e,["endTime"],u);const c=l(t,["updateTime"]);c!=null&&a(e,["updateTime"],c);const d=l(t,["description"]);d!=null&&a(e,["description"],d);const h=l(t,["baseModel"]);h!=null&&a(e,["baseModel"],h);const p=l(t,["_self"]);p!=null&&a(e,["tunedModel"],tO(p));const g=l(t,["customBaseModel"]);g!=null&&a(e,["customBaseModel"],g);const v=l(t,["experiment"]);v!=null&&a(e,["experiment"],v);const R=l(t,["labels"]);R!=null&&a(e,["labels"],R);const P=l(t,["outputUri"]);P!=null&&a(e,["outputUri"],P);const D=l(t,["pipelineJob"]);D!=null&&a(e,["pipelineJob"],D);const w=l(t,["serviceAccount"]);w!=null&&a(e,["serviceAccount"],w);const _=l(t,["tunedModelDisplayName"]);return _!=null&&a(e,["tunedModelDisplayName"],_),e}function nO(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&a(e,["nextPageToken"],r);const i=l(t,["tunedModels"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>dI(s))),a(e,["tuningJobs"],o)}return e}function rO(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["name"]);r!=null&&a(e,["name"],r);const i=l(t,["metadata"]);i!=null&&a(e,["metadata"],i);const o=l(t,["done"]);o!=null&&a(e,["done"],o);const s=l(t,["error"]);return s!=null&&a(e,["error"],s),e}function iO(t){const e={},n=l(t,["checkpointId"]);n!=null&&a(e,["checkpointId"],n);const r=l(t,["epoch"]);r!=null&&a(e,["epoch"],r);const i=l(t,["step"]);i!=null&&a(e,["step"],i);const o=l(t,["endpoint"]);return o!=null&&a(e,["endpoint"],o),e}function oO(t){const e={},n=l(t,["model"]);n!=null&&a(e,["model"],n);const r=l(t,["endpoint"]);r!=null&&a(e,["endpoint"],r);const i=l(t,["checkpoints"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>iO(s))),a(e,["checkpoints"],o)}return e}function Lf(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["name"]);r!=null&&a(e,["name"],r);const i=l(t,["state"]);i!=null&&a(e,["state"],O0(i));const o=l(t,["createTime"]);o!=null&&a(e,["createTime"],o);const s=l(t,["startTime"]);s!=null&&a(e,["startTime"],s);const u=l(t,["endTime"]);u!=null&&a(e,["endTime"],u);const c=l(t,["updateTime"]);c!=null&&a(e,["updateTime"],c);const d=l(t,["error"]);d!=null&&a(e,["error"],d);const h=l(t,["description"]);h!=null&&a(e,["description"],h);const p=l(t,["baseModel"]);p!=null&&a(e,["baseModel"],p);const g=l(t,["tunedModel"]);g!=null&&a(e,["tunedModel"],oO(g));const v=l(t,["preTunedModel"]);v!=null&&a(e,["preTunedModel"],v);const R=l(t,["supervisedTuningSpec"]);R!=null&&a(e,["supervisedTuningSpec"],R);const P=l(t,["tuningDataStats"]);P!=null&&a(e,["tuningDataStats"],P);const D=l(t,["encryptionSpec"]);D!=null&&a(e,["encryptionSpec"],D);const w=l(t,["partnerModelTuningSpec"]);w!=null&&a(e,["partnerModelTuningSpec"],w);const _=l(t,["customBaseModel"]);_!=null&&a(e,["customBaseModel"],_);const S=l(t,["experiment"]);S!=null&&a(e,["experiment"],S);const V=l(t,["labels"]);V!=null&&a(e,["labels"],V);const F=l(t,["outputUri"]);F!=null&&a(e,["outputUri"],F);const b=l(t,["pipelineJob"]);b!=null&&a(e,["pipelineJob"],b);const A=l(t,["serviceAccount"]);A!=null&&a(e,["serviceAccount"],A);const E=l(t,["tunedModelDisplayName"]);return E!=null&&a(e,["tunedModelDisplayName"],E),e}function sO(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&a(e,["nextPageToken"],r);const i=l(t,["tuningJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Lf(s))),a(e,["tuningJobs"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lO extends gi{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new pl(di.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.tune=async n=>{if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel},i=Object.assign(Object.assign({},n),{preTunedModel:r});return i.baseModel=void 0,await this.tuneInternal(i)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),i=await this.tuneMldevInternal(r);let o="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?o=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(o=i.name.split("/operations/")[0]),{name:o,state:Af.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=Kb(e);return u=Y("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>Lf(h))}else{const d=Ob(e);return u=Y("{name}",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>dI(h))}}async listInternal(e){var n,r,i,o;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=Qb(e);return u=Y("tuningJobs",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>{const p=sO(h),g=new xv;return Object.assign(g,p),g})}else{const d=qb(e);return u=Y("tunedModels",d._url),c=d._query,delete d.config,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),s.then(h=>{const p=nO(h),g=new xv;return Object.assign(g,p),g})}}async cancel(e){var n,r,i,o;let s="",u={};if(this.apiClient.isVertexAI()){const c=Yb(e);s=Y("{name}:cancel",c._url),u=c._query,delete c.config,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const c=$b(e);s=Y("{name}:cancel",c._url),u=c._query,delete c.config,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async tuneInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const u=eO(e);return o=Y("tuningJobs",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>Lf(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Wb(e);return o=Y("tunedModels",u._url),s=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),i.then(c=>rO(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class aO{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const uO=1024*1024*8,cO=3,dO=1e3,fO=2,sd="x-goog-upload-status";async function hO(t,e,n){var r,i,o;let s=0,u=0,c=new Rf(new Response),d="upload";for(s=t.size;u<s;){const p=Math.min(uO,s-u),g=t.slice(u,u+p);u+p>=s&&(d+=", finalize");let v=0,R=dO;for(;v<cO&&(c=await n.request({path:"",body:g,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(u),"Content-Length":String(p)}}}),!(!((r=c==null?void 0:c.headers)===null||r===void 0)&&r[sd]));)v++,await mO(R),R=R*fO;if(u+=p,((i=c==null?void 0:c.headers)===null||i===void 0?void 0:i[sd])!=="active")break;if(s<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const h=await(c==null?void 0:c.json());if(((o=c==null?void 0:c.headers)===null||o===void 0?void 0:o[sd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return h.file}async function pO(t){return{size:t.size,type:t.type}}function mO(t){return new Promise(e=>setTimeout(e,t))}class gO{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await hO(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await pO(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yO{create(e,n,r){return new vO(e,n,r)}}class vO{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const e_="x-goog-api-key";class _O{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(e_)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(e_,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const TO="gl-node/";class EO{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=tD(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;const i=new _O(this.apiKey);this.apiClient=new F4({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:TO+"web",uploader:new gO,downloader:new aO}),this.models=new rb(this.apiClient),this.live=new Y4(this.apiClient,i,new yO),this.batches=new A1(this.apiClient),this.chats=new MV(this.models,this.apiClient),this.caches=new PV(this.apiClient),this.files=new zV(this.apiClient),this.operations=new lb(this.apiClient),this.authTokens=new bb(this.apiClient),this.tunings=new lO(this.apiClient)}}const fI={apiKey:"AIzaSyCoF23rWBJlEzgmV39PcL2vGTgAoKy3brQ",authDomain:"pi-planner-fe8b0.firebaseapp.com",projectId:"pi-planner-fe8b0",storageBucket:"pi-planner-fe8b0.firebasestorage.app",messagingSenderId:"1043640420845",appId:"1:1043640420845:web:ffb353d516094b95d4ffe4",measurementId:"G-7Y3CRFVRM1"},CO="pi-planner",IO=le.createContext(null),SO=null;console.log("Firebase config:",{...fI,apiKey:"***"});let gu;try{gu=EE(fI),console.log("Firebase initialized successfully")}catch(t){if(t.code==="app/duplicate-app")gu=getApp();else throw console.error("Firebase initialization error:",t),t}const zt=HM(gu),$r=xk(gu);zt.onAuthStateChanged(t=>{console.log("Auth state changed:",t?`User: ${t.uid}`:"No user")});const wO=()=>{const[t,e]=le.useState(null),[n,r]=le.useState(!0);return le.useEffect(()=>{zt&&!t&&(async()=>{try{SO||await m0(zt)}catch(o){console.error("Firebase auth error:",o)}finally{r(!1)}})()},[zt]),le.useEffect(()=>{if(zt){const i=zt.onAuthStateChanged(o=>{e(o),r(!1)});return()=>i()}},[zt]),{user:t,loading:n}},AO=()=>{const{user:t,loading:e}=wO(),n=(t==null?void 0:t.uid)||crypto.randomUUID(),[r,i]=le.useState({requirements:[],epics:[],issues:[],sprints:[{id:"sprint-1",name:"Sprint 1"},{id:"sprint-2",name:"Sprint 2"}]}),[o,s]=le.useState(""),[u,c]=le.useState(!1),[d,h]=le.useState(""),[p,g]=le.useState(!1),[v,R]=le.useState({sprintLengthWeeks:2,teamVelocity:85,numberOfDevelopers:5}),[P,D]=le.useState(!1),[w,_]=le.useState(!1),[S,V]=le.useState(""),[F,b]=le.useState(null),[A,E]=le.useState(null),I=`projects/${CO}/planning/data`;le.useEffect(()=>{let O=()=>{};return(async()=>{var z;if(!$r||!zt){console.log("Firebase not yet initialized");return}try{if(!zt.currentUser){console.log("Attempting anonymous sign in...");const ee=await m0(zt);console.log("Anonymous auth successful:",ee.user.uid)}await new Promise(ee=>setTimeout(ee,1e3)),console.log("Current user:",(z=zt.currentUser)==null?void 0:z.uid),console.log("Firestore path:",I);const W=hy($r,I);try{const ee=await Gk(W);console.log("Permission test successful:",ee.exists()?"Document exists":"Document does not exist")}catch(ee){throw console.error("Permission test failed:",ee),ee}const X={requirements:[],epics:[],issues:[],sprints:[{id:"sprint-1",name:"Sprint 1"},{id:"sprint-2",name:"Sprint 2"}]};try{await Hk(W,X,{merge:!0}),console.log("Document initialized/updated successfully")}catch(ee){throw console.error("Error initializing document:",ee),ee}O=Wk(W,ee=>{console.log("Real-time update received:",ee.exists()?"Document exists":"Document does not exist"),console.log("Snapshot data:",ee.data()),ee.exists()&&i(ee.data())},ee=>{console.error("Real-time listener error:",ee),h("Failed to sync with the database. Please check your Firebase configuration and permissions."),g(!0)})}catch(W){console.error("Error in Firestore initialization:",W),h("Failed to initialize the database. Error: "+W.message),g(!0)}})(),()=>O()},[$r,zt]),le.useEffect(()=>{(async()=>{try{const B="AIzaSyBuWt_hqwvGieG0sL8oYMqBzadob8a7KvY",z=new EO({apiKey:B});console.log("Gemini API instance:",z),console.log("Available methods:",Object.getOwnPropertyNames(z)),console.log("Available methods (prototype):",Object.getOwnPropertyNames(Object.getPrototypeOf(z))),b(z),E(z),console.log("Gemini API initialized successfully")}catch(B){console.error("Failed to initialize Gemini API:",B),h("Failed to initialize AI service. Please check your API key configuration."),g(!0)}})()},[]),le.useEffect(()=>{if($r&&!e&&t){const O=hy($r,I);zk(O,r).catch(B=>{console.error("Error writing to Firestore:",B),h("Failed to save changes to the database. Please check your connection."),g(!0)})}},[r,$r,I,e,t]);const x=async(O,B)=>{if(c(!0),h(""),g(!1),!F||!A)return c(!1),h("Gemini API is not properly configured. Please check the API key configuration."),g(!0),null;let z=0;const W=3,X=1e3,ee=async()=>{try{const ae=`${O}

Input: ${B}

Response (in JSON format):`;if(!F)throw new Error("Gemini API not initialized");const ye=await F.models.generateContent({model:"gemini-2.5-flash",contents:[{role:"user",parts:[{text:ae}]}],generationConfig:{temperature:.1,topK:1,topP:.1}});console.log("Full result:",ye),console.log("Result structure:",Object.keys(ye)),console.log("Candidates:",ye.candidates);let ue;if(ye.candidates&&ye.candidates[0]&&ye.candidates[0].content)ue=ye.candidates[0].content.parts[0].text;else throw new Error("Unable to extract text from response");console.log("Extracted text:",ue);let he=ue.trim();he.startsWith("```json")&&(he=he.slice(7)),he.startsWith("```")&&(he=he.slice(3)),he.endsWith("```")&&(he=he.slice(0,-3)),he=he.trim(),console.log("Cleaned text for parsing:",he);let tn;try{tn=JSON.parse(he)}catch{throw console.error("Failed to parse API response:",he),new Error("Invalid JSON response from AI")}return c(!1),tn}catch(ae){if(z<W){z++;const ye=X*Math.pow(2,z-1);return console.log(`API error: ${ae.message}. Retrying in ${ye}ms... (Attempt ${z} of ${W})`),await new Promise(ue=>setTimeout(ue,ye)),ee()}else return c(!1),console.error("API call failed after multiple retries:",ae),h(ae.message==="SERVICE_UNAVAILABLE"?"The AI service is temporarily unavailable. Please try again in a few minutes.":"Failed to connect to the AI. Please try again later."),g(!0),null}};return ee()},N=()=>{if(o.trim()==="")return;const O=crypto.randomUUID();i(B=>({...B,requirements:[...B.requirements,{id:O,text:o}]})),s("")},M=async O=>{const B="As a PI planner, translate the following raw requirement into a concise, well-defined Epic title, description, and acceptance criteria in Gherkin format. Provide only the JSON output with 'title', 'description', and 'acceptanceCriteria' keys.",z=`Requirement: ${O}`,W=await x(B,z);if(W){const X=new Date().toISOString(),ee={title:W.title,description:W.description,summary:"",acceptanceCriteria:W.acceptanceCriteria,priority:"Medium",tShirtSize:"M"},ae={id:crypto.randomUUID(),...ee,status:"notStarted",issues:[],history:[{timestamp:X,action:"Created from requirement",data:ee,user:"AI Generated"}]};i(ye=>({...ye,epics:[...ye.epics,ae],requirements:ye.requirements.filter(ue=>ue.text!==O)}))}},k=(O,B)=>{i(z=>{const W=z.epics.find(ae=>ae.id===O);if(!W)return z;const ee={timestamp:new Date().toISOString(),action:"Manual edit",data:{title:W.title,description:W.description,summary:W.summary,acceptanceCriteria:W.acceptanceCriteria,priority:W.priority,tShirtSize:W.tShirtSize},user:"User"};return{...z,epics:z.epics.map(ae=>ae.id===O?{...ae,...B,history:[...ae.history||[],ee]}:ae)}})},He=O=>{i(B=>({...B,epics:B.epics.filter(z=>z.id!==O),issues:B.issues.filter(z=>z.epicId!==O)}))},Oe=async O=>{const B=r.epics.find(ee=>ee.id===O);if(!B)return;const z="As a PI planner, review and expand on the following epic. Add more detail, break down complex ideas, and suggest potential sub-themes. Provide only the refined description as a JSON object with 'refinedDescription' and 'refinedAcceptanceCriteria' keys.",W=`Epic Title: ${B.title}
Epic Description: ${B.description}
Epic Acceptance Criteria: ${B.acceptanceCriteria}`,X=await x(z,W);if(X){const ae={timestamp:new Date().toISOString(),action:"AI refinement",data:{title:B.title,description:B.description,summary:B.summary,acceptanceCriteria:B.acceptanceCriteria,priority:B.priority,tShirtSize:B.tShirtSize},user:"AI Refined"};i(ye=>({...ye,epics:ye.epics.map(ue=>ue.id===O?{...ue,description:X.refinedDescription,acceptanceCriteria:X.refinedAcceptanceCriteria,history:[...ue.history||[],ae]}:ue)}))}},Nt=async O=>{const B=r.epics.find(ee=>ee.id===O);if(!B)return;const z="Based on the provided Epic, generate a list of Jira issues including Stories, Tasks, and Spikes. For each issue, provide a 'summary', a 'description', and 'acceptanceCriteria' in Gherkin format (Given, When, Then). Also, provide a reasonable 'storyPoints' estimate (1-13) and a 'timeEstimate' in hours. Provide the output as a JSON array of objects, with keys 'type', 'summary', 'description', 'acceptanceCriteria', 'storyPoints', 'timeEstimate'. The 'type' must be 'Story', 'Task', or 'Spike'.",W=`Epic Title: ${B.title}
Epic Description: ${B.description}`,X=await x(z,W);if(X){const ee=X.map(ae=>({...ae,id:crypto.randomUUID(),epicId:O,sprint:null,status:"To Do"}));i(ae=>({...ae,epics:ae.epics.map(ye=>ye.id===O?{...ye,issues:[...ye.issues,...ee.map(ue=>ue.id)]}:ye),issues:[...ae.issues,...ee]}))}},Mt=O=>{const B={id:crypto.randomUUID(),epicId:O,type:"Story",summary:"New Issue",description:"",acceptanceCriteria:"",storyPoints:0,timeEstimate:0,sprint:null,status:"To Do"};i(z=>({...z,epics:z.epics.map(W=>W.id===O?{...W,issues:[...W.issues,B.id]}:W),issues:[...z.issues,B]}))},J=(O,B,z)=>{i(W=>({...W,issues:W.issues.map(X=>X.id===O?{...X,[B]:z}:X)}))},ne=O=>{var z;const B=(z=r.issues.find(W=>W.id===O))==null?void 0:z.epicId;i(W=>({...W,issues:W.issues.filter(X=>X.id!==O),epics:W.epics.map(X=>X.id===B?{...X,issues:X.issues.filter(ee=>ee!==O)}:X)}))};le.useEffect(()=>{i(O=>{const B=O.epics.map(z=>{const W=O.issues.filter(ae=>ae.epicId===z.id);if(W.length===0)return{...z,status:"notStarted"};const X=W.every(ae=>ae.status==="Done"),ee=W.some(ae=>ae.sprint!==null);return X?{...z,status:"complete"}:ee?{...z,status:"inProgress"}:{...z,status:"notStarted"}});return{...O,epics:B}})},[r.issues]);const H=r.epics.slice().sort((O,B)=>O.status==="inProgress"&&B.status!=="inProgress"?-1:O.status!=="inProgress"&&B.status==="inProgress"?1:O.status==="notStarted"&&B.status!=="notStarted"?-1:O.status!=="notStarted"&&B.status==="notStarted"?1:0),fe=O=>r.issues.filter(B=>B.sprint===O),Ee=async O=>{if(!F)return console.error("AI not initialized for dependency analysis"),{};const B=`Analyze the following Jira issues and identify dependencies between them. Consider dependencies based on:
    1. Technical dependencies (one task must be completed before another)
    2. Feature dependencies (logical order of implementation)
    3. Data dependencies (one issue creates data needed by another)
    
    Return a JSON object where keys are issue IDs and values are arrays of issue IDs that must be completed first.
    Example: {"issue1": ["issue2", "issue3"], "issue4": []}`,z=O.map(W=>`ID: ${W.id}, Type: ${W.type}, Summary: ${W.summary}, Description: ${W.description}`).join(`

`);try{return await x(B,z)||{}}catch(W){return console.error("Error analyzing dependencies:",W),{}}},Ne=(O,B,z)=>{const{teamVelocity:W}=z,X=[...r.sprints],ee=[],ae={Critical:0,High:1,Medium:2,Low:3},ue=[...[...O].sort((Ct,$t)=>{const An=r.epics.find(Do=>Do.id===Ct.epicId),dn=r.epics.find(Do=>Do.id===$t.epicId),Fr=ae[(An==null?void 0:An.priority)||"Medium"],sc=ae[(dn==null?void 0:dn.priority)||"Medium"];return Fr-sc})];let he=0,tn=W;const Mo=Ct=>({id:`sprint-${Ct+1}`,name:`Sprint ${Ct+1}`}),gl=()=>ue.filter($t=>(B[$t.id]||[]).every(dn=>ee.some(Fr=>Fr.id===dn)))[0];for(;ue.length>0;){let Ct=gl();Ct||(Ct=ue[0],console.warn(`Breaking dependency cycle, scheduling: ${Ct.summary}`));const $t=Ct.storyPoints||3;$t>tn&&(he++,tn=W,he>=X.length&&X.push(Mo(he)));const An=X[he].id,dn={...Ct,sprint:An};ee.push(dn),ue.splice(ue.indexOf(Ct),1),tn-=$t}return{scheduledIssues:ee,updatedSprints:X}},Zt=async()=>{c(!0);try{const O=fe(null);if(O.length===0){h("No issues in backlog to schedule"),g(!0),c(!1);return}const B=await Ee(O),{scheduledIssues:z,updatedSprints:W}=Ne(O,B,v);i(X=>({...X,issues:X.issues.map(ee=>z.find(ye=>ye.id===ee.id)||ee),sprints:W})),c(!1),D(!1)}catch(O){console.error("Auto-scheduling error:",O),h("Failed to auto-schedule issues. Please try again."),g(!0),c(!1)}},qt=O=>{const B=O.split(`
`).filter(X=>X.trim());if(B.length<2)throw new Error("CSV must have at least a header and one data row");const z=B[0].split(",").map(X=>X.trim().replace(/"/g,"")),W=[];for(let X=1;X<B.length;X++){const ee=B[X].split(",").map(ye=>ye.trim().replace(/"/g,""));if(ee.length!==z.length)continue;const ae={};z.forEach((ye,ue)=>{ae[ye]=ee[ue]}),W.push(ae)}return W},jt=O=>{if(!Array.isArray(O))throw new Error("Data must be an array");return O.map((B,z)=>{if(typeof B=="string")return{id:crypto.randomUUID(),text:B};if(B.text||B.requirement||B.description)return{id:B.id||crypto.randomUUID(),text:B.text||B.requirement||B.description};throw new Error(`Invalid requirement format at row ${z+1}`)})},en=O=>{if(!Array.isArray(O))throw new Error("Data must be an array");return O.map((B,z)=>{if(!B.title&&!B.name)throw new Error(`Epic at row ${z+1} must have a title or name`);const W=new Date().toISOString(),X={title:B.title||B.name,description:B.description||"",summary:B.summary||"",acceptanceCriteria:B.acceptanceCriteria||B.acceptance_criteria||"",priority:B.priority||"Medium",tShirtSize:B.tShirtSize||B.size||"M"};return{id:B.id||crypto.randomUUID(),...X,status:B.status||"notStarted",issues:[],history:[{timestamp:W,action:"Imported",data:X,user:"Import"}]}})},nc=O=>{if(!Array.isArray(O))throw new Error("Data must be an array");return O.map((B,z)=>{if(!B.name&&!B.title)throw new Error(`Sprint at row ${z+1} must have a name or title`);return{id:B.id||`sprint-${Date.now()}-${z}`,name:B.name||B.title}})},rc=async O=>{try{const B=await O.text();let z;if(O.name.endsWith(".json"))z=JSON.parse(B);else if(O.name.endsWith(".csv")||O.name.endsWith(".txt"))z=qt(B);else try{z=JSON.parse(B)}catch{z=qt(B)}if(z.version&&z.exportDate&&(z.epics||z.issues||z.sprints||z.requirements))switch(S){case"requirements":z.requirements&&i(W=>({...W,requirements:[...W.requirements,...z.requirements]}));break;case"epics":z.epics&&i(W=>({...W,epics:[...W.epics,...z.epics]})),z.issues&&i(W=>({...W,issues:[...W.issues,...z.issues]}));break;case"sprints":z.sprints&&i(W=>({...W,sprints:[...W.sprints,...z.sprints]}));break;default:throw new Error("Invalid import type")}else{let W;switch(S){case"requirements":W=jt(z),i(X=>({...X,requirements:[...X.requirements,...W]}));break;case"epics":W=en(z),i(X=>({...X,epics:[...X.epics,...W]}));break;case"sprints":W=nc(z),i(X=>({...X,sprints:[...X.sprints,...W]}));break;default:throw new Error("Invalid import type")}}_(!1),V("")}catch(B){console.error("Import error:",B),h(`Import failed: ${B.message}`),g(!0)}},vi=()=>{try{const O={exportDate:new Date().toISOString(),version:"1.0",epics:r.epics,issues:r.issues,sprints:r.sprints,requirements:r.requirements},B=JSON.stringify(O,null,2),z=new Blob([B],{type:"application/json"}),W=URL.createObjectURL(z),X=document.createElement("a");X.href=W,X.download=`pi-planner-export-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(X),X.click(),document.body.removeChild(X),URL.revokeObjectURL(W)}catch(O){console.error("Export error:",O),h(`Export failed: ${O.message}`),g(!0)}},[Po,ml]=le.useState(!1),[Ur,ko]=le.useState(!1),[No,ic]=le.useState({}),oc=()=>{ko(!Ur)};return e?C.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-50",children:C.jsxs("div",{className:"text-center p-8 bg-white rounded-xl shadow-lg",children:[C.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-500 mx-auto",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[C.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),C.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),C.jsx("h2",{className:"mt-4 text-lg font-semibold text-gray-700",children:"Connecting to Firebase..."})]})}):C.jsx(IO.Provider,{value:{db:$r,userId:n},children:C.jsxs("div",{className:"min-h-screen bg-slate-100 font-sans text-gray-800 p-8 flex flex-col items-center",children:[p&&C.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:C.jsxs("div",{className:"bg-red-500 text-white rounded-lg shadow-xl p-6 max-w-sm w-full",children:[C.jsx("h3",{className:"font-bold text-lg mb-2",children:"Error"}),C.jsx("p",{children:d}),C.jsx("button",{className:"mt-4 bg-white text-red-500 font-bold py-2 px-4 rounded-full hover:bg-red-100 transition-colors",onClick:()=>g(!1),children:"Close"})]})}),C.jsxs("header",{className:"w-full max-w-7xl text-center py-6",children:[C.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-blue-800",children:"AI-Powered PI Planning"}),C.jsx("p",{className:"mt-2 text-lg text-gray-600",children:"Transform ideas into action with intelligent issue generation."}),C.jsxs("p",{className:"mt-2 text-sm text-gray-500",children:["User ID: ",C.jsx("span",{className:"font-mono text-xs",children:n})]})]}),C.jsx("div",{className:"w-full max-w-7xl flex justify-end mb-4",children:C.jsx("div",{className:"lg:w-1/3",children:C.jsxs("button",{onClick:vi,className:"px-4 py-2 bg-blue-500 text-white rounded-lg text-sm font-semibold hover:bg-blue-600 transition-colors flex items-center ml-auto",title:"Export all data for Jira integration",children:[C.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:C.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export Data"]})})}),C.jsxs("main",{className:"w-full max-w-7xl grid grid-cols-1 lg:grid-cols-3 gap-8 mt-0",children:[C.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 flex flex-col min-h-[400px]",children:[C.jsxs("div",{className:"flex items-center justify-between mb-4",children:[C.jsxs("h2",{className:"text-2xl font-bold text-gray-700 flex items-center",children:["Requirements ",C.jsx(Ss,{className:"w-5 h-5 ml-2 text-gray-400"})]}),C.jsxs("button",{onClick:()=>{V("requirements"),_(!0)},className:"px-3 py-1 bg-green-500 text-white rounded-full text-xs font-semibold hover:bg-green-600 transition-colors flex items-center",title:"Import Requirements",children:[C.jsx(Wr,{className:"w-4 h-4 mr-1"})," Import"]})]}),C.jsx("div",{className:"flex-grow space-y-4",children:r.requirements.map(O=>C.jsxs("div",{className:"p-4 bg-gray-100 rounded-lg flex items-center justify-between shadow-sm",children:[C.jsx("span",{className:"text-sm font-medium text-gray-700",children:O.text}),C.jsx("button",{onClick:()=>M(O.text),className:"flex-shrink-0 ml-4 p-2 bg-blue-500 text-white rounded-full shadow-md hover:bg-blue-600 transition-colors",title:"Translate to Epic",disabled:u,children:C.jsx(Kr,{className:"w-4 h-4"})})]},O.id))}),C.jsx("div",{className:"mt-6",children:C.jsxs("div",{className:"flex items-center space-x-2",children:[C.jsx("input",{type:"text",value:o,onChange:O=>s(O.target.value),placeholder:"Enter new requirement...",className:"flex-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 text-sm",onKeyDown:O=>O.key==="Enter"&&N()}),C.jsx("button",{onClick:N,className:"p-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors shadow-md",title:"Add Requirement",children:C.jsx(Wr,{className:"w-5 h-5"})})]})})]}),C.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 flex flex-col min-h-[400px]",children:[C.jsxs("div",{className:"flex items-center justify-between mb-4",children:[C.jsxs("h2",{className:"text-2xl font-bold text-gray-700 flex items-center",children:["Epics ",C.jsx(Ss,{className:"w-5 h-5 ml-2 text-gray-400"})]}),C.jsxs("button",{onClick:()=>{V("epics"),_(!0)},className:"px-3 py-1 bg-green-500 text-white rounded-full text-xs font-semibold hover:bg-green-600 transition-colors flex items-center",title:"Import Epics",children:[C.jsx(Wr,{className:"w-4 h-4 mr-1"})," Import"]})]}),u&&C.jsxs("div",{className:"flex items-center justify-center p-4 text-blue-500 animate-pulse",children:[C.jsx(Kr,{className:"w-6 h-6 mr-2"}),C.jsx("span",{className:"font-semibold",children:"AI is working its magic..."})]}),C.jsx("div",{className:"flex-grow space-y-4",children:H.map(O=>C.jsx(YM,{epic:O,onRefine:Oe,onGenerateIssues:Nt,onAddIssue:Mt,onUpdateEpic:k,onDeleteEpic:He,loadingAI:u,issues:r.issues.filter(B=>B.epicId===O.id)},O.id))})]}),C.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 flex flex-col min-h-[400px]",children:[C.jsxs("div",{className:"flex items-center justify-between mb-4",children:[C.jsxs("h2",{className:"text-2xl font-bold text-gray-700 flex items-center",children:["Sprints ",C.jsx(x0,{className:"w-6 h-6 ml-2 text-gray-400"})]}),C.jsxs("div",{className:"flex space-x-2",children:[C.jsxs("button",{onClick:()=>{V("sprints"),_(!0)},className:"px-3 py-1 bg-green-500 text-white rounded-full text-xs font-semibold hover:bg-green-600 transition-colors flex items-center",title:"Import Sprints",children:[C.jsx(Wr,{className:"w-4 h-4 mr-1"})," Import"]}),C.jsxs("button",{onClick:()=>D(!0),className:`px-3 py-1 rounded-full text-xs font-semibold transition-colors flex items-center ${u||fe(null).length===0?"bg-gray-400 text-gray-200 cursor-not-allowed":"bg-purple-500 text-white hover:bg-purple-600"}`,disabled:u||fe(null).length===0,title:u?"AI is processing...":fe(null).length===0?"No unscheduled issues in backlog":`Auto Schedule ${fe(null).length} backlog issues`,children:[C.jsx(Kr,{className:"w-4 h-4 mr-1"})," Auto Schedule"]})]})]}),C.jsx("div",{className:"sprints-section",children:r.sprints.map(O=>C.jsx("div",{className:"sprint",children:!No[O.id]&&C.jsx(XM,{sprint:O,issues:fe(O.id),onUpdateIssue:J,onDeleteIssue:ne,allSprints:r.sprints})},O.id))}),C.jsxs("div",{className:"backlog-section mt-4 p-4 border-t border-gray-200",children:[C.jsxs("div",{className:"flex items-center justify-between",children:[C.jsx("button",{onClick:oc,className:"collapse-button",children:Ur?C.jsx(Ss,{}):C.jsx(R0,{})}),C.jsxs("h3",{className:"text-xl font-bold text-gray-700 mb-2",children:["Backlog",C.jsx("span",{className:"ml-2 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-red-100 bg-red-600 rounded-full",children:fe(null).length})]})]}),!Ur&&C.jsx("div",{className:"backlog-content space-y-3",children:fe(null).map(O=>C.jsx(M0,{issue:O,onUpdate:J,onDelete:ne,allSprints:r.sprints},O.id))})]})]})]}),P&&C.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:C.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-md w-full",children:[C.jsxs("h3",{className:"font-bold text-lg mb-4 text-purple-600 flex items-center",children:[C.jsx(Kr,{className:"w-5 h-5 mr-2"}),"Auto-Schedule Configuration"]}),C.jsxs("div",{className:"space-y-4 mb-6",children:[C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sprint Length (weeks)"}),C.jsx("input",{type:"number",min:"1",max:"4",value:v.sprintLengthWeeks,onChange:O=>R({...v,sprintLengthWeeks:parseInt(O.target.value)||2}),className:"w-full p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-purple-400"})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Team Velocity (story points per sprint)"}),C.jsx("input",{type:"number",min:"10",max:"200",value:v.teamVelocity,onChange:O=>R({...v,teamVelocity:parseInt(O.target.value)||85}),className:"w-full p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-purple-400"})]}),C.jsxs("div",{children:[C.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Number of Developers"}),C.jsx("input",{type:"number",min:"1",max:"20",value:v.numberOfDevelopers,onChange:O=>R({...v,numberOfDevelopers:parseInt(O.target.value)||5}),className:"w-full p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-purple-400"})]})]}),C.jsx("div",{className:"bg-gray-50 p-3 rounded mb-4",children:C.jsxs("p",{className:"text-sm text-gray-600",children:[C.jsx("strong",{children:"Preview:"})," With ",fe(null).length," backlog issues, this will analyze dependencies and schedule them across sprints based on ",v.teamVelocity," story points capacity per sprint."]})}),C.jsxs("div",{className:"flex space-x-3",children:[C.jsx("button",{onClick:Zt,disabled:u,className:"flex-1 bg-purple-500 text-white font-bold py-2 px-4 rounded hover:bg-purple-600 transition-colors disabled:opacity-50 flex items-center justify-center",children:u?C.jsxs(C.Fragment,{children:[C.jsxs("svg",{className:"animate-spin h-4 w-4 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[C.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),C.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Scheduling..."]}):C.jsxs(C.Fragment,{children:[C.jsx(Kr,{className:"w-4 h-4 mr-2"}),"Start Auto-Schedule"]})}),C.jsx("button",{onClick:()=>D(!1),disabled:u,className:"flex-1 bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded hover:bg-gray-400 transition-colors disabled:opacity-50",children:"Cancel"})]})]})}),w&&C.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:C.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-md w-full",children:[C.jsxs("h3",{className:"font-bold text-lg mb-4 text-green-600 flex items-center",children:[C.jsx(Wr,{className:"w-5 h-5 mr-2"}),"Import ",S.charAt(0).toUpperCase()+S.slice(1)]}),C.jsxs("div",{className:"mb-6",children:[C.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select file to import"}),C.jsx("input",{type:"file",accept:".json,.csv,.txt",onChange:O=>{O.target.files[0]&&rc(O.target.files[0])},className:"w-full p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-green-400"})]}),C.jsxs("div",{className:"bg-gray-50 p-4 rounded mb-4",children:[C.jsx("h4",{className:"font-semibold text-sm mb-2",children:"Supported Formats:"}),C.jsxs("div",{className:"text-xs text-gray-600 space-y-1",children:[C.jsxs("div",{children:[C.jsx("strong",{children:"JSON:"})," Array of objects with appropriate fields"]}),C.jsxs("div",{children:[C.jsx("strong",{children:"CSV:"})," Comma-separated values with headers"]}),S==="requirements"&&C.jsxs("div",{className:"mt-2",children:[C.jsx("strong",{children:"Requirements fields:"})," text, requirement, or description"]}),S==="epics"&&C.jsxs("div",{className:"mt-2",children:[C.jsx("strong",{children:"Epic fields:"})," title/name (required), description, summary, acceptanceCriteria, priority, tShirtSize"]}),S==="sprints"&&C.jsxs("div",{className:"mt-2",children:[C.jsx("strong",{children:"Sprint fields:"})," name/title (required)"]})]})]}),C.jsxs("div",{className:"bg-blue-50 p-3 rounded mb-4",children:[C.jsx("p",{className:"text-sm text-blue-700",children:C.jsx("strong",{children:"Example JSON format:"})}),C.jsxs("pre",{className:"text-xs mt-1 text-blue-600",children:[S==="requirements"&&`[
  {"text": "User login functionality"},
  {"text": "Password reset feature"}
]`,S==="epics"&&`[
  {
    "title": "User Authentication",
    "description": "Login and security",
    "priority": "High"
  }
]`,S==="sprints"&&`[
  {"name": "Sprint 3"},
  {"name": "Sprint 4"}
]`]})]}),C.jsx("div",{className:"flex space-x-3",children:C.jsx("button",{onClick:()=>{_(!1),V("")},className:"flex-1 bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded hover:bg-gray-400 transition-colors",children:"Cancel"})})]})})]})})};ld.createRoot(document.getElementById("root")).render(C.jsx(ZI.StrictMode,{children:C.jsx(AO,{})}));
